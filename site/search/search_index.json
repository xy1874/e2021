{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u5b9e\u9a8c\u6587\u6863\u7b80\u4ecb \u672c\u5b9e\u9a8c\u6587\u6863\u4e3a\u54c8\u5c14\u6ee8\u5de5\u4e1a\u5927\u5b66\uff08\u6df1\u5733\uff09\u300a\u5d4c\u5165\u5f0f\u8ba1\u7b97\u300b\u8bfe\u7a0b\u5b9e\u9a8c\u6307\u5bfc\u6750\u6599\u3002\u9875\u9762\u9876\u7aef\u4e3a\u5b9e\u9a8c\u987b\u77e5\u3001\u5b9e\u9a8c\u5e73\u53f0\u7b80\u4ecb\u3001Bootloader\u542f\u52a8\u6d41\u7a0b\u5206\u6790\u4ee5\u53ca3\u4e2a\u5b9e\u9a8c\u7684\u6307\u5bfc\u4e66\u3002\u9875\u9762\u5de6\u4fa7\u4e3a\u6307\u5bfc\u4e66\u7684\u5404\u4e2a\u5c0f\u8282\u76ee\u5f55\uff0c\u53f3\u4fa7\u4e3a\u5c0f\u8282\u5185\u7684\u7d22\u5f15\uff0c\u9875\u9762\u53f3\u4e0a\u89d2\u53ef\u8be6\u7ec6\u641c\u7d22\uff0c\u9875\u9762\u4e0b\u65b9\u53ef\u5207\u6362\u4e0a\u4e0b\u5c0f\u8282\u3002\u8bf7\u52a1\u5fc5\u6309\u987a\u5e8f\u9605\u8bfb\u6307\u5bfc\u4e66\uff0c\u6709\u95ee\u9898\u79ef\u6781\u5728\u7fa4\u5185\u63d0\u51fa\u3002 \u5982\u53d1\u73b0\u6307\u5bfc\u4e66\u7f16\u5199\u6709\u8bef\u6216\u6709\u5b9d\u8d35\u7684\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u8bf7\u79c1\u4fe1\u8001\u5e08\u3002 \u82e5\u6307\u5bfc\u4e66\u6709\u66f4\u65b0\uff0c\u5c06\u7b2c\u4e00\u65f6\u95f4\u5728\u8bfe\u7a0b\u7fa4\u5185\u63a8\u9001\u901a\u77e5\u3002 \u8bfe\u7a0b\u4fe1\u606f \u8bfe\u7a0b\u540d\u79f0\uff1a\u5d4c\u5165\u5f0f\u8ba1\u7b97\uff08\u5b9e\u9a8c\uff09 \u5b66\u671f\uff1a2021\u6625\u5b63 \u4e0a\u8bfe\u65f6\u95f4\uff1a \u5e8f\u53f7 \u4e0a\u8bfe\u65f6\u95f4 \u8282\u6b21 1 13\u5468\uff0c\u5468\u4e00 9-12\u8282 2 14\u5468\uff0c\u5468\u56db 5-8\u8282 3 15\u5468\uff0c\u5468\u4e00 9-12\u8282 \u5176\u4ed6 1. \u53c2\u8003\u8d44\u6599\u53ca\u5b9e\u9a8c\u5305\u4e0b\u8f7d \u2003\u2003 \u70b9\u51fb\u4e0b\u8f7d\u53c2\u8003\u8d44\u6599\u548c\u5b9e\u9a8c\u5305 \u2003\u2003 \u70b9\u51fb\u4e0b\u8f7d\u5b9e\u9a8c\u865a\u62df\u673a 2. \u4f5c\u4e1a\u63d0\u4ea4\u65b9\u5f0f \u2003\u2003\u63d0\u4ea4\u4f5c\u4e1a\u7684\u65b9\u6cd5\u548c\u6d41\u7a0b\u89c1\u300a HITsz Grader\u5b66\u751f\u7aef\u4f7f\u7528\u624b\u518cv1.0 \u300b","title":"\u5b9e\u9a8c\u987b\u77e5"},{"location":"#_1","text":"\u672c\u5b9e\u9a8c\u6587\u6863\u4e3a\u54c8\u5c14\u6ee8\u5de5\u4e1a\u5927\u5b66\uff08\u6df1\u5733\uff09\u300a\u5d4c\u5165\u5f0f\u8ba1\u7b97\u300b\u8bfe\u7a0b\u5b9e\u9a8c\u6307\u5bfc\u6750\u6599\u3002\u9875\u9762\u9876\u7aef\u4e3a\u5b9e\u9a8c\u987b\u77e5\u3001\u5b9e\u9a8c\u5e73\u53f0\u7b80\u4ecb\u3001Bootloader\u542f\u52a8\u6d41\u7a0b\u5206\u6790\u4ee5\u53ca3\u4e2a\u5b9e\u9a8c\u7684\u6307\u5bfc\u4e66\u3002\u9875\u9762\u5de6\u4fa7\u4e3a\u6307\u5bfc\u4e66\u7684\u5404\u4e2a\u5c0f\u8282\u76ee\u5f55\uff0c\u53f3\u4fa7\u4e3a\u5c0f\u8282\u5185\u7684\u7d22\u5f15\uff0c\u9875\u9762\u53f3\u4e0a\u89d2\u53ef\u8be6\u7ec6\u641c\u7d22\uff0c\u9875\u9762\u4e0b\u65b9\u53ef\u5207\u6362\u4e0a\u4e0b\u5c0f\u8282\u3002\u8bf7\u52a1\u5fc5\u6309\u987a\u5e8f\u9605\u8bfb\u6307\u5bfc\u4e66\uff0c\u6709\u95ee\u9898\u79ef\u6781\u5728\u7fa4\u5185\u63d0\u51fa\u3002 \u5982\u53d1\u73b0\u6307\u5bfc\u4e66\u7f16\u5199\u6709\u8bef\u6216\u6709\u5b9d\u8d35\u7684\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u8bf7\u79c1\u4fe1\u8001\u5e08\u3002 \u82e5\u6307\u5bfc\u4e66\u6709\u66f4\u65b0\uff0c\u5c06\u7b2c\u4e00\u65f6\u95f4\u5728\u8bfe\u7a0b\u7fa4\u5185\u63a8\u9001\u901a\u77e5\u3002","title":"\u5b9e\u9a8c\u6587\u6863\u7b80\u4ecb"},{"location":"#_2","text":"\u8bfe\u7a0b\u540d\u79f0\uff1a\u5d4c\u5165\u5f0f\u8ba1\u7b97\uff08\u5b9e\u9a8c\uff09 \u5b66\u671f\uff1a2021\u6625\u5b63 \u4e0a\u8bfe\u65f6\u95f4\uff1a \u5e8f\u53f7 \u4e0a\u8bfe\u65f6\u95f4 \u8282\u6b21 1 13\u5468\uff0c\u5468\u4e00 9-12\u8282 2 14\u5468\uff0c\u5468\u56db 5-8\u8282 3 15\u5468\uff0c\u5468\u4e00 9-12\u8282","title":"\u8bfe\u7a0b\u4fe1\u606f"},{"location":"#_3","text":"","title":"\u5176\u4ed6"},{"location":"#1","text":"\u70b9\u51fb\u4e0b\u8f7d\u53c2\u8003\u8d44\u6599\u548c\u5b9e\u9a8c\u5305 \u2003\u2003 \u70b9\u51fb\u4e0b\u8f7d\u5b9e\u9a8c\u865a\u62df\u673a","title":"1. \u53c2\u8003\u8d44\u6599\u53ca\u5b9e\u9a8c\u5305\u4e0b\u8f7d"},{"location":"#2","text":"\u63d0\u4ea4\u4f5c\u4e1a\u7684\u65b9\u6cd5\u548c\u6d41\u7a0b\u89c1\u300a HITsz Grader\u5b66\u751f\u7aef\u4f7f\u7528\u624b\u518cv1.0 \u300b","title":"2. \u4f5c\u4e1a\u63d0\u4ea4\u65b9\u5f0f"},{"location":"ojguide/","text":"\u4f5c\u4e1a\u63d0\u4ea4\u8bf4\u660e 1. \u767b\u9646 \u2003\u2003\u5b66\u751f\u7aef\u767b\u9646\u7f51\u5740\uff1a http://10.249.12.98:8000/#/login \u3002\u63a8\u8350\u4f7f\u7528Chrome\u6d4f\u89c8\u5668\uff0c\u521d\u59cb\u7528\u6237\u540d/\u5bc6\u7801\u5747\u4e3a\u5b66\u53f7\u3002 \u2003\u2003\u521d\u59cb\u767b\u9646\u4e4b\u540e\u5efa\u8bae\u4fee\u6539\u81ea\u5df1\u7684\u5bc6\u7801\uff0c\u6b65\u9aa4\u89c1\u672c\u9875\u7684\u201c5.\u4fee\u6539\u5bc6\u7801\u201d\u3002 2. \u67e5\u770b\u8bfe\u7a0b \u2003\u2003\u767b\u5f55\u4e4b\u540e\u5373\u53ef\u67e5\u770b\u81ea\u5df1\u6240\u9009\u7684\u8bfe\u7a0b\u3002 \u2003\u2003\u70b9\u51fb\u8fdb\u5165\u8bfe\u7a0b\u5373\u53ef\u67e5\u770b\u8bfe\u7a0b\u8be6\u7ec6\u5185\u5bb9\u3002 \u2003\u2003\u7279\u522b\u6ce8\u610f\u4f5c\u4e1a\u63d0\u4ea4\u7684 \u622a\u6b62\u65f6\u95f4 \uff01 3. \u63d0\u4ea4\u4f5c\u4e1a \u2003\u2003\u70b9\u51fb \u5f00\u59cb\u4f5c\u7b54 \u8fdb\u884c\u4f5c\u4e1a\u4f5c\u7b54\u6216\u63d0\u4ea4\u3002 \u2003\u2003\u5f00\u59cb\u4f5c\u7b54\u9875\u9762\uff1a \u2003\u2003\u70b9\u51fbFile input\u9009\u62e9\u9700\u8981\u63d0\u4ea4\u7684\u6587\u4ef6\u8fdb\u884c\u4f5c\u4e1a\u63d0\u4ea4 \u2003\u2003\u9009\u62e9\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u9875\u9762\u53f3\u4e0b\u89d2\u63d0\u4ea4\u6309\u94ae\u5b8c\u6210\u63d0\u4ea4 \u2003\u2003 \u770b\u5230\u9875\u9762\u8df3\u8f6c\u540e\uff0c\u8868\u793a\u5df2\u63d0\u4ea4\u6210\u529f\u3002\u4e2d\u9014\u5173\u95ed\u6d4f\u89c8\u5668\u5c06\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff01 4. \u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a \u2003\u2003\u63d0\u4ea4\u4f5c\u4e1a\u540e\uff0c\u622a\u6b62\u65f6\u95f4\u524d\u4ecd\u53ef\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\u3002 5. \u4fee\u6539\u5bc6\u7801 \u2003\u2003\u70b9\u51fb\u53f3\u4e0a\u89d2\u8d26\u53f7\u4fe1\u606f\u5373\u53ef\u8fdb\u5165\u5bc6\u7801\u4fee\u6539 6. \u6ce8\u610f\u4e8b\u9879 \u2003\u2003\uff081\uff09\u622a\u6b62\u65f6\u95f4\u524d\u53ef\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\uff0c\u76ee\u524d\u4e0d\u9650\u63d0\u4ea4\u6b21\u6570\uff1b \u2003\u2003\uff082\uff09\u8bf7\u6ce8\u610f\u63d0\u4ea4\u622a\u6b62\u65f6\u95f4\uff0c\u622a\u6b62\u65f6\u95f4\u540e\u65e0\u6cd5\u63d0\u4ea4\u4f5c\u4e1a\uff1b \u2003\u2003\uff083\uff09\u6ce8\u610f\u63d0\u4ea4\u4f5c\u4e1a\u65f6\u6587\u4ef6\u538b\u7f29\u5305\u540e\u7f00\u76ee\u524d\u4ec5\u652f\u6301.zip\uff1b \u2003\u2003\uff084\uff09\u76ee\u524d\u4e0d\u652f\u6301\u63d0\u4ea4\u5927\u4e8e100MB\u7684\u6587\u4ef6\u3002","title":"\u4f5c\u4e1a\u63d0\u4ea4\u8bf4\u660e"},{"location":"ojguide/#_1","text":"","title":"\u4f5c\u4e1a\u63d0\u4ea4\u8bf4\u660e"},{"location":"ojguide/#1","text":"\u5b66\u751f\u7aef\u767b\u9646\u7f51\u5740\uff1a http://10.249.12.98:8000/#/login \u3002\u63a8\u8350\u4f7f\u7528Chrome\u6d4f\u89c8\u5668\uff0c\u521d\u59cb\u7528\u6237\u540d/\u5bc6\u7801\u5747\u4e3a\u5b66\u53f7\u3002 \u2003\u2003\u521d\u59cb\u767b\u9646\u4e4b\u540e\u5efa\u8bae\u4fee\u6539\u81ea\u5df1\u7684\u5bc6\u7801\uff0c\u6b65\u9aa4\u89c1\u672c\u9875\u7684\u201c5.\u4fee\u6539\u5bc6\u7801\u201d\u3002","title":"1. \u767b\u9646"},{"location":"ojguide/#2","text":"\u767b\u5f55\u4e4b\u540e\u5373\u53ef\u67e5\u770b\u81ea\u5df1\u6240\u9009\u7684\u8bfe\u7a0b\u3002 \u2003\u2003\u70b9\u51fb\u8fdb\u5165\u8bfe\u7a0b\u5373\u53ef\u67e5\u770b\u8bfe\u7a0b\u8be6\u7ec6\u5185\u5bb9\u3002 \u2003\u2003\u7279\u522b\u6ce8\u610f\u4f5c\u4e1a\u63d0\u4ea4\u7684 \u622a\u6b62\u65f6\u95f4 \uff01","title":"2. \u67e5\u770b\u8bfe\u7a0b"},{"location":"ojguide/#3","text":"\u70b9\u51fb \u5f00\u59cb\u4f5c\u7b54 \u8fdb\u884c\u4f5c\u4e1a\u4f5c\u7b54\u6216\u63d0\u4ea4\u3002 \u2003\u2003\u5f00\u59cb\u4f5c\u7b54\u9875\u9762\uff1a \u2003\u2003\u70b9\u51fbFile input\u9009\u62e9\u9700\u8981\u63d0\u4ea4\u7684\u6587\u4ef6\u8fdb\u884c\u4f5c\u4e1a\u63d0\u4ea4 \u2003\u2003\u9009\u62e9\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u9875\u9762\u53f3\u4e0b\u89d2\u63d0\u4ea4\u6309\u94ae\u5b8c\u6210\u63d0\u4ea4 \u2003\u2003 \u770b\u5230\u9875\u9762\u8df3\u8f6c\u540e\uff0c\u8868\u793a\u5df2\u63d0\u4ea4\u6210\u529f\u3002\u4e2d\u9014\u5173\u95ed\u6d4f\u89c8\u5668\u5c06\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff01","title":"3. \u63d0\u4ea4\u4f5c\u4e1a"},{"location":"ojguide/#4","text":"\u63d0\u4ea4\u4f5c\u4e1a\u540e\uff0c\u622a\u6b62\u65f6\u95f4\u524d\u4ecd\u53ef\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\u3002","title":"4. \u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a"},{"location":"ojguide/#5","text":"\u70b9\u51fb\u53f3\u4e0a\u89d2\u8d26\u53f7\u4fe1\u606f\u5373\u53ef\u8fdb\u5165\u5bc6\u7801\u4fee\u6539","title":"5. \u4fee\u6539\u5bc6\u7801"},{"location":"ojguide/#6","text":"\uff081\uff09\u622a\u6b62\u65f6\u95f4\u524d\u53ef\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\uff0c\u76ee\u524d\u4e0d\u9650\u63d0\u4ea4\u6b21\u6570\uff1b \u2003\u2003\uff082\uff09\u8bf7\u6ce8\u610f\u63d0\u4ea4\u622a\u6b62\u65f6\u95f4\uff0c\u622a\u6b62\u65f6\u95f4\u540e\u65e0\u6cd5\u63d0\u4ea4\u4f5c\u4e1a\uff1b \u2003\u2003\uff083\uff09\u6ce8\u610f\u63d0\u4ea4\u4f5c\u4e1a\u65f6\u6587\u4ef6\u538b\u7f29\u5305\u540e\u7f00\u76ee\u524d\u4ec5\u652f\u6301.zip\uff1b \u2003\u2003\uff084\uff09\u76ee\u524d\u4e0d\u652f\u6301\u63d0\u4ea4\u5927\u4e8e100MB\u7684\u6587\u4ef6\u3002","title":"6. \u6ce8\u610f\u4e8b\u9879"},{"location":"BootLoader/overview/","text":"BootLoader\u6982\u8ff0 1. BootLoader\u7684\u6982\u5ff5 \u2003\u2003\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u662f\u7cfb\u7edf\u52a0\u7535\u540e\u8fd0\u884c\u7684\u7b2c\u4e00\u6bb5\u8f6f\u4ef6\u4ee3\u7801\u3002\u56de\u5fc6\u4e00\u4e0bPC\u7684\u4f53\u7cfb\u7ed3\u6784\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0cPC\u673a\u4e2d\u7684\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u7531BIOS\uff08\u672c\u8d28\u662f\u4e00\u6bb5\u56fa\u4ef6\u7a0b\u5e8f\uff09\u548c\u4f4d\u4e8e\u786c\u76d8MBR\u4e2d\u7684BootLoader\uff08\u5982LILO\u3001GRUB\u7b49\uff09\u7ec4\u6210\u3002BIOS\u5728\u5b8c\u6210\u786c\u4ef6\u68c0\u6d4b\u548c\u8d44\u6e90\u5206\u914d\u540e\uff0c\u5c06\u786c\u76d8MBR\u4e2d\u7684BootLoader\u8bfb\u5230\u7cfb\u7edf\u7684RAM\u4e2d\uff0c\u7136\u540e\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9BootLoader\u3002BootLoader\u7684\u4e3b\u8981\u4efb\u52a1\u662f\u5c06OS\u5185\u6838\u955c\u50cf\u4ece\u786c\u76d8\u4e0a\u8bfb\u5230RAM\u4e2d\uff0c\u7136\u540e\u8df3\u8f6c\u5230OS\u5185\u6838\u7684\u5165\u53e3\uff0c\u4e5f\u5373\u5f00\u59cb\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf\u3002 \u2003\u2003\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4e00\u822c\u5e76\u6ca1\u6709\u50cfBIOS\u90a3\u6837\u7684\u56fa\u4ef6\u7a0b\u5e8f\uff0c\u56e0\u6b64\u6574\u4e2a\u7cfb\u7edf\u7684\u52a0\u8f7d\u542f\u52a8\u4efb\u52a1\u5c31\u5b8c\u5168\u7531BootLoader\u6765\u5b8c\u6210\u3002 \u6ce8\u610f \u6709\u7684\u5d4c\u5165\u5f0fCPU\u4e5f\u4f1a\u5185\u5d4c\u4e00\u6bb5\u77ed\u5c0f\u7684\u542f\u52a8\u7a0b\u5e8f\u3002 \u2003\u2003Bootloader\u7684\u4e2d\u6587\u540d\u662f\u542f\u52a8\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u5de5\u4f5c\u5728\u65e0\u64cd\u4f5c\u7cfb\u7edf\u7684\u73af\u5883\u4e0b\uff0c\u4e5f\u53ef\u4ee5\u5de5\u4f5c\u5728\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u73af\u5883\u4e0b\u3002\u5728\u65e0\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u4e0b\u901a\u5e38\u8868\u73b0\u4e3a\uff1a\u4e0e\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1\u5728\u4e00\u8d77\uff0c\u5728\u5e94\u7528\u7a0b\u5e8f\u4e4b\u524d\u8fd0\u884c\u7684\u4e00\u6bb5\u4ee3\u7801\uff0c\u4e00\u822c\u7531\u6c47\u7f16\u7f16\u5199\uff0c\u5b8c\u6210\u57fa\u672c\u786c\u4ef6\u7684\u521d\u59cb\u5316\uff0c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u505a\u51c6\u5907\u3002 \u2003\u2003\u901a\u5e38\u8bf4\u7684BootLoader\u4e00\u822c\u7279\u6307\u5728\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u4e0b\uff1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u8fd0\u884c\u4e4b\u524d\u8fd0\u884c\u7684\u4e00\u6bb5\u6216\u591a\u6bb5\u7a0b\u5e8f\u3002BootLoader\u7684\u529f\u80fd\u662f\u521d\u59cb\u5316\u786c\u4ef6\u8bbe\u5907\u3001\u5efa\u7acb\u7cfb\u7edf\u7684\u5185\u5b58\u7a7a\u95f4\u6620\u5c04\u56fe\uff0c\u5c06\u7cfb\u7edf\u7684\u8f6f\u4ef6\u786c\u4ef6\u73af\u5883\u5e26\u5230\u4e00\u4e2a\u5408\u9002\u7684\u72b6\u6001\uff0c\u4e3a\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u51c6\u5907\u597d\u6b63\u786e\u7684\u73af\u5883\uff0c\u628a\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u6620\u50cf\u52a0\u8f7d\u5230RAM\u4e2d\uff0c\u5e76\u5c06\u7cfb\u7edf\u63a7\u5236\u6743\u4ea4\u7ed9\u5b83\u3002 2. Bootloader\u7684\u5206\u7c7b \u2003\u2003\u6309\u7167CPU\u7684\u4e0d\u540c\uff0cBootLoader\u7684\u8981\u6c42\u4e5f\u4e0d\u4e00\u6837 \u2003\u20031. \u9488\u5bf9X86\u4e0a\u6709LILO\u3001GRUB\u3001ntloader\u7b49 \u2003\u20032. \u9488\u5bf9ARM\u67b6\u6784\u7684\u6709u-boot\u3001vivi\u3001armboot\u7b49 \u2003\u20033. \u9488\u5bf9ppc\u67b6\u6784\u7684\u6709ppcboot\u7b49","title":"BootLoader\u6982\u8ff0"},{"location":"BootLoader/overview/#bootloader","text":"","title":"BootLoader\u6982\u8ff0"},{"location":"BootLoader/overview/#1-bootloader","text":"\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u662f\u7cfb\u7edf\u52a0\u7535\u540e\u8fd0\u884c\u7684\u7b2c\u4e00\u6bb5\u8f6f\u4ef6\u4ee3\u7801\u3002\u56de\u5fc6\u4e00\u4e0bPC\u7684\u4f53\u7cfb\u7ed3\u6784\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff0cPC\u673a\u4e2d\u7684\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u7531BIOS\uff08\u672c\u8d28\u662f\u4e00\u6bb5\u56fa\u4ef6\u7a0b\u5e8f\uff09\u548c\u4f4d\u4e8e\u786c\u76d8MBR\u4e2d\u7684BootLoader\uff08\u5982LILO\u3001GRUB\u7b49\uff09\u7ec4\u6210\u3002BIOS\u5728\u5b8c\u6210\u786c\u4ef6\u68c0\u6d4b\u548c\u8d44\u6e90\u5206\u914d\u540e\uff0c\u5c06\u786c\u76d8MBR\u4e2d\u7684BootLoader\u8bfb\u5230\u7cfb\u7edf\u7684RAM\u4e2d\uff0c\u7136\u540e\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9BootLoader\u3002BootLoader\u7684\u4e3b\u8981\u4efb\u52a1\u662f\u5c06OS\u5185\u6838\u955c\u50cf\u4ece\u786c\u76d8\u4e0a\u8bfb\u5230RAM\u4e2d\uff0c\u7136\u540e\u8df3\u8f6c\u5230OS\u5185\u6838\u7684\u5165\u53e3\uff0c\u4e5f\u5373\u5f00\u59cb\u542f\u52a8\u64cd\u4f5c\u7cfb\u7edf\u3002 \u2003\u2003\u5728\u5d4c\u5165\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4e00\u822c\u5e76\u6ca1\u6709\u50cfBIOS\u90a3\u6837\u7684\u56fa\u4ef6\u7a0b\u5e8f\uff0c\u56e0\u6b64\u6574\u4e2a\u7cfb\u7edf\u7684\u52a0\u8f7d\u542f\u52a8\u4efb\u52a1\u5c31\u5b8c\u5168\u7531BootLoader\u6765\u5b8c\u6210\u3002 \u6ce8\u610f \u6709\u7684\u5d4c\u5165\u5f0fCPU\u4e5f\u4f1a\u5185\u5d4c\u4e00\u6bb5\u77ed\u5c0f\u7684\u542f\u52a8\u7a0b\u5e8f\u3002 \u2003\u2003Bootloader\u7684\u4e2d\u6587\u540d\u662f\u542f\u52a8\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u5b83\u53ef\u4ee5\u5de5\u4f5c\u5728\u65e0\u64cd\u4f5c\u7cfb\u7edf\u7684\u73af\u5883\u4e0b\uff0c\u4e5f\u53ef\u4ee5\u5de5\u4f5c\u5728\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u73af\u5883\u4e0b\u3002\u5728\u65e0\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u4e0b\u901a\u5e38\u8868\u73b0\u4e3a\uff1a\u4e0e\u5e94\u7528\u7a0b\u5e8f\u7f16\u8bd1\u5728\u4e00\u8d77\uff0c\u5728\u5e94\u7528\u7a0b\u5e8f\u4e4b\u524d\u8fd0\u884c\u7684\u4e00\u6bb5\u4ee3\u7801\uff0c\u4e00\u822c\u7531\u6c47\u7f16\u7f16\u5199\uff0c\u5b8c\u6210\u57fa\u672c\u786c\u4ef6\u7684\u521d\u59cb\u5316\uff0c\u4e3a\u5e94\u7528\u7a0b\u5e8f\u505a\u51c6\u5907\u3002 \u2003\u2003\u901a\u5e38\u8bf4\u7684BootLoader\u4e00\u822c\u7279\u6307\u5728\u64cd\u4f5c\u7cfb\u7edf\u73af\u5883\u4e0b\uff1a\u5728\u64cd\u4f5c\u7cfb\u7edf\u8fd0\u884c\u4e4b\u524d\u8fd0\u884c\u7684\u4e00\u6bb5\u6216\u591a\u6bb5\u7a0b\u5e8f\u3002BootLoader\u7684\u529f\u80fd\u662f\u521d\u59cb\u5316\u786c\u4ef6\u8bbe\u5907\u3001\u5efa\u7acb\u7cfb\u7edf\u7684\u5185\u5b58\u7a7a\u95f4\u6620\u5c04\u56fe\uff0c\u5c06\u7cfb\u7edf\u7684\u8f6f\u4ef6\u786c\u4ef6\u73af\u5883\u5e26\u5230\u4e00\u4e2a\u5408\u9002\u7684\u72b6\u6001\uff0c\u4e3a\u8c03\u7528\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u51c6\u5907\u597d\u6b63\u786e\u7684\u73af\u5883\uff0c\u628a\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u6620\u50cf\u52a0\u8f7d\u5230RAM\u4e2d\uff0c\u5e76\u5c06\u7cfb\u7edf\u63a7\u5236\u6743\u4ea4\u7ed9\u5b83\u3002","title":"1. BootLoader\u7684\u6982\u5ff5"},{"location":"BootLoader/overview/#2-bootloader","text":"\u6309\u7167CPU\u7684\u4e0d\u540c\uff0cBootLoader\u7684\u8981\u6c42\u4e5f\u4e0d\u4e00\u6837 \u2003\u20031. \u9488\u5bf9X86\u4e0a\u6709LILO\u3001GRUB\u3001ntloader\u7b49 \u2003\u20032. \u9488\u5bf9ARM\u67b6\u6784\u7684\u6709u-boot\u3001vivi\u3001armboot\u7b49 \u2003\u20033. \u9488\u5bf9ppc\u67b6\u6784\u7684\u6709ppcboot\u7b49","title":"2. Bootloader\u7684\u5206\u7c7b"},{"location":"BootLoader/theory/","text":"RK3399 Bootloader\u7684\u542f\u52a8\u8fc7\u7a0b \u2003\u2003RK3399\u542f\u52a8\u6d41\u7a0b\u53ef\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a \u6ce8\u610f \u5bf9\u4e8e\u4e0d\u540c\u7684\u7247\u4e0a\u7cfb\u7edfSOC\u800c\u8a00\uff0cBootLoader\u7ec6\u8282\u5404\u4e0d\u76f8\u540c\uff0c\u4f46\u603b\u4f53\u4e0a\u8fd8\u662f\u9075\u5faa\u4e0a\u8ff0\u51e0\u4e2a\u9636\u6bb5\u3002 \u8be6\u60c5\u8bf7\u67e5\u770b\u745e\u82af\u5fae\u7684Boot flow\u8bf4\u660e\uff1a http://opensource.rock-chips.com/wiki_Boot_option \u2003\u2003\u7cfb\u7edf\u542f\u52a8\u65f6\uff0c\u9996\u5148\u6267\u884cBootRom\u4e2d\u7684\u4ee3\u7801\uff0c\u5373ROM\u4ee3\u7801\u3002\u7136\u540e\uff0cROM\u4ee3\u7801\u5c06\u52a0\u8f7d\u7b2c2\u9636\u6bb5\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u5373SPL\u3002\u65e0\u8bba\u662fROM\u4ee3\u7801\u8fd8\u662fSPL\uff0c\u90fd\u9700\u8981\u5728\u5185\u5b58\u4e2d\u6267\u884c\uff0c\u5373ROM\u4ee3\u7801\u548cSPL\u90fd\u9700\u8981\u5148\u8f7d\u5165SoC\u7684\u5185\u90e8SRAM\u4e2d\uff0c\u624d\u80fd\u7531CPU\u6267\u884c\u3002 \u2003\u2003\u4e00\u822c\u6765\u8bf4\uff0cSoC\u4e2d\u7684\u5185\u90e8SRAM\u5e76\u4e0d\u8db3\u4ee5\u8f7d\u5165\u5b8c\u6574\u7684\u6574\u4e2a\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u3002\u56e0\u6b64\uff0cRK3399\u5728\u6bcf\u6b21\u590d\u4f4d\u6216\u542f\u52a8\u65f6\uff0c\u90fd\u9884\u5148\u52a0\u8f7d\u8f85\u52a9\u7a0b\u5e8f\u52a0\u8f7d\u5668\uff08\u542bROM\u4ee3\u7801\u3001SPL\uff09\uff0c\u5e76\u7531SPL\u521d\u59cb\u5316\u5bb9\u91cf\u66f4\u5927\u7684DDR\uff0c\u4ee5\u4fbf\u5728DDR\u4e2d\u6267\u884c\u540e\u7eed\u7684\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u63d0\u9ad8\u5f15\u5bfc\u6548\u7387\u3002 \u7b2c1\u9636\u6bb5\uff1a\u53ea\u8bfb\u5b58\u50a8\u5668\u4ee3\u7801 \u2003\u2003ROM\u4ee3\u7801\u5728\u82af\u7247\u5236\u9020\u65f6\u5c31\u4f1a\u88ab\u5199\u5165\u82af\u7247\u4e2d\uff0c\u56e0\u4e3aROM\u4ee3\u7801\u662f\u82af\u7247\u4e13\u6709\u7684\u4e14\u4e0d\u80fd\u88ab\u4efb\u4f55\u5f00\u6e90\u8bbe\u5907\u66ff\u4ee3\u3002SRAM\u4e5f\u662f\u7247\u4e0a\u7cfb\u7edf\u5185\u7f6e\u7684RAM\uff0cSRAM\u7684\u5927\u5c0f\u4ece4KB\u5230\u51e0\u767eKB\u4e0d\u7b49\u3002RK3399\u82af\u7247\u5185\u7f6e\u670932KB ROM\u548c192KB SRAM\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u2003\u2003BootRom\u4ee3\u7801\u5728SRAM\u4e0a\u8fd0\u884c\uff0c\u6821\u9a8c\u5b58\u50a8\u8bbe\u5907\u91cc\u7684BootLoader\u3002\u5bf9\u4e8eRK3399\u82af\u7247\uff0c\u5728SPL\u4e2d\u4f1a\u4f9d\u6b21\u67e5\u627e\u5b58\u50a8\u63a7\u5236\u5668\uff1aSPI nor Flash\u3001SPI nand Flash\u3001eMMC\u3001SD/MMC\uff0c\u5982\u679c\u5728\u8fd9\u4e9b\u5b58\u50a8\u5668\u7684\u8d77\u59cb\u5904\u90fd\u627e\u4e0d\u5230idbloader.img\uff08miniloader\uff0cRockchip\u745e\u82af\u5fae\u683c\u5f0f\u7684\u9884\u52a0\u8f7d\u5668\uff09\uff0c\u5219\u521d\u59cb\u5316USB\u7aef\u53e3\uff0c\u7b49\u5f85\u4eceUSB\u7aef\u53e3\u4e0b\u8f7dddr.bin\u3001usbplug.bin\u3001miniloader\u7b49\u955c\u50cf\uff1b\u5047\u8bbe\u80fd\u5728SD/MMC\u4e2d\u80fd\u627e\u5230idbloader.img\uff0c\u5e76\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u521d\u59cb\u5316\u4e3b\u5b58DDR\uff0c\u5e76\u5c06SD/MMC\u4e2d\u7684boot\u542f\u52a8\u4ee3\u7801\u62f7\u8d1d\u5230DDR\uff0c\u52a0\u8f7dBootLoader\u5b8c\u6574\u4ee3\u7801\u5230DDR\u5185\u5b58\u4e2d\u5e76\u8fd0\u884c\u3002\u8be6\u7ec6\u89c1\u5982\u4e0b\u6d41\u7a0b\u56fe\u3002 \u2003\u2003\u5728\u672c\u8bfe\u7a0b\u7684\u5b9e\u9a8c\u4e2d\uff0c\u5c06\u4eceSD\u5361\u542f\u52a8\uff0c\u5373\u56fa\u4ef6\u7684\u542f\u52a8\u987a\u5e8f\u5982\u4e0b\uff1a \u7b2c2\u9636\u6bb5\uff1a\u9884\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\uff08IDBLoader\uff09 \u2003\u2003idbloader.img\u662fRockchip\u683c\u5f0f\u7684\u9884\u52a0\u8f7d\u5668\uff0c\u662f\u7531Rockchip\u53d1\u5e03\u7684\uff08\u6682\u65e0\u5f00\u6e90\u4ee3\u7801\uff09\uff0c\u5047\u8bbe\u5b83\u53ef\u4ee5\u5728SoC\u542f\u52a8\u65f6\u5de5\u4f5c\uff0c\u5b83\u5305\u542b\uff1a Rockchip BootRom\u5df2\u77e5\u7684IDBlock\u6807\u5934\uff1b \u7531BootRom\u52a0\u8f7d\u5e76\u5728\u5185\u90e8SRAM\u4e0a\u8fd0\u884c\u7684DRAM\u521d\u59cb\u5316\u7a0b\u5e8f\uff1b \u4e0b\u4e00\u9636\u6bb5\u7684\u52a0\u8f7d\u7a0b\u5e8fU-boot\uff0c\u7531BootRom\u52a0\u8f7d\u5e76\u5728DDR SDRAM\u4e0a\u8fd0\u884c\u3002 \u7b2c3\u9636\u6bb5\uff1aU-boot \u2003\u2003\u73b0\u5728\uff0c\u5c06\u8fd0\u884c\u4e00\u4e2a\u5b8c\u6574\u7684\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\uff1aU-Boot\uff08Universal Boot Loader\uff09\u3002 \u2003\u2003U-Boot\u542f\u52a8\u5927\u591a\u90fd\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a (1) U-Boot\u542f\u52a8\u7684\u7b2c1\u9636\u6bb5 \u2003\u2003\u7b2c1\u9636\u6bb5\u7684\u4e3b\u8981\u4efb\u52a1\u662f\u5bf9\u4f9d\u8d56\u4e8eCPU\u4f53\u7cfb\u7ed3\u6784\u7684\u76f8\u5173\u786c\u4ef6\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u8be5\u9636\u6bb5\u901a\u5e38\u4f7f\u7528\u6c47\u7f16\u8bed\u8a00\u5b9e\u73b0\u3002 \u2003\u2003\u7b2c1\u9636\u6bb5\u7684\u5177\u4f53\u4efb\u52a1\u5305\u542b\u4ee5\u4e0b5\u90e8\u5206\uff1a \u2003\u20031) \u57fa\u672c\u7684\u786c\u4ef6\u8bbe\u5907\u521d\u59cb\u5316\uff08\u5c4f\u853d\u6240\u6709\u7684\u4e2d\u65ad\u3001\u5173\u95edCPU\u5185\u90e8\u7684ICache/DCache\u7b49\uff09; \u2003\u20032) \u4e3a\u7b2c2\u9636\u6bb5\u51c6\u5907RAM\u7a7a\u95f4; \u2003\u20033) \u5982\u679c\u662f\u4ece\u67d0\u4e2a\u56fa\u6001\u5b58\u50a8\u5a92\u8d28\u4e2d\u542f\u52a8\uff0c\u5219\u590d\u5236Bootloader\u7684\u7b2c2\u9636\u6bb5\u4ee3\u7801\u5230RAM; \u2003\u20034) \u8bbe\u7f6e\u5806\u6808; \u2003\u20035) \u8df3\u8f6c\u5230\u7b2c2\u9636\u6bb5\u7684C\u7a0b\u5e8f\u5165\u53e3\u3002 \u2003\u2003\u8fd9\u91cc\u4e3b\u8981\u6d89\u53ca2\u4e2a\u6c47\u7f16\u6587\u4ef6\u6765\u5b8c\u6210\u6700\u5e95\u5c42\u7684\u521d\u59cb\u5316\uff1astart.S\u548ccrt0_64.S\u3002 1. start.S \u8def\u5f84\uff1aarch/arm/cpu/armv8/start.S \u2003\u2003\u600e\u4e48\u5f97\u5230\u8fd9\u4e2a\u8def\u5f84arch/arm/cpu/armv8\uff1f \u200b \u2003\u2003\u9996\u5148\u8fdb\u5230u-boot\u6839\u76ee\u5f55\u627e\u5230config.mk\uff0c\u8be5\u6587\u4ef6\u4e2d\u6709\u5982\u4e0b\u58f0\u660e\uff1a \u2003\u2003CONFIG_SYS_ARCH \u548c CONFIG_SYS_CPU\u8fd9\u4e9b\u5b8f\u5728\u54ea\u91cc\u5b9a\u4e49\u7684\u5462\uff1f\u4e5f\u5728u-boot\u7684\u6839\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a\u53eb.config\u7684\u6587\u4ef6\uff0c\u91cc\u9762\u5b9a\u4e49\u4e86\u5f88\u591a\u5b8f\uff1a \u2003\u2003\u6211\u4eec\u5728\u7f16\u8bd1U-Boot\u7684\u65f6\u5019\uff0c\u9700\u8981\u8f93\u5165make gw3399_defconfig\u7528\u4e8e\u5199\u5165gw3399\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u5728configs/gw3399_defconfig\uff0cmake gw3399_defconfig\u5219\u5c06gw3399_defconfig\u7684\u914d\u7f6e\u5bfc\u5165.config\u6587\u4ef6\u4e2d\u3002 2. crt0_64.S \u8def\u5f84\uff1aarch/arm/lib/crt0_64.S crt0\u662fC Runtime Startup\u7684\u7b80\u79f0\uff0c\u8fd9\u90e8\u5206\u7a0b\u5e8f\u4e3b\u8981\u5b8c\u6210C\u8bed\u8a00\u73af\u5883\u7684\u521d\u59cb\u5316\uff0c\u6700\u7ec8\u4f1a\u8fd0\u884c_main\u51fd\u6570\u3002 (2) U-Boot\u542f\u52a8\u7684\u7b2c2\u9636\u6bb5 \u2003\u2003\u7b2c2\u9636\u6bb5\u901a\u5e38\u4f7f\u7528C\u8bed\u8a00\u5b9e\u73b0\uff0c\u4ee5\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u529f\u80fd\uff0c\u4e5f\u4f7f\u7a0b\u5e8f\u6709\u66f4\u597d\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u79fb\u690d\u6027\u3002 \u7b2c2\u9636\u6bb5\u7684\u5177\u4f53\u4efb\u52a1\u6709\uff1a \u2003\u20031) \u521d\u59cb\u5316\u672c\u9636\u6bb5\u8981\u4f7f\u7528\u5230\u7684\u786c\u4ef6\u8bbe\u5907; \u2003\u20032) \u68c0\u6d4b\u7cfb\u7edf\u5185\u5b58\u6620\u5c04; \u2003\u20033) \u5c06\u5185\u6838\u6620\u50cf\u548c\u6839\u6587\u4ef6\u7cfb\u7edf\u6620\u50cf\u4eceFlash\u8bfb\u5230RAM; \u2003\u20034) \u4e3a\u5185\u6838\u8bbe\u7f6e\u542f\u52a8\u53c2\u6570; \u2003\u20035) \u8c03\u7528\u5185\u6838\u3002 \u2003\u2003\u8fd9\u4e00\u90e8\u5206\u7684\u521d\u59cb\u5316\u4e3b\u8981\u7531\u4ee5\u4e0b\u4e24\u4e2aC\u6587\u4ef6\u5b9e\u73b0\uff1a common/board_f.c common/board_r.c \u56fa\u4ef6\u542f\u52a8\u987a\u5e8f \u2003\u2003BootRom -> Loader -> U-Boot -> Trust -> Kernel -> rootfs","title":"RK3399 BootLoader\u7684\u542f\u52a8\u8fc7\u7a0b"},{"location":"BootLoader/theory/#rk3399-bootloader","text":"RK3399\u542f\u52a8\u6d41\u7a0b\u53ef\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u9636\u6bb5\uff1a \u6ce8\u610f \u5bf9\u4e8e\u4e0d\u540c\u7684\u7247\u4e0a\u7cfb\u7edfSOC\u800c\u8a00\uff0cBootLoader\u7ec6\u8282\u5404\u4e0d\u76f8\u540c\uff0c\u4f46\u603b\u4f53\u4e0a\u8fd8\u662f\u9075\u5faa\u4e0a\u8ff0\u51e0\u4e2a\u9636\u6bb5\u3002 \u8be6\u60c5\u8bf7\u67e5\u770b\u745e\u82af\u5fae\u7684Boot flow\u8bf4\u660e\uff1a http://opensource.rock-chips.com/wiki_Boot_option \u2003\u2003\u7cfb\u7edf\u542f\u52a8\u65f6\uff0c\u9996\u5148\u6267\u884cBootRom\u4e2d\u7684\u4ee3\u7801\uff0c\u5373ROM\u4ee3\u7801\u3002\u7136\u540e\uff0cROM\u4ee3\u7801\u5c06\u52a0\u8f7d\u7b2c2\u9636\u6bb5\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u5373SPL\u3002\u65e0\u8bba\u662fROM\u4ee3\u7801\u8fd8\u662fSPL\uff0c\u90fd\u9700\u8981\u5728\u5185\u5b58\u4e2d\u6267\u884c\uff0c\u5373ROM\u4ee3\u7801\u548cSPL\u90fd\u9700\u8981\u5148\u8f7d\u5165SoC\u7684\u5185\u90e8SRAM\u4e2d\uff0c\u624d\u80fd\u7531CPU\u6267\u884c\u3002 \u2003\u2003\u4e00\u822c\u6765\u8bf4\uff0cSoC\u4e2d\u7684\u5185\u90e8SRAM\u5e76\u4e0d\u8db3\u4ee5\u8f7d\u5165\u5b8c\u6574\u7684\u6574\u4e2a\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\u3002\u56e0\u6b64\uff0cRK3399\u5728\u6bcf\u6b21\u590d\u4f4d\u6216\u542f\u52a8\u65f6\uff0c\u90fd\u9884\u5148\u52a0\u8f7d\u8f85\u52a9\u7a0b\u5e8f\u52a0\u8f7d\u5668\uff08\u542bROM\u4ee3\u7801\u3001SPL\uff09\uff0c\u5e76\u7531SPL\u521d\u59cb\u5316\u5bb9\u91cf\u66f4\u5927\u7684DDR\uff0c\u4ee5\u4fbf\u5728DDR\u4e2d\u6267\u884c\u540e\u7eed\u7684\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u63d0\u9ad8\u5f15\u5bfc\u6548\u7387\u3002","title":"RK3399 Bootloader\u7684\u542f\u52a8\u8fc7\u7a0b"},{"location":"BootLoader/theory/#1","text":"ROM\u4ee3\u7801\u5728\u82af\u7247\u5236\u9020\u65f6\u5c31\u4f1a\u88ab\u5199\u5165\u82af\u7247\u4e2d\uff0c\u56e0\u4e3aROM\u4ee3\u7801\u662f\u82af\u7247\u4e13\u6709\u7684\u4e14\u4e0d\u80fd\u88ab\u4efb\u4f55\u5f00\u6e90\u8bbe\u5907\u66ff\u4ee3\u3002SRAM\u4e5f\u662f\u7247\u4e0a\u7cfb\u7edf\u5185\u7f6e\u7684RAM\uff0cSRAM\u7684\u5927\u5c0f\u4ece4KB\u5230\u51e0\u767eKB\u4e0d\u7b49\u3002RK3399\u82af\u7247\u5185\u7f6e\u670932KB ROM\u548c192KB SRAM\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u2003\u2003BootRom\u4ee3\u7801\u5728SRAM\u4e0a\u8fd0\u884c\uff0c\u6821\u9a8c\u5b58\u50a8\u8bbe\u5907\u91cc\u7684BootLoader\u3002\u5bf9\u4e8eRK3399\u82af\u7247\uff0c\u5728SPL\u4e2d\u4f1a\u4f9d\u6b21\u67e5\u627e\u5b58\u50a8\u63a7\u5236\u5668\uff1aSPI nor Flash\u3001SPI nand Flash\u3001eMMC\u3001SD/MMC\uff0c\u5982\u679c\u5728\u8fd9\u4e9b\u5b58\u50a8\u5668\u7684\u8d77\u59cb\u5904\u90fd\u627e\u4e0d\u5230idbloader.img\uff08miniloader\uff0cRockchip\u745e\u82af\u5fae\u683c\u5f0f\u7684\u9884\u52a0\u8f7d\u5668\uff09\uff0c\u5219\u521d\u59cb\u5316USB\u7aef\u53e3\uff0c\u7b49\u5f85\u4eceUSB\u7aef\u53e3\u4e0b\u8f7dddr.bin\u3001usbplug.bin\u3001miniloader\u7b49\u955c\u50cf\uff1b\u5047\u8bbe\u80fd\u5728SD/MMC\u4e2d\u80fd\u627e\u5230idbloader.img\uff0c\u5e76\u6821\u9a8c\u901a\u8fc7\uff0c\u5219\u521d\u59cb\u5316\u4e3b\u5b58DDR\uff0c\u5e76\u5c06SD/MMC\u4e2d\u7684boot\u542f\u52a8\u4ee3\u7801\u62f7\u8d1d\u5230DDR\uff0c\u52a0\u8f7dBootLoader\u5b8c\u6574\u4ee3\u7801\u5230DDR\u5185\u5b58\u4e2d\u5e76\u8fd0\u884c\u3002\u8be6\u7ec6\u89c1\u5982\u4e0b\u6d41\u7a0b\u56fe\u3002 \u2003\u2003\u5728\u672c\u8bfe\u7a0b\u7684\u5b9e\u9a8c\u4e2d\uff0c\u5c06\u4eceSD\u5361\u542f\u52a8\uff0c\u5373\u56fa\u4ef6\u7684\u542f\u52a8\u987a\u5e8f\u5982\u4e0b\uff1a","title":"\u7b2c1\u9636\u6bb5\uff1a\u53ea\u8bfb\u5b58\u50a8\u5668\u4ee3\u7801"},{"location":"BootLoader/theory/#2idbloader","text":"idbloader.img\u662fRockchip\u683c\u5f0f\u7684\u9884\u52a0\u8f7d\u5668\uff0c\u662f\u7531Rockchip\u53d1\u5e03\u7684\uff08\u6682\u65e0\u5f00\u6e90\u4ee3\u7801\uff09\uff0c\u5047\u8bbe\u5b83\u53ef\u4ee5\u5728SoC\u542f\u52a8\u65f6\u5de5\u4f5c\uff0c\u5b83\u5305\u542b\uff1a Rockchip BootRom\u5df2\u77e5\u7684IDBlock\u6807\u5934\uff1b \u7531BootRom\u52a0\u8f7d\u5e76\u5728\u5185\u90e8SRAM\u4e0a\u8fd0\u884c\u7684DRAM\u521d\u59cb\u5316\u7a0b\u5e8f\uff1b \u4e0b\u4e00\u9636\u6bb5\u7684\u52a0\u8f7d\u7a0b\u5e8fU-boot\uff0c\u7531BootRom\u52a0\u8f7d\u5e76\u5728DDR SDRAM\u4e0a\u8fd0\u884c\u3002","title":"\u7b2c2\u9636\u6bb5\uff1a\u9884\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\uff08IDBLoader\uff09"},{"location":"BootLoader/theory/#3u-boot","text":"\u73b0\u5728\uff0c\u5c06\u8fd0\u884c\u4e00\u4e2a\u5b8c\u6574\u7684\u5f15\u5bfc\u52a0\u8f7d\u7a0b\u5e8f\uff1aU-Boot\uff08Universal Boot Loader\uff09\u3002 \u2003\u2003U-Boot\u542f\u52a8\u5927\u591a\u90fd\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a","title":"\u7b2c3\u9636\u6bb5\uff1aU-boot"},{"location":"BootLoader/theory/#1-u-boot1","text":"\u7b2c1\u9636\u6bb5\u7684\u4e3b\u8981\u4efb\u52a1\u662f\u5bf9\u4f9d\u8d56\u4e8eCPU\u4f53\u7cfb\u7ed3\u6784\u7684\u76f8\u5173\u786c\u4ef6\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u8be5\u9636\u6bb5\u901a\u5e38\u4f7f\u7528\u6c47\u7f16\u8bed\u8a00\u5b9e\u73b0\u3002 \u2003\u2003\u7b2c1\u9636\u6bb5\u7684\u5177\u4f53\u4efb\u52a1\u5305\u542b\u4ee5\u4e0b5\u90e8\u5206\uff1a \u2003\u20031) \u57fa\u672c\u7684\u786c\u4ef6\u8bbe\u5907\u521d\u59cb\u5316\uff08\u5c4f\u853d\u6240\u6709\u7684\u4e2d\u65ad\u3001\u5173\u95edCPU\u5185\u90e8\u7684ICache/DCache\u7b49\uff09; \u2003\u20032) \u4e3a\u7b2c2\u9636\u6bb5\u51c6\u5907RAM\u7a7a\u95f4; \u2003\u20033) \u5982\u679c\u662f\u4ece\u67d0\u4e2a\u56fa\u6001\u5b58\u50a8\u5a92\u8d28\u4e2d\u542f\u52a8\uff0c\u5219\u590d\u5236Bootloader\u7684\u7b2c2\u9636\u6bb5\u4ee3\u7801\u5230RAM; \u2003\u20034) \u8bbe\u7f6e\u5806\u6808; \u2003\u20035) \u8df3\u8f6c\u5230\u7b2c2\u9636\u6bb5\u7684C\u7a0b\u5e8f\u5165\u53e3\u3002 \u2003\u2003\u8fd9\u91cc\u4e3b\u8981\u6d89\u53ca2\u4e2a\u6c47\u7f16\u6587\u4ef6\u6765\u5b8c\u6210\u6700\u5e95\u5c42\u7684\u521d\u59cb\u5316\uff1astart.S\u548ccrt0_64.S\u3002 1. start.S \u8def\u5f84\uff1aarch/arm/cpu/armv8/start.S \u2003\u2003\u600e\u4e48\u5f97\u5230\u8fd9\u4e2a\u8def\u5f84arch/arm/cpu/armv8\uff1f \u200b \u2003\u2003\u9996\u5148\u8fdb\u5230u-boot\u6839\u76ee\u5f55\u627e\u5230config.mk\uff0c\u8be5\u6587\u4ef6\u4e2d\u6709\u5982\u4e0b\u58f0\u660e\uff1a \u2003\u2003CONFIG_SYS_ARCH \u548c CONFIG_SYS_CPU\u8fd9\u4e9b\u5b8f\u5728\u54ea\u91cc\u5b9a\u4e49\u7684\u5462\uff1f\u4e5f\u5728u-boot\u7684\u6839\u76ee\u5f55\u4e0b\u6709\u4e00\u4e2a\u53eb.config\u7684\u6587\u4ef6\uff0c\u91cc\u9762\u5b9a\u4e49\u4e86\u5f88\u591a\u5b8f\uff1a \u2003\u2003\u6211\u4eec\u5728\u7f16\u8bd1U-Boot\u7684\u65f6\u5019\uff0c\u9700\u8981\u8f93\u5165make gw3399_defconfig\u7528\u4e8e\u5199\u5165gw3399\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u5728configs/gw3399_defconfig\uff0cmake gw3399_defconfig\u5219\u5c06gw3399_defconfig\u7684\u914d\u7f6e\u5bfc\u5165.config\u6587\u4ef6\u4e2d\u3002 2. crt0_64.S \u8def\u5f84\uff1aarch/arm/lib/crt0_64.S crt0\u662fC Runtime Startup\u7684\u7b80\u79f0\uff0c\u8fd9\u90e8\u5206\u7a0b\u5e8f\u4e3b\u8981\u5b8c\u6210C\u8bed\u8a00\u73af\u5883\u7684\u521d\u59cb\u5316\uff0c\u6700\u7ec8\u4f1a\u8fd0\u884c_main\u51fd\u6570\u3002","title":"(1) U-Boot\u542f\u52a8\u7684\u7b2c1\u9636\u6bb5"},{"location":"BootLoader/theory/#2-u-boot2","text":"\u7b2c2\u9636\u6bb5\u901a\u5e38\u4f7f\u7528C\u8bed\u8a00\u5b9e\u73b0\uff0c\u4ee5\u5b9e\u73b0\u66f4\u590d\u6742\u7684\u529f\u80fd\uff0c\u4e5f\u4f7f\u7a0b\u5e8f\u6709\u66f4\u597d\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u79fb\u690d\u6027\u3002 \u7b2c2\u9636\u6bb5\u7684\u5177\u4f53\u4efb\u52a1\u6709\uff1a \u2003\u20031) \u521d\u59cb\u5316\u672c\u9636\u6bb5\u8981\u4f7f\u7528\u5230\u7684\u786c\u4ef6\u8bbe\u5907; \u2003\u20032) \u68c0\u6d4b\u7cfb\u7edf\u5185\u5b58\u6620\u5c04; \u2003\u20033) \u5c06\u5185\u6838\u6620\u50cf\u548c\u6839\u6587\u4ef6\u7cfb\u7edf\u6620\u50cf\u4eceFlash\u8bfb\u5230RAM; \u2003\u20034) \u4e3a\u5185\u6838\u8bbe\u7f6e\u542f\u52a8\u53c2\u6570; \u2003\u20035) \u8c03\u7528\u5185\u6838\u3002 \u2003\u2003\u8fd9\u4e00\u90e8\u5206\u7684\u521d\u59cb\u5316\u4e3b\u8981\u7531\u4ee5\u4e0b\u4e24\u4e2aC\u6587\u4ef6\u5b9e\u73b0\uff1a common/board_f.c common/board_r.c","title":"(2) U-Boot\u542f\u52a8\u7684\u7b2c2\u9636\u6bb5"},{"location":"BootLoader/theory/#_1","text":"BootRom -> Loader -> U-Boot -> Trust -> Kernel -> rootfs","title":"\u56fa\u4ef6\u542f\u52a8\u987a\u5e8f"},{"location":"GW3399/part1/","text":"\u5d4c\u5165\u5f0f\u5e73\u53f0\u7b80\u4ecb \u5d4c\u5165\u5f0f\u5b9e\u9a8c\u6559\u5b66\u5e73\u53f0\u4e3b\u8981\u7531\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u3001ARM\u6269\u5c55\u677f\u548c\u57fa\u7840\u914d\u4ef6\u5305\u7ec4\u6210\u3002\u5d4c\u5165\u5f0f\u7f51\u5173\u91c7\u7528\u745e\u82af\u5fae\u516c\u53f8\u63a8\u51fa\u7684\u4e00\u6b3e\u4f4e\u529f\u8017\u3001\u9ad8\u6027\u80fd\u7684\u5d4c\u5165\u5f0f\u8ba1\u7b97\u5904\u7406\u5668RK3399\uff0c\u8be5\u82af\u7247\u662f\u4e00\u989764\u4f4d\u516d\u6838\u5904\u7406\u5668\uff0c\u53cc\u6838Cortex-A72\u548c\u56db\u6838Cortex-A53\u5c0f\u6838\u5fc3\uff0c\u6700\u9ad8\u4e3b\u9891\u53ef\u8fbe2.0GHz\u3002\u6b64\u5916\uff0c\u5728\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u4e2d\u8fd8\u96c6\u6210\u4e86Linux\u3001Python\u3001\u673a\u5668\u5b66\u4e60\u3001\u6df1\u5ea6\u5b66\u4e60\u7b49\u8fd0\u884c\u73af\u5883\uff0c\u6ee1\u8db3\u4eba\u5de5\u667a\u80fd\u89c6\u89c9\u3001\u8bed\u8a00\u3001\u673a\u5668\u63a7\u5236\u7b49\u7b97\u6cd5\u3001\u786c\u4ef6\u3001\u5e94\u7528\u7684\u5f00\u53d1\u548c\u5b66\u4e60\u3002ARM\u6269\u5c55\u677f\u91c7\u7528ARM Cortex-M7\u4f4e\u529f\u8017\u5904\u7406\u5668\uff0c\u63d0\u4f9b8*8\u70b9\u9635\u3001OLED\u3001\u6309\u952e\u3001\u4e5d\u8f74\u4f20\u611f\u5668\u7b49\u6269\u5c55\u6a21\u5757\u3002\u57fa\u7840\u914d\u4ef6\u5305\u63d0\u4f9b\u6709\u6444\u50cf\u5934\u3001\u5929\u7ebf\u3001\u7535\u6e90\u3001\u8fde\u63a5\u7ebf\u7b49\u3002 1. \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399 \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u7279\u6027\uff1a RK3399\u5904\u7406\u5668\uff0cARM 64\u4f4d\u5927\u5c0f\u6838\u67b6\u6784\uff0cCortex-A72\u548cCotex-A53\u591a\u6838\u5904\u7406\u5668\uff0c\u56db\u6838Mali-T860 GPU\uff0c4GB LPDDR4\uff0c16GB EMMC\u3002 10.1\u5bf81280*800 LVDS\u9ad8\u6e05\u5c4f\uff0c10\u70b9\u89e6\u63a7\u7535\u5bb9\u5c4f\uff0c\u5de5\u4e1a\u7ea7\u94dd\u5408\u91d1\u4e00\u4f53\u5c4f\u5916\u58f3\u3002 2.4G & 5G\u53cc\u9891Wi-Fi\u6a21\u7ec4\uff0cBLE4.1\u6a21\u7ec4\uff0c\u5168\u7f51\u901aLTE\u901a\u4fe1\u6a21\u7ec4\uff0cGPS & BDS\u53cc\u9891\u5b9a\u4f4d\u6a21\u7ec4\uff0cZigBee & LoRa\u4f20\u611f\u7f51AP\u6a21\u7ec4\u3002 1000M LAN\uff0cHDMI\u3001Type-C OTG\uff0cUSB 3.0 Host\uff0cUSB 2.0 Host*2\uff0cUSB Debug UART\uff0cRS232\uff0cRS485\uff0cTF Card\uff0cMIC\uff0c\u5587\u53ed\uff0c24PIN\u5d4c\u5165\u5f0f\u62d3\u5c55\u63a5\u53e3\u3002 \u5d4c\u5165\u5f0f\u7f51\u5173\u7684\u6b63\u9762\u548c\u53cd\u9762\uff1a \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u63d0\u4f9b\u4e30\u5bcc\u7684\u5916\u8bbe\u63a5\u53e3\uff0c\u6613\u4e8e\u529f\u80fd\u6269\u5c55\uff0c\u65b9\u4fbf\u5f00\u53d1\u8c03\u8bd5\u3002\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173\u7684\u4e0a\u4e0b\u90e8\u63a5\u53e3\u793a\u610f\u89c1\u4e0b\u56fe\uff1a \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u5185\u90e8\u6846\u67b6\uff1a \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u89c4\u683c\u53c2\u6570\uff1a 2. ARM\u6269\u5c55\u677f ARM\u6269\u5c55\u677f\u91c7\u7528STM32F407\u5904\u7406\u5668\uff0c\u96c6\u6210\u670924PIN\u5d4c\u5165\u5f0f\u63a5\u53e3\u677f\uff0c\u96c6\u6210GPIO/PWM\u53cc\u9a71\u52a8LED4\uff0c\u6309\u952e2\uff0cIIC\u63a5\u53e3\u9640\u87ba\u4eea & \u52a0\u901f\u5ea6 & \u5730\u78c1\u4eea\uff0cI2C\u63a5\u53e3OLED\uff0cADC\u63a5\u53e3TVOC\uff0c8*8\u77e9\u9635LED\uff0c\u6b65\u8fdb\u7535\u673a\u7b49\u5916\u8bbe\u6a21\u5757\u3002 STM32F407 MCU \u63d0\u4f9b\u4e86\u5de5\u4f5c\u9891\u7387\u4e3a 168 MHz \u7684 Cortex\u2122-M4 \u5185\u6838\uff08\u5177\u6709\u6d6e\u70b9\u5355\u5143\uff09\u7684\u6027\u80fd\u3002\u5728 168 MHz \u9891\u7387\u4e0b\uff0c\u4ece Flash \u5b58\u50a8\u5668\u6267\u884c\u65f6\uff0cSTM32F407 \u5355\u7247\u673a\u80fd\u591f\u63d0\u4f9b 210 DMIPS/566 CoreMark \u6027\u80fd\uff0c\u5e76\u4e14\u5229\u7528\u610f\u6cd5\u534a\u5bfc\u4f53\u7684 ART \u52a0\u901f\u5668\u5b9e\u73b0\u4e86 FLASH \u96f6\u7b49\u5f85\u72b6\u6001\u3002 ARM\u6269\u5c55\u677f\u786c\u4ef6\u6846\u56fe\u5982\u4e0b\uff1a 3. \u57fa\u7840\u914d\u4ef6 \u57fa\u7840\u914d\u4ef6\u63d0\u4f9b\u6709\u6444\u50cf\u5934\u3001\u5929\u7ebf\u3001\u7535\u6e90\u3001\u8fde\u63a5\u7ebf\u7b49\u3002\u6444\u50cf\u5934\u7279\u6027\u5982\u4e0b\uff1a 1080P \u5de5\u4e1a\u7ea7 AI \u5bbd\u52a8\u6001\u6444\u50cf\u5934\uff0c125 \u5ea6\u5e7f\u89d2\u955c\u5934\u7126\u8ddd\uff0c\u652f\u6301\u81ea\u52a8\u805a\u7126\u3002 \u63d0\u4f9b\u8fdc\u7a0b\u7f51\u7edc\u89c6\u9891\u8fdc\u7a0b\u4f20\u8f93\u529f\u80fd\uff0cAI \u89c6\u89c9\u56fe\u50cf\u89c6\u9891\u6355\u6349\u5904\u7406\u529f\u80fd\u3002 \u6444\u50cf\u5934: \u786c\u4ef6\u8fde\u63a5\u64cd\u4f5c 1. TF\u5361\u7684\u63d2\u53d6 \u8bf4\u660e TF\u5361\u6b63\u786e\u63d2\u5165\u662f\u80fd\u611f\u53d7\u5230\u4e00\u5b9a\u5f39\u6027\u7684\uff0c\u5426\u5219\u5f88\u53ef\u80fd\u63d2\u53cd\uff01 2. ARM\u6269\u5c55\u677f\u7684\u8fde\u63a5 \u5c06ARM\u6269\u5c55\u6a21\u5757\u4e0e\u5d4c\u5165\u5f0f\u7f51\u5173\u8fde\u63a5\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6846\u7ebf\u5185\u4e3aGW3399\u7684ARM\u6269\u5c55\u6a21\u5757\u63a5\u53e3\u3002 \u8fde\u63a5\u5b8c\u6210\u7684\u793a\u610f\u56fe\u5982\u4e0b\uff1a","title":"GW3399\u7b80\u4ecb"},{"location":"GW3399/part1/#_1","text":"\u5d4c\u5165\u5f0f\u5b9e\u9a8c\u6559\u5b66\u5e73\u53f0\u4e3b\u8981\u7531\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u3001ARM\u6269\u5c55\u677f\u548c\u57fa\u7840\u914d\u4ef6\u5305\u7ec4\u6210\u3002\u5d4c\u5165\u5f0f\u7f51\u5173\u91c7\u7528\u745e\u82af\u5fae\u516c\u53f8\u63a8\u51fa\u7684\u4e00\u6b3e\u4f4e\u529f\u8017\u3001\u9ad8\u6027\u80fd\u7684\u5d4c\u5165\u5f0f\u8ba1\u7b97\u5904\u7406\u5668RK3399\uff0c\u8be5\u82af\u7247\u662f\u4e00\u989764\u4f4d\u516d\u6838\u5904\u7406\u5668\uff0c\u53cc\u6838Cortex-A72\u548c\u56db\u6838Cortex-A53\u5c0f\u6838\u5fc3\uff0c\u6700\u9ad8\u4e3b\u9891\u53ef\u8fbe2.0GHz\u3002\u6b64\u5916\uff0c\u5728\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u4e2d\u8fd8\u96c6\u6210\u4e86Linux\u3001Python\u3001\u673a\u5668\u5b66\u4e60\u3001\u6df1\u5ea6\u5b66\u4e60\u7b49\u8fd0\u884c\u73af\u5883\uff0c\u6ee1\u8db3\u4eba\u5de5\u667a\u80fd\u89c6\u89c9\u3001\u8bed\u8a00\u3001\u673a\u5668\u63a7\u5236\u7b49\u7b97\u6cd5\u3001\u786c\u4ef6\u3001\u5e94\u7528\u7684\u5f00\u53d1\u548c\u5b66\u4e60\u3002ARM\u6269\u5c55\u677f\u91c7\u7528ARM Cortex-M7\u4f4e\u529f\u8017\u5904\u7406\u5668\uff0c\u63d0\u4f9b8*8\u70b9\u9635\u3001OLED\u3001\u6309\u952e\u3001\u4e5d\u8f74\u4f20\u611f\u5668\u7b49\u6269\u5c55\u6a21\u5757\u3002\u57fa\u7840\u914d\u4ef6\u5305\u63d0\u4f9b\u6709\u6444\u50cf\u5934\u3001\u5929\u7ebf\u3001\u7535\u6e90\u3001\u8fde\u63a5\u7ebf\u7b49\u3002","title":"\u5d4c\u5165\u5f0f\u5e73\u53f0\u7b80\u4ecb"},{"location":"GW3399/part1/#1-gw3399","text":"\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u7279\u6027\uff1a RK3399\u5904\u7406\u5668\uff0cARM 64\u4f4d\u5927\u5c0f\u6838\u67b6\u6784\uff0cCortex-A72\u548cCotex-A53\u591a\u6838\u5904\u7406\u5668\uff0c\u56db\u6838Mali-T860 GPU\uff0c4GB LPDDR4\uff0c16GB EMMC\u3002 10.1\u5bf81280*800 LVDS\u9ad8\u6e05\u5c4f\uff0c10\u70b9\u89e6\u63a7\u7535\u5bb9\u5c4f\uff0c\u5de5\u4e1a\u7ea7\u94dd\u5408\u91d1\u4e00\u4f53\u5c4f\u5916\u58f3\u3002 2.4G & 5G\u53cc\u9891Wi-Fi\u6a21\u7ec4\uff0cBLE4.1\u6a21\u7ec4\uff0c\u5168\u7f51\u901aLTE\u901a\u4fe1\u6a21\u7ec4\uff0cGPS & BDS\u53cc\u9891\u5b9a\u4f4d\u6a21\u7ec4\uff0cZigBee & LoRa\u4f20\u611f\u7f51AP\u6a21\u7ec4\u3002 1000M LAN\uff0cHDMI\u3001Type-C OTG\uff0cUSB 3.0 Host\uff0cUSB 2.0 Host*2\uff0cUSB Debug UART\uff0cRS232\uff0cRS485\uff0cTF Card\uff0cMIC\uff0c\u5587\u53ed\uff0c24PIN\u5d4c\u5165\u5f0f\u62d3\u5c55\u63a5\u53e3\u3002 \u5d4c\u5165\u5f0f\u7f51\u5173\u7684\u6b63\u9762\u548c\u53cd\u9762\uff1a \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u63d0\u4f9b\u4e30\u5bcc\u7684\u5916\u8bbe\u63a5\u53e3\uff0c\u6613\u4e8e\u529f\u80fd\u6269\u5c55\uff0c\u65b9\u4fbf\u5f00\u53d1\u8c03\u8bd5\u3002\u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173\u7684\u4e0a\u4e0b\u90e8\u63a5\u53e3\u793a\u610f\u89c1\u4e0b\u56fe\uff1a \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u5185\u90e8\u6846\u67b6\uff1a \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399\u89c4\u683c\u53c2\u6570\uff1a","title":"1.  \u5d4c\u5165\u5f0f\u8ba1\u7b97\u7f51\u5173GW3399"},{"location":"GW3399/part1/#2-arm","text":"ARM\u6269\u5c55\u677f\u91c7\u7528STM32F407\u5904\u7406\u5668\uff0c\u96c6\u6210\u670924PIN\u5d4c\u5165\u5f0f\u63a5\u53e3\u677f\uff0c\u96c6\u6210GPIO/PWM\u53cc\u9a71\u52a8LED4\uff0c\u6309\u952e2\uff0cIIC\u63a5\u53e3\u9640\u87ba\u4eea & \u52a0\u901f\u5ea6 & \u5730\u78c1\u4eea\uff0cI2C\u63a5\u53e3OLED\uff0cADC\u63a5\u53e3TVOC\uff0c8*8\u77e9\u9635LED\uff0c\u6b65\u8fdb\u7535\u673a\u7b49\u5916\u8bbe\u6a21\u5757\u3002 STM32F407 MCU \u63d0\u4f9b\u4e86\u5de5\u4f5c\u9891\u7387\u4e3a 168 MHz \u7684 Cortex\u2122-M4 \u5185\u6838\uff08\u5177\u6709\u6d6e\u70b9\u5355\u5143\uff09\u7684\u6027\u80fd\u3002\u5728 168 MHz \u9891\u7387\u4e0b\uff0c\u4ece Flash \u5b58\u50a8\u5668\u6267\u884c\u65f6\uff0cSTM32F407 \u5355\u7247\u673a\u80fd\u591f\u63d0\u4f9b 210 DMIPS/566 CoreMark \u6027\u80fd\uff0c\u5e76\u4e14\u5229\u7528\u610f\u6cd5\u534a\u5bfc\u4f53\u7684 ART \u52a0\u901f\u5668\u5b9e\u73b0\u4e86 FLASH \u96f6\u7b49\u5f85\u72b6\u6001\u3002 ARM\u6269\u5c55\u677f\u786c\u4ef6\u6846\u56fe\u5982\u4e0b\uff1a","title":"2.  ARM\u6269\u5c55\u677f"},{"location":"GW3399/part1/#3","text":"\u57fa\u7840\u914d\u4ef6\u63d0\u4f9b\u6709\u6444\u50cf\u5934\u3001\u5929\u7ebf\u3001\u7535\u6e90\u3001\u8fde\u63a5\u7ebf\u7b49\u3002\u6444\u50cf\u5934\u7279\u6027\u5982\u4e0b\uff1a 1080P \u5de5\u4e1a\u7ea7 AI \u5bbd\u52a8\u6001\u6444\u50cf\u5934\uff0c125 \u5ea6\u5e7f\u89d2\u955c\u5934\u7126\u8ddd\uff0c\u652f\u6301\u81ea\u52a8\u805a\u7126\u3002 \u63d0\u4f9b\u8fdc\u7a0b\u7f51\u7edc\u89c6\u9891\u8fdc\u7a0b\u4f20\u8f93\u529f\u80fd\uff0cAI \u89c6\u89c9\u56fe\u50cf\u89c6\u9891\u6355\u6349\u5904\u7406\u529f\u80fd\u3002 \u6444\u50cf\u5934:","title":"3.  \u57fa\u7840\u914d\u4ef6"},{"location":"GW3399/part1/#_2","text":"","title":"\u786c\u4ef6\u8fde\u63a5\u64cd\u4f5c"},{"location":"GW3399/part1/#1-tf","text":"\u8bf4\u660e TF\u5361\u6b63\u786e\u63d2\u5165\u662f\u80fd\u611f\u53d7\u5230\u4e00\u5b9a\u5f39\u6027\u7684\uff0c\u5426\u5219\u5f88\u53ef\u80fd\u63d2\u53cd\uff01","title":"1.  TF\u5361\u7684\u63d2\u53d6"},{"location":"GW3399/part1/#2-arm_1","text":"\u5c06ARM\u6269\u5c55\u6a21\u5757\u4e0e\u5d4c\u5165\u5f0f\u7f51\u5173\u8fde\u63a5\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6846\u7ebf\u5185\u4e3aGW3399\u7684ARM\u6269\u5c55\u6a21\u5757\u63a5\u53e3\u3002 \u8fde\u63a5\u5b8c\u6210\u7684\u793a\u610f\u56fe\u5982\u4e0b\uff1a","title":"2.  ARM\u6269\u5c55\u677f\u7684\u8fde\u63a5"},{"location":"GW3399/part2/","text":"\u5d4c\u5165\u5f0f\u5e73\u53f0\u8fdc\u7a0b\u767b\u5f55 \u76ee\u524d\u7f51\u7edc\u4e0a\u51fa\u73b0\u6709\u5f88\u591a\u79cd\u8fdc\u7a0b\u767b\u5f55\u5de5\u5177\uff0c\u5728\u5d4c\u5165\u5f0f\u8ba1\u7b97\u5b9e\u9a8c\u4e2d\uff0c\u63a8\u8350\u540c\u5b66\u4eec\u4f7f\u7528MobaXterm\u3002 MobaXterm \u662f\u4e00\u6b3e\u8fdc\u7a0b\u63a7\u5236\u5de5\u5177\uff0c\u652f\u6301\u521b\u5efaSSH\u3001Telnet\u3001Rsh\u3001Xdmc\u3001RDP\u3001VNC\u3001FTP\u3001 SFTP\u3001\u4e32\u53e3(Serial COM)\u3001\u672c\u5730Shell\u3001Mosh\u3001Aws\u3001WSL(\u5fae\u8f6f\u5b50\u7cfb\u7edf)\u7b49\u8d85\u591a\u8fde\u63a5\u529f\u80fd\u3002MobaXterm \u63d0\u4f9b\u4e86\u4eba\u6027\u5316\u7684\u64cd\u4f5c\u754c\u9762\uff0c\u652f\u6301\u4e0e\u4e3b\u6d41\u7684\u64cd\u4f5c\u7cfb\u7edf\u8fde\u63a5\u8fdb\u884c\u63a7\u5236\u548c\u7ba1\u7406\u64cd\u4f5c\uff0c\u529f\u80fd\u5341\u5206\u5f3a\u5927\u3002 \u5728\u5b9e\u9a8c\u4e2d\uff0c\u5e38\u7528\u5230\u7684MobaXterm\u529f\u80fd\u6709SSH\uff0cSFTP\uff0cSerial\uff0cVNC\u7b49\u3002 1. SSH\u8fdc\u7a0b\u767b\u5f55 SSH\u4e3aSecure Shell\u7684\u7f29\u5199\uff0c\u7531IETF\u7684\u7f51\u7edc\u5c0f\u7ec4\uff08Network Working Group\uff09\u6240\u5236\u5b9a\uff1bSSH \u4e3a\u5efa\u7acb\u5728\u5e94\u7528\u5c42\u57fa\u7840\u4e0a\u7684\u5b89\u5168\u534f\u8bae\u3002SSH\u662f\u76ee\u524d\u8f83\u53ef\u9760\uff0c\u4e13\u4e3a\u8fdc\u7a0b\u767b\u5f55\u4f1a\u8bdd\u548c\u5176\u4ed6\u7f51\u7edc\u670d\u52a1\u63d0\u4f9b\u5b89\u5168\u6027\u7684\u534f\u8bae\u3002\u5229\u7528 SSH \u534f\u8bae\u53ef\u4ee5\u6709\u6548\u9632\u6b62\u8fdc\u7a0b\u7ba1\u7406\u8fc7\u7a0b\u4e2d\u7684\u4fe1\u606f\u6cc4\u9732\u95ee\u9898\u3002 \u8fdc\u7a0b\u767b\u5f55\u53ef\u4ee5\u901a\u8fc7\u65e0\u7ebf\u548c\u6709\u7ebf\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\uff08 \u5982\u679c\u4f7f\u7528\u65e0\u7ebf\u8fde\u63a5\uff0c\u9700\u8981\u63a5\u4e0aWifi\u5929\u7ebf \uff09\u3002\u8fdc\u7a0b\u767b\u5f55\u7684\u5173\u952e\u70b9\u6709\u4e24\u4e2a\uff0c\u7b2c\u4e00\u4e2a\u662fGW3399\u5f00\u53d1\u677f\u548cPC\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5\u4e14\u4e24\u8005\u80fdping\u901a\uff0c\u7b2c\u4e8c\u4e2a\u662fGW3399\u5f00\u53d1\u677f\u5fc5\u987b\u5f00\u542fSSH\u670d\u52a1\uff0c\u53ef\u4ee5\u7528\u4e00\u4e0b\u547d\u4ee4\u67e5\u770bsshd\u662f\u5426\u5df2\u7ecf\u88ab\u6b63\u786e\u7684\u8fd0\u884c\u4e86\uff1a # ps -waux | grep sshd GW3399\u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\u4e86SSH\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u8ba9PC\u548c\u5f00\u53d1\u677f\u4e8e\u540c\u4e00\u7f51\u6bb5\u4e14\u80fdping\u901a\u5373\u53ef\uff0c\u8fd9\u91ccPC\u7684IP\u5730\u5740\u662f192.168.100.88\u3002 \u5728\u5f00\u53d1\u677f\u7ec8\u7aef\u8f93\u5165ifconfig\u547d\u4ee4\uff0c\u53ef\u4ee5GW3399\u7684IP\u5730\u5740\u4fe1\u606f\u5982\u4e0b\uff1a\uff08\u6709\u7ebf\u8fde\u63a5\u7f51\u5361\u662feth0\uff0c\u65e0\u7ebf\u8fde\u63a5\u7f51\u5361\u662fwlan0\uff09 \u53ef\u4ee5\u770b\u5230eth0\u5bf9\u5e94\u7684inet\u5730\u5740\u662f192.168.100.66\uff0c\u4e0d\u540c\u7684GW3399\u5e73\u53f0\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8981\u4f7f\u7528\u81ea\u5df1\u5f00\u53d1\u677f\u5bf9\u5e94\u7684inet\u5730\u5740\u3002\u5982\u679ceth0\u5bf9\u5e94\u7684inet\u5730\u5740\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa # sudo ifconfig eth0 192.168.100.66 \u8fd9\u91cc192.168.100.66\u4ec5\u4f9b\u53c2\u8003\uff0c\u4e5f\u53ef\u8bbe\u7f6e\u6210\u5176\u4ed6\u7684\uff0c\u6bd4\u5982192.168.100.37\u3002 \u6253\u5f00MobaXterm\uff0c\u5355\u51fb\u6253\u5f00\u5de5\u5177Session\uff08\u4f4d\u4e8e\u5de6\u4e0a\u89d2\uff09\u9009\u62e9New sessions\u6253\u5f00\u65b0\u5efa\u7a97\u53e3\uff0c\u9009\u62e9SSH\uff0c\u8f93\u5165\u5f00\u53d1\u677fIP\u5730\u5740\u3001\u767b\u9646\u7528\u6237\u540d\u53ca\u7aef\u53e3\uff08\u9ed8\u8ba422\uff09\uff0c\u70b9\u51fbOK\u3002 SSH\u914d\u7f6e\u4fe1\u606f\u5982\u4e0b\uff1a \u6ce8\u610f \u200b \u7528\u6237\u540d\u662f\u201czonesion\u201d\uff0c\u5bc6\u7801\u662f\u201c123456\u201d\uff0c\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u5b9e\u73b0\u8fdc\u7a0b\u767b\u5f55\u3002 SSH \u767b\u5f55\u6210\u529f\u754c\u9762\uff1a 2. \u6587\u4ef6\u4f20\u8f93SFTP\u670d\u52a1 SSH\u8fdc\u7a0b\u767b\u5f55\u5b8c\u6bd5\uff0c\u5728\u5de6\u4e0b\u89d2\u6ca1\u6709\u4e00\u4e2a\u7ad6\u7740\u7684Sftp\uff0c\u53cc\u51fb\u5b83\uff0c\u5c31\u51fa\u73b0\u4e86\u5f00\u53d1\u677f\u7684\u6587\u4ef6\u76ee\u5f55\uff0c\u5f53\u524d\u8def\u5f84\u662fhome/zonesion \u63a5\u4e0b\u6765\u5728\u53ef\u4ee5\u70b9\u51fb\u4e0b\u56fe\u7ea2\u8272\u6846\u6846\u7684\u6309\u94ae\u201cUpload to current folder\u201d,\u9009\u62e9\u4f60\u8981\u4f20\u8f93\u7684\u6587\u4ef6\uff0c\u4f20\u8f93\u5230GW3399\u5f00\u53d1\u677f\u7684\u5f53\u524d\u76ee\u5f55\u4e0bhome/zonesion\u3002 3. VNC\u8fdc\u7a0b\u767b\u5f55 SSH\u767b\u5f55\u540e\u663e\u793a\u7684\u662f\u7ec8\u7aef\u754c\u9762\uff0cVNC\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u8fdc\u7a0b\u684c\u9762\u767b\u5f55\u3002VNC (Virtual Network Console)\u662f\u865a\u62df\u7f51\u7edc\u63a7\u5236\u53f0\u7684\u7f29\u5199\u3002 \u9996\u5148\u5f00\u53d1\u677f\u8981\u548cWindows\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5\uff0c\u8981\u80fd\u591fping\u901a\uff0c\u53c2\u8003SSH\u8fdc\u7a0b\u767b\u5f55\u3002\u5355\u51fb\u6253\u5f00\u5de5\u5177\u201cSession\u201d\uff0c\u7136\u540e\u9009\u62e9\u201cVNC\u201d\uff0c\u8f93\u5165GW3399\u7684IP\u5730\u5740\uff0c\u7aef\u53e3\u53f7\u9009\u62e95900\uff0c\u70b9\u51fbOK\u5982\u4e0b\u56fe\u6240\u793a\u3002 VNC\u914d\u7f6e\u4fe1\u606f\uff1a \u82e5\u5f39\u51fa\u8f93\u5165\u9009\u9879\u5bc6\u7801\u9009\u9879\uff0c\u8f93\u5165\u5bc6\u7801123456\u5373\u53ef\uff0c\u82e5\u5f39\u51fa\u9009\u62e9\u6846\uff0c\u5c31\u9009\u62e9yes\uff0c\u5373\u53ef\u5b9e\u73b0\u8fdc\u7a0b\u767b\u5f55\u3002 VNC\u767b\u5f55\u6210\u529f\u754c\u9762\uff1a \u82e5\u8981\u9000\u51fa\uff0c\u9009\u62e9\u53f3\u4e0a\u89d2\u7ea2\u8272\u7684Exit\u3002","title":"\u8fdc\u7a0b\u767b\u5f55\u65b9\u6cd5"},{"location":"GW3399/part2/#_1","text":"\u76ee\u524d\u7f51\u7edc\u4e0a\u51fa\u73b0\u6709\u5f88\u591a\u79cd\u8fdc\u7a0b\u767b\u5f55\u5de5\u5177\uff0c\u5728\u5d4c\u5165\u5f0f\u8ba1\u7b97\u5b9e\u9a8c\u4e2d\uff0c\u63a8\u8350\u540c\u5b66\u4eec\u4f7f\u7528MobaXterm\u3002 MobaXterm \u662f\u4e00\u6b3e\u8fdc\u7a0b\u63a7\u5236\u5de5\u5177\uff0c\u652f\u6301\u521b\u5efaSSH\u3001Telnet\u3001Rsh\u3001Xdmc\u3001RDP\u3001VNC\u3001FTP\u3001 SFTP\u3001\u4e32\u53e3(Serial COM)\u3001\u672c\u5730Shell\u3001Mosh\u3001Aws\u3001WSL(\u5fae\u8f6f\u5b50\u7cfb\u7edf)\u7b49\u8d85\u591a\u8fde\u63a5\u529f\u80fd\u3002MobaXterm \u63d0\u4f9b\u4e86\u4eba\u6027\u5316\u7684\u64cd\u4f5c\u754c\u9762\uff0c\u652f\u6301\u4e0e\u4e3b\u6d41\u7684\u64cd\u4f5c\u7cfb\u7edf\u8fde\u63a5\u8fdb\u884c\u63a7\u5236\u548c\u7ba1\u7406\u64cd\u4f5c\uff0c\u529f\u80fd\u5341\u5206\u5f3a\u5927\u3002 \u5728\u5b9e\u9a8c\u4e2d\uff0c\u5e38\u7528\u5230\u7684MobaXterm\u529f\u80fd\u6709SSH\uff0cSFTP\uff0cSerial\uff0cVNC\u7b49\u3002","title":"\u5d4c\u5165\u5f0f\u5e73\u53f0\u8fdc\u7a0b\u767b\u5f55"},{"location":"GW3399/part2/#1-ssh","text":"SSH\u4e3aSecure Shell\u7684\u7f29\u5199\uff0c\u7531IETF\u7684\u7f51\u7edc\u5c0f\u7ec4\uff08Network Working Group\uff09\u6240\u5236\u5b9a\uff1bSSH \u4e3a\u5efa\u7acb\u5728\u5e94\u7528\u5c42\u57fa\u7840\u4e0a\u7684\u5b89\u5168\u534f\u8bae\u3002SSH\u662f\u76ee\u524d\u8f83\u53ef\u9760\uff0c\u4e13\u4e3a\u8fdc\u7a0b\u767b\u5f55\u4f1a\u8bdd\u548c\u5176\u4ed6\u7f51\u7edc\u670d\u52a1\u63d0\u4f9b\u5b89\u5168\u6027\u7684\u534f\u8bae\u3002\u5229\u7528 SSH \u534f\u8bae\u53ef\u4ee5\u6709\u6548\u9632\u6b62\u8fdc\u7a0b\u7ba1\u7406\u8fc7\u7a0b\u4e2d\u7684\u4fe1\u606f\u6cc4\u9732\u95ee\u9898\u3002 \u8fdc\u7a0b\u767b\u5f55\u53ef\u4ee5\u901a\u8fc7\u65e0\u7ebf\u548c\u6709\u7ebf\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\uff08 \u5982\u679c\u4f7f\u7528\u65e0\u7ebf\u8fde\u63a5\uff0c\u9700\u8981\u63a5\u4e0aWifi\u5929\u7ebf \uff09\u3002\u8fdc\u7a0b\u767b\u5f55\u7684\u5173\u952e\u70b9\u6709\u4e24\u4e2a\uff0c\u7b2c\u4e00\u4e2a\u662fGW3399\u5f00\u53d1\u677f\u548cPC\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5\u4e14\u4e24\u8005\u80fdping\u901a\uff0c\u7b2c\u4e8c\u4e2a\u662fGW3399\u5f00\u53d1\u677f\u5fc5\u987b\u5f00\u542fSSH\u670d\u52a1\uff0c\u53ef\u4ee5\u7528\u4e00\u4e0b\u547d\u4ee4\u67e5\u770bsshd\u662f\u5426\u5df2\u7ecf\u88ab\u6b63\u786e\u7684\u8fd0\u884c\u4e86\uff1a # ps -waux | grep sshd GW3399\u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\u4e86SSH\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u8ba9PC\u548c\u5f00\u53d1\u677f\u4e8e\u540c\u4e00\u7f51\u6bb5\u4e14\u80fdping\u901a\u5373\u53ef\uff0c\u8fd9\u91ccPC\u7684IP\u5730\u5740\u662f192.168.100.88\u3002 \u5728\u5f00\u53d1\u677f\u7ec8\u7aef\u8f93\u5165ifconfig\u547d\u4ee4\uff0c\u53ef\u4ee5GW3399\u7684IP\u5730\u5740\u4fe1\u606f\u5982\u4e0b\uff1a\uff08\u6709\u7ebf\u8fde\u63a5\u7f51\u5361\u662feth0\uff0c\u65e0\u7ebf\u8fde\u63a5\u7f51\u5361\u662fwlan0\uff09 \u53ef\u4ee5\u770b\u5230eth0\u5bf9\u5e94\u7684inet\u5730\u5740\u662f192.168.100.66\uff0c\u4e0d\u540c\u7684GW3399\u5e73\u53f0\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8981\u4f7f\u7528\u81ea\u5df1\u5f00\u53d1\u677f\u5bf9\u5e94\u7684inet\u5730\u5740\u3002\u5982\u679ceth0\u5bf9\u5e94\u7684inet\u5730\u5740\u4e0d\u5b58\u5728\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa # sudo ifconfig eth0 192.168.100.66 \u8fd9\u91cc192.168.100.66\u4ec5\u4f9b\u53c2\u8003\uff0c\u4e5f\u53ef\u8bbe\u7f6e\u6210\u5176\u4ed6\u7684\uff0c\u6bd4\u5982192.168.100.37\u3002 \u6253\u5f00MobaXterm\uff0c\u5355\u51fb\u6253\u5f00\u5de5\u5177Session\uff08\u4f4d\u4e8e\u5de6\u4e0a\u89d2\uff09\u9009\u62e9New sessions\u6253\u5f00\u65b0\u5efa\u7a97\u53e3\uff0c\u9009\u62e9SSH\uff0c\u8f93\u5165\u5f00\u53d1\u677fIP\u5730\u5740\u3001\u767b\u9646\u7528\u6237\u540d\u53ca\u7aef\u53e3\uff08\u9ed8\u8ba422\uff09\uff0c\u70b9\u51fbOK\u3002 SSH\u914d\u7f6e\u4fe1\u606f\u5982\u4e0b\uff1a \u6ce8\u610f \u200b \u7528\u6237\u540d\u662f\u201czonesion\u201d\uff0c\u5bc6\u7801\u662f\u201c123456\u201d\uff0c\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u5b9e\u73b0\u8fdc\u7a0b\u767b\u5f55\u3002 SSH \u767b\u5f55\u6210\u529f\u754c\u9762\uff1a","title":"1.  SSH\u8fdc\u7a0b\u767b\u5f55"},{"location":"GW3399/part2/#2-sftp","text":"SSH\u8fdc\u7a0b\u767b\u5f55\u5b8c\u6bd5\uff0c\u5728\u5de6\u4e0b\u89d2\u6ca1\u6709\u4e00\u4e2a\u7ad6\u7740\u7684Sftp\uff0c\u53cc\u51fb\u5b83\uff0c\u5c31\u51fa\u73b0\u4e86\u5f00\u53d1\u677f\u7684\u6587\u4ef6\u76ee\u5f55\uff0c\u5f53\u524d\u8def\u5f84\u662fhome/zonesion \u63a5\u4e0b\u6765\u5728\u53ef\u4ee5\u70b9\u51fb\u4e0b\u56fe\u7ea2\u8272\u6846\u6846\u7684\u6309\u94ae\u201cUpload to current folder\u201d,\u9009\u62e9\u4f60\u8981\u4f20\u8f93\u7684\u6587\u4ef6\uff0c\u4f20\u8f93\u5230GW3399\u5f00\u53d1\u677f\u7684\u5f53\u524d\u76ee\u5f55\u4e0bhome/zonesion\u3002","title":"2.  \u6587\u4ef6\u4f20\u8f93SFTP\u670d\u52a1"},{"location":"GW3399/part2/#3-vnc","text":"SSH\u767b\u5f55\u540e\u663e\u793a\u7684\u662f\u7ec8\u7aef\u754c\u9762\uff0cVNC\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u8fdc\u7a0b\u684c\u9762\u767b\u5f55\u3002VNC (Virtual Network Console)\u662f\u865a\u62df\u7f51\u7edc\u63a7\u5236\u53f0\u7684\u7f29\u5199\u3002 \u9996\u5148\u5f00\u53d1\u677f\u8981\u548cWindows\u5904\u4e8e\u540c\u4e00\u4e2a\u7f51\u6bb5\uff0c\u8981\u80fd\u591fping\u901a\uff0c\u53c2\u8003SSH\u8fdc\u7a0b\u767b\u5f55\u3002\u5355\u51fb\u6253\u5f00\u5de5\u5177\u201cSession\u201d\uff0c\u7136\u540e\u9009\u62e9\u201cVNC\u201d\uff0c\u8f93\u5165GW3399\u7684IP\u5730\u5740\uff0c\u7aef\u53e3\u53f7\u9009\u62e95900\uff0c\u70b9\u51fbOK\u5982\u4e0b\u56fe\u6240\u793a\u3002 VNC\u914d\u7f6e\u4fe1\u606f\uff1a \u82e5\u5f39\u51fa\u8f93\u5165\u9009\u9879\u5bc6\u7801\u9009\u9879\uff0c\u8f93\u5165\u5bc6\u7801123456\u5373\u53ef\uff0c\u82e5\u5f39\u51fa\u9009\u62e9\u6846\uff0c\u5c31\u9009\u62e9yes\uff0c\u5373\u53ef\u5b9e\u73b0\u8fdc\u7a0b\u767b\u5f55\u3002 VNC\u767b\u5f55\u6210\u529f\u754c\u9762\uff1a \u82e5\u8981\u9000\u51fa\uff0c\u9009\u62e9\u53f3\u4e0a\u89d2\u7ea2\u8272\u7684Exit\u3002","title":"3.  VNC\u8fdc\u7a0b\u767b\u5f55"},{"location":"GW3399/part3/","text":"\u5e38\u7528\u7684LINUX\u547d\u4ee4 1. \u57fa\u672c\u547d\u4ee4 ls\uff1a\u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u5f55\u3002 ls -a\uff1a\u53ef\u4ee5\u770b\u5230\u9690\u85cf\u7684\u6587\u4ef6\uff0c\u5982\u4ee5.\u5f00\u5934\u7684\u6587\u4ef6\u3002 pwd\uff1a\u663e\u793a\u5f53\u524d\u76ee\u5f55\u8def\u5f84\u3002 ps\uff1a\u5217\u4e3e\u5f53\u524dTTY \u4e0b\u6240\u6709\u8fdb\u7a0b ps -A\uff1a\u5217\u4e3e\u6240\u6709 cd \u76ee\u5f55\u540d\uff1a\u8fdb\u5165\u76ee\u5f55 mkdir \u76ee\u5f55\u540d\uff1a\u521b\u5efa\u76ee\u5f55 rmdir \u76ee\u5f55\u540d\uff1a\u5220\u9664\u7a7a\u76ee\u5f55 rm -rf \u76ee\u5f55\u540d\uff1a\u5f3a\u884c\u5220\u9664\u6574\u4e2a\u76ee\u5f55\u5185\u5bb9\uff08\u65e0\u6cd5\u6062\u590d\uff09\uff0c\u5176\u4e2df \u8868\u793a\u5f3a\u5236\u4e0d\u8fdb\u884c\u63d0\u793a\uff0cr \u8868\u793a\u76ee\u5f55\u9012\u5f52\u3002 \u6ce8\uff1aLINUX \u4e0b\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684\u3002 2. \u538b\u7f29/\u89e3\u538b\u7f29 LINUX \u7684\u8f6f\u4ef6\u4e00\u822c\u662f\u4ee5.gz \u6216.tar \u6216\u8005.tar.gz \u7ed3\u5c3e\u7684\u3002\u524d\u8005\u662f\u7531gzip\u538b\u7f29\u7684\uff0c\u540e\u8005\u662f\u5148\u7528tar \u5f52\u6863\uff0c\u5728\u7528gzip \u538b\u7f29\u800c\u6210\u7684\u3002 \u4ee5.gz \u7ed3\u5c3e\u7684\u4e3a\u538b\u7f29\u6587\u4ef6\uff0c\u7528\u547d\u4ee4\uff1agzip -d filename \u6765\u89e3\u538b\uff0c\u5f97\u5230\u7684\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\uff0c\u4f46\u5df2\u6ca1\u6709\u4e86.gz\u3002 \u4ee5.tar \u7ed3\u5c3e\u7684\u4e3a\u5f52\u6863\u6587\u4ef6\uff0c\u7528\u547d\u4ee4\uff1atar -xvf filename \u6765\u5c55\u5f00\uff0c\u751f\u6210\u7684\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u5728\u540c\u4e00\u76ee\u5f55\u4e2d\uff0c\u53ea\u662f\u5c11\u4e86.tar\u3002 \u4ee5.tar.gz \u7ed3\u5c3e\u7684\u6587\u4ef6\u6700\u5e38\u89c1\uff0c\u53ef\u76f4\u63a5\u7528\u547d\u4ee4\uff1agzip -cd filename | tar xfv \u6765\u89e3\u5f00\u3002 3. VI\u7b80\u4ecb vi \u662fLinux/Unix \u4e16\u754c\u91cc\u6781\u4e3a\u666e\u904d\u7684\u53ef\u89c6\u5316\u7684\u5168\u5c4f\u5e55\u6587\u672c\u7f16\u8f91\u5668(visual edit)\uff0c\u51e0\u4e4e\u53ef\u4ee5\u8bf4\u4efb\u4f55\u4e00\u53f0Linux/Unix \u673a\u5668\u90fd\u4f1a\u63d0\u4f9b\u8fd9\u4e2a\u8f6f\u4ef6\u3002 vi \u6709\u4e09\u79cd\u72b6\u6001\uff0c\u5373\u7f16\u8f91\u65b9\u5f0f\u3001\u63d2\u5165\u65b9\u5f0f\u548c\u547d\u4ee4\u65b9\u5f0f\u3002\u5728\u547d\u4ee4\u65b9\u5f0f\u4e0b\uff0c\u6240\u6709\u547d\u4ee4\u90fd\u8981\u4ee5\uff1a\u5f00\u59cb\uff0c\u6240\u952e\u5165\u7684\u5b57\u7b26\u7cfb\u7edf\u5747\u4f5c\u547d\u4ee4\u6765\u5904\u7406\uff0c\u5982:q \u4ee3\u8868\u9000\u51fa\uff0c:w \u8868\u793a\u5b58\u76d8\u3002\u5f53\u4f60\u8fdb\u5165vi \u65f6\uff0c\u4f1a\u9996\u5148\u8fdb\u5165\u547d\u4ee4\u65b9\u5f0f\uff08\u540c\u65f6\u4e5f\u662f\u7f16\u8f91\u65b9\u5f0f\uff09\u3002\u6309\u4e0bi \u5c31\u8fdb\u5165\u63d2\u5165\u65b9\u5f0f\uff0c\u7528\u6237\u8f93\u5165\u7684\u53ef\u89c6\u5b57\u7b26\u90fd\u6dfb\u52a0\u5230\u6587\u4ef6\u4e2d\uff0c\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u3002\u6309\u4e0bESC \u5c31\u53ef\u4ee5\u56de\u5230\u547d\u4ee4\u72b6\u6001\uff08\u540c\u65f6\u4e5f\u662f\u7f16\u8f91\u65b9\u5f0f\uff09\u3002 \u7f16\u8f91\u65b9\u5f0f\u548c\u547d\u4ee4\u65b9\u5f0f\u7c7b\u4f3c\uff0c\u90fd\u662f\u8981\u8f93\u5165\u547d\u4ee4\uff0c\u4f46\u5b83\u7684\u547d\u4ee4\u4e0d\u8981\u4ee5:\u5f00\u59cb\uff0c\u5b83\u76f4\u63a5\u63a5\u53d7\u952e\u76d8\u8f93\u5165\u7684\u5355\u5b57\u7b26\u6216\u7ec4\u5408\u5b57\u7b26\u547d\u4ee4\uff0c\u4f8b\u5982\u76f4\u63a5\u6309\u4e0bu \u5c31\u8868\u793a\u53d6\u6d88\u4e0a\u4e00\u6b21\u5bf9\u6587\u4ef6\u7684\u4fee\u6539\uff0c\u76f8\u5f53\u4e8eWINDOWS \u4e0b\u7684Undo\u64cd\u4f5c\u3002\u7f16\u8bd1\u65b9\u5f0f\u4e0b\u6709\u4e00\u4e9b\u547d\u4ee4\u662f\u8981\u4ee5/\u5f00\u59cb\u7684\uff0c\u4f8b\u5982\u67e5\u627e\u5b57\u7b26\u4e32\u5c31\u662f\uff1a/string \u5219\u5728\u6587\u4ef6\u4e2d\u5339\u914d\u67e5\u627estring \u5b57\u7b26\u4e32\u3002\u5728\u7f16\u8f91\u6a21\u5f0f\u4e0b\u6309\u4e0b:\u5c31\u8fdb\u5165\u547d\u4ee4\u65b9\u5f0f\u3002 \u57fa\u672c\u64cd\u4f5c\u5982\u4e0b\uff1a $ vi hell0.c \u7136\u540e\u6309\u4e0b\u952e\u76d8\u7684\u5b57\u6bcd i \u952e\uff08\u65e0\u6240\u8c13\u5927\u5c0f\u5199\uff09\uff0c\u663e\u793a\u4e3a\u63d2\u5165\u6a21\u5f0f\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u8fdb\u884c\u6587\u672c\u7684\u7f16\u8f91\u4e86\u3002 \u7f16\u5199\u5b8c\u6bd5\uff0c\u6309\u201cEsc\u201d\u952e\uff0c\u5219\u5f53\u524d\u6a21\u5f0f\u8f6c\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff0c\u5e76\u5728\u5e95\u884c\u884c\u4e2d\u8f93\u5165\u201c: wq\u201d\u4fdd\u5b58\u9000\u51fa\u8fdb\u5165\u5e95\u884c\u6a21\u5f0f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8fd9\u6837\uff0c\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u7b80\u5355\u7684vi\u64cd\u4f5c\u6d41\u7a0b\u3002","title":"\u5e38\u7528\u7684LINUX\u547d\u4ee4"},{"location":"GW3399/part3/#linux","text":"","title":"\u5e38\u7528\u7684LINUX\u547d\u4ee4"},{"location":"GW3399/part3/#1","text":"ls\uff1a\u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u548c\u76ee\u5f55\u3002 ls -a\uff1a\u53ef\u4ee5\u770b\u5230\u9690\u85cf\u7684\u6587\u4ef6\uff0c\u5982\u4ee5.\u5f00\u5934\u7684\u6587\u4ef6\u3002 pwd\uff1a\u663e\u793a\u5f53\u524d\u76ee\u5f55\u8def\u5f84\u3002 ps\uff1a\u5217\u4e3e\u5f53\u524dTTY \u4e0b\u6240\u6709\u8fdb\u7a0b ps -A\uff1a\u5217\u4e3e\u6240\u6709 cd \u76ee\u5f55\u540d\uff1a\u8fdb\u5165\u76ee\u5f55 mkdir \u76ee\u5f55\u540d\uff1a\u521b\u5efa\u76ee\u5f55 rmdir \u76ee\u5f55\u540d\uff1a\u5220\u9664\u7a7a\u76ee\u5f55 rm -rf \u76ee\u5f55\u540d\uff1a\u5f3a\u884c\u5220\u9664\u6574\u4e2a\u76ee\u5f55\u5185\u5bb9\uff08\u65e0\u6cd5\u6062\u590d\uff09\uff0c\u5176\u4e2df \u8868\u793a\u5f3a\u5236\u4e0d\u8fdb\u884c\u63d0\u793a\uff0cr \u8868\u793a\u76ee\u5f55\u9012\u5f52\u3002 \u6ce8\uff1aLINUX \u4e0b\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684\u3002","title":"1.  \u57fa\u672c\u547d\u4ee4"},{"location":"GW3399/part3/#2","text":"LINUX \u7684\u8f6f\u4ef6\u4e00\u822c\u662f\u4ee5.gz \u6216.tar \u6216\u8005.tar.gz \u7ed3\u5c3e\u7684\u3002\u524d\u8005\u662f\u7531gzip\u538b\u7f29\u7684\uff0c\u540e\u8005\u662f\u5148\u7528tar \u5f52\u6863\uff0c\u5728\u7528gzip \u538b\u7f29\u800c\u6210\u7684\u3002 \u4ee5.gz \u7ed3\u5c3e\u7684\u4e3a\u538b\u7f29\u6587\u4ef6\uff0c\u7528\u547d\u4ee4\uff1agzip -d filename \u6765\u89e3\u538b\uff0c\u5f97\u5230\u7684\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u4e2d\uff0c\u4f46\u5df2\u6ca1\u6709\u4e86.gz\u3002 \u4ee5.tar \u7ed3\u5c3e\u7684\u4e3a\u5f52\u6863\u6587\u4ef6\uff0c\u7528\u547d\u4ee4\uff1atar -xvf filename \u6765\u5c55\u5f00\uff0c\u751f\u6210\u7684\u6587\u4ef6\u4e0e\u6e90\u6587\u4ef6\u5728\u540c\u4e00\u76ee\u5f55\u4e2d\uff0c\u53ea\u662f\u5c11\u4e86.tar\u3002 \u4ee5.tar.gz \u7ed3\u5c3e\u7684\u6587\u4ef6\u6700\u5e38\u89c1\uff0c\u53ef\u76f4\u63a5\u7528\u547d\u4ee4\uff1agzip -cd filename | tar xfv \u6765\u89e3\u5f00\u3002","title":"2.  \u538b\u7f29/\u89e3\u538b\u7f29"},{"location":"GW3399/part3/#3-vi","text":"vi \u662fLinux/Unix \u4e16\u754c\u91cc\u6781\u4e3a\u666e\u904d\u7684\u53ef\u89c6\u5316\u7684\u5168\u5c4f\u5e55\u6587\u672c\u7f16\u8f91\u5668(visual edit)\uff0c\u51e0\u4e4e\u53ef\u4ee5\u8bf4\u4efb\u4f55\u4e00\u53f0Linux/Unix \u673a\u5668\u90fd\u4f1a\u63d0\u4f9b\u8fd9\u4e2a\u8f6f\u4ef6\u3002 vi \u6709\u4e09\u79cd\u72b6\u6001\uff0c\u5373\u7f16\u8f91\u65b9\u5f0f\u3001\u63d2\u5165\u65b9\u5f0f\u548c\u547d\u4ee4\u65b9\u5f0f\u3002\u5728\u547d\u4ee4\u65b9\u5f0f\u4e0b\uff0c\u6240\u6709\u547d\u4ee4\u90fd\u8981\u4ee5\uff1a\u5f00\u59cb\uff0c\u6240\u952e\u5165\u7684\u5b57\u7b26\u7cfb\u7edf\u5747\u4f5c\u547d\u4ee4\u6765\u5904\u7406\uff0c\u5982:q \u4ee3\u8868\u9000\u51fa\uff0c:w \u8868\u793a\u5b58\u76d8\u3002\u5f53\u4f60\u8fdb\u5165vi \u65f6\uff0c\u4f1a\u9996\u5148\u8fdb\u5165\u547d\u4ee4\u65b9\u5f0f\uff08\u540c\u65f6\u4e5f\u662f\u7f16\u8f91\u65b9\u5f0f\uff09\u3002\u6309\u4e0bi \u5c31\u8fdb\u5165\u63d2\u5165\u65b9\u5f0f\uff0c\u7528\u6237\u8f93\u5165\u7684\u53ef\u89c6\u5b57\u7b26\u90fd\u6dfb\u52a0\u5230\u6587\u4ef6\u4e2d\uff0c\u663e\u793a\u5728\u5c4f\u5e55\u4e0a\u3002\u6309\u4e0bESC \u5c31\u53ef\u4ee5\u56de\u5230\u547d\u4ee4\u72b6\u6001\uff08\u540c\u65f6\u4e5f\u662f\u7f16\u8f91\u65b9\u5f0f\uff09\u3002 \u7f16\u8f91\u65b9\u5f0f\u548c\u547d\u4ee4\u65b9\u5f0f\u7c7b\u4f3c\uff0c\u90fd\u662f\u8981\u8f93\u5165\u547d\u4ee4\uff0c\u4f46\u5b83\u7684\u547d\u4ee4\u4e0d\u8981\u4ee5:\u5f00\u59cb\uff0c\u5b83\u76f4\u63a5\u63a5\u53d7\u952e\u76d8\u8f93\u5165\u7684\u5355\u5b57\u7b26\u6216\u7ec4\u5408\u5b57\u7b26\u547d\u4ee4\uff0c\u4f8b\u5982\u76f4\u63a5\u6309\u4e0bu \u5c31\u8868\u793a\u53d6\u6d88\u4e0a\u4e00\u6b21\u5bf9\u6587\u4ef6\u7684\u4fee\u6539\uff0c\u76f8\u5f53\u4e8eWINDOWS \u4e0b\u7684Undo\u64cd\u4f5c\u3002\u7f16\u8bd1\u65b9\u5f0f\u4e0b\u6709\u4e00\u4e9b\u547d\u4ee4\u662f\u8981\u4ee5/\u5f00\u59cb\u7684\uff0c\u4f8b\u5982\u67e5\u627e\u5b57\u7b26\u4e32\u5c31\u662f\uff1a/string \u5219\u5728\u6587\u4ef6\u4e2d\u5339\u914d\u67e5\u627estring \u5b57\u7b26\u4e32\u3002\u5728\u7f16\u8f91\u6a21\u5f0f\u4e0b\u6309\u4e0b:\u5c31\u8fdb\u5165\u547d\u4ee4\u65b9\u5f0f\u3002 \u57fa\u672c\u64cd\u4f5c\u5982\u4e0b\uff1a $ vi hell0.c \u7136\u540e\u6309\u4e0b\u952e\u76d8\u7684\u5b57\u6bcd i \u952e\uff08\u65e0\u6240\u8c13\u5927\u5c0f\u5199\uff09\uff0c\u663e\u793a\u4e3a\u63d2\u5165\u6a21\u5f0f\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u8fdb\u884c\u6587\u672c\u7684\u7f16\u8f91\u4e86\u3002 \u7f16\u5199\u5b8c\u6bd5\uff0c\u6309\u201cEsc\u201d\u952e\uff0c\u5219\u5f53\u524d\u6a21\u5f0f\u8f6c\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff0c\u5e76\u5728\u5e95\u884c\u884c\u4e2d\u8f93\u5165\u201c: wq\u201d\u4fdd\u5b58\u9000\u51fa\u8fdb\u5165\u5e95\u884c\u6a21\u5f0f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8fd9\u6837\uff0c\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u7b80\u5355\u7684vi\u64cd\u4f5c\u6d41\u7a0b\u3002","title":"3.  VI\u7b80\u4ecb"},{"location":"GW3399/part4/","text":"\u7cfb\u7edf\u56fa\u4ef6\u66f4\u65b0 \u56fa\u4ef6\u6587\u4ef6\u4e00\u822c\u6709\u4e24\u79cd\uff1a \u56fa\u4ef6\u6587\u4ef6\u7c7b\u578b \u8bf4\u660e \u7edf\u4e00\u56fa\u4ef6 update.img, \u5c06\u542f\u52a8\u52a0\u8f7d\u5668\u3001\u53c2\u6570\u548c\u6240\u6709\u5206\u533a\u955c\u50cf\u90fd\u6253\u5305\u5230\u4e00\u8d77\uff0c\u7528\u4e8e\u56fa\u4ef6\u53d1\u5e03\u3002 \u5206\u7acb\u56fa\u4ef6 \u5982uboot.img, trust.img, boot.img \u7b49\uff0c\u5728\u5f00\u53d1\u9636\u6bb5\u751f\u6210\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u901a\u8fc7Windows\u4e3b\u673a\uff0c\u4e3aGW3399\u66f4\u65b0\u7cfb\u7edf\u56fa\u4ef6\u3002\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\uff1aWindows XP/\u215e/10\uff0832/64\u4f4d\uff09\uff0cLinux\uff0832/64\u4f4d\uff09\u3002 \u7cfb\u7edf\u56fa\u4ef6\u66f4\u65b0\u6709\u4e09\u79cd\u65b9\u6cd5\uff1a \u5236\u4f5cSD\u5361\u542f\u52a8\u76d8 Windows\u73af\u5883\u4e0b\u66f4\u65b0SD\u5361\u56fa\u4ef6 Linux\u73af\u5883\u4e0b\u66f4\u65b0SD\u5361\u56fa\u4ef6 \u7b2c\u4e00\u79cd\u65b9\u6cd5\u9700\u8981\u4f7f\u7528SD\u5361\u8bfb\u5361\u5668\uff0c\u5c06SD\u5361\u63d2\u5230\u7535\u8111\u4e2d\uff0c\u5bf9SD\u5361\u8fdb\u884c\u70e7\u5199\u3002\u540e\u4e24\u79cd\u65b9\u6cd5\u53ea\u9700\u8981\u5c06SD\u5361\u63d2\u5230RK3399\u5f00\u53d1\u677f\u4e2d\uff0c\u901a\u8fc7Type-C\u8fde\u63a5\u7ebf\u8fde\u63a5\u7535\u8111\uff0c\u5373\u53ef\u4ee5\u5728windows/linux\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6\u3002 1. \u5236\u4f5cSD\u5361\u542f\u52a8\u76d8 \u9996\u5148\uff0c\u5c06SD\u5361\u63d2\u5165\u8bfb\u5361\u5668\uff0c\u8fde\u63a5\u5230PC\u3002 \u6253\u5f00\u5b9e\u9a8c\u5305\u7684Tools\u6587\u4ef6\u5939\uff0c\u8fd0\u884cSDDiskTool_v1.56\u4e2d\u7684SD_Firmware_Tool.exe\uff0c\u9009\u4e2dSD\u5361\u540e\uff0c\u70b9\u51fb\u201c\u9009\u62e9\u56fa\u4ef6\u201d\u6309\u94ae\uff0c\u9009\u62e9Ubuntu\u6587\u4ef6\u5939\u7684update-MiniLinux.img\uff1a \u9009\u62e9\u201c\u56fa\u4ef6\u5347\u7ea7\u201d\uff0c\u70b9\u51fb\u201c\u5f00\u59cb\u521b\u5efa\u201d\uff1a \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u63d0\u793a\u201c\u5199\u5165MBR\u5931\u8d25\u201d\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\uff0c\u70b9\u51fb\u786e\u5b9a\u7ee7\u7eed\u4e0b\u4e00\u6b65\uff1a \u9009\u62e9\u201cSD\u542f\u52a8\u201d\uff0c\u518d\u6b21\u70b9\u51fb\u201c\u5f00\u59cb\u521b\u5efa\u201d\uff1a \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u63d0\u793a\u201c\u521b\u5efa\u5347\u7ea7\u78c1\u76d8\u6210\u529f\u201d\uff0c\u8bf4\u660eSD\u5361\u542f\u52a8\u76d8\u5236\u4f5c\u6210\u529f\uff1a SD\u5361\u542f\u52a8\u76d8\u5236\u4f5c\u5b8c\u6210\u540e\u5373\u53ef\u63d2\u5165RK3399\u5f00\u53d1\u677f\u4e2d\u4f7f\u7528\u3002 2. Windows\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6 2.1 \u5b89\u88c5RK USB\u9a71\u52a8 \u6253\u5f00\u5b9e\u9a8c\u5305\u4e2d\u7684Tools\u6587\u4ef6\u5939\uff0c\u627e\u5230DriverAssitant_v4.5\uff0c\u7136\u540e\u8fd0\u884c\u91cc\u9762\u7684DriverInstall.exe\u3002\u4e3a\u4e86\u6240\u6709\u8bbe\u5907\u90fd\u4f7f\u7528\u66f4\u65b0\u7684\u9a71\u52a8\uff0c\u8bf7\u5148\u9009\u62e9\u201c\u9a71\u52a8\u5378\u8f7d\u201d\uff0c\u7136\u540e\u518d\u9009\u62e9\u201c\u9a71\u52a8\u5b89\u88c5\u201d\u3002 2.2 \u8fde\u63a5\u8bbe\u5907 \u9996\u5148\uff0c\u5c06SD\u5361\u542f\u52a8\u76d8\u63d2\u5165GW3399\uff0c\u7136\u540e\uff0c\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u53ef\u4ee5\u4f7f\u8bbe\u5907\u8fdb\u5165\u5347\u7ea7\u6a21\u5f0f\uff1a \u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 Type-C\u6570\u636e\u7ebf\u4e00\u7aef\u8fde\u63a5\u4e3b\u673a\uff0c\u4e00\u7aef\u8fde\u63a5GW3399 \u6309\u4f4f\u8bbe\u5907\u4e0a\u7684REC\u952e\u5e76\u4fdd\u6301 \u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 \u5927\u7ea6\u4e09\u79d2\u949f\u540e\uff0c\u677e\u5f00REC\u952e \u4e3b\u673a\u4f1a\u63d0\u793a\u53d1\u73b0\u65b0\u786c\u4ef6\u5e76\u914d\u7f6e\u9a71\u52a8\u3002\u6253\u5f00\u8bbe\u5907\u7ba1\u7406\u5668\uff0c\u4f1a\u89c1\u5230\u65b0\u8bbe\u5907\u201cRockusb Device\u201d \u51fa\u73b0\uff0c\u5982\u4e0b\u56fe\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u9700\u8981\u8fd4\u56de\u4e0a\u4e00\u6b65\u91cd\u65b0\u5b89\u88c5\u9a71\u52a8\u3002 2.3 \u66f4\u65b0\u7cfb\u7edf \u6253\u5f00\u5b9e\u9a8c\u5305\u7684Tools\u6587\u4ef6\u5939\uff0c\u9009\u62e9AndroidTool_Release\uff0c\u7136\u540e\u8fd0\u884c\u91cc\u9762\u7684AndroidTool.exe\u3002 \u66f4\u65b0\u65b9\u5f0f\u6709\u4e24\u79cd\uff0c\u53ef\u4ee5\u70e7\u5199\u7edf\u4e00\u56fa\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u53ea\u70e7\u5199\u90e8\u5206\u5206\u533a\u6620\u50cf\u3002 \u70e7\u5199\u7edf\u4e00\u56fa\u4ef6update.img \u70e7\u5199\u7edf\u4e00\u56fa\u4ef6\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a \u5207\u6362\u81f3\u201c\u5347\u7ea7\u56fa\u4ef6\u201d\u9875 \u6309\u201c\u56fa\u4ef6\u201d\u6309\u94ae\uff0c\u6253\u5f00\u8981\u5347\u7ea7\u7684\u56fa\u4ef6\u6587\u4ef6\u3002\u5347\u7ea7\u5de5\u5177\u4f1a\u663e\u793a\u8be6\u7ec6\u7684\u56fa\u4ef6\u4fe1\u606f \u6309\u201c\u5347\u7ea7\u201d\u6309\u94ae\u5f00\u59cb\u5347\u7ea7 \u5347\u7ea7\u5b8c\u6210\u540e\uff0c\u63d0\u793a\u4fe1\u606f\u5982\u4e0b\u56fe\uff0c\u7cfb\u7edf\u81ea\u52a8\u91cd\u542f\u3002 \u6ce8\u610f\uff1a\u63d2SD\u5361\u65f6\uff0c\u4e00\u5b9a\u4e0d\u80fd\u70b9\u51fb\u201c\u64e6\u9664Flash\u201d\u6309\u94ae\uff01\u5426\u5219\u4f1a\u51fa\u4e00\u7cfb\u5217\u9519\u8bef\uff0c\u5e76\u4e14\u8981\u91cd\u65b0\u6309\u201c\u5236\u4f5cSD\u5361\u542f\u52a8\u76d8\u201d\u6b65\u9aa4\u5236\u4f5cSD\u5361\u542f\u52a8\u76d8\u3002 \u70e7\u5199\u5206\u533a\u6620\u50cf \u70e7\u5199\u5206\u533a\u6620\u50cf\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a \u5207\u6362\u81f3\u201c\u4e0b\u8f7d\u955c\u50cf\u201d\u9875 \u52fe\u9009\u9700\u8981\u70e7\u5f55\u7684\u5206\u533a\uff0c\u53ef\u4ee5\u591a\u9009 \u786e\u4fdd\u6620\u50cf\u6587\u4ef6\u7684\u8def\u5f84\u6b63\u786e\uff0c\u9700\u8981\u7684\u8bdd\uff0c\u70b9\u8def\u5f84\u53f3\u8fb9\u7684\u7a7a\u767d\u8868\u683c\u5355\u5143\u683c\u6765\u91cd\u65b0\u9009\u62e9 \u70b9\u51fb\u201c\u6267\u884c\u201d\u6309\u94ae\u5f00\u59cb\u5347\u7ea7\uff0c\u5347\u7ea7\u7ed3\u675f\u540e\u8bbe\u5907\u4f1a\u81ea\u52a8\u91cd\u542f \u6ce8\u610f\uff1a\u8981\u66f4\u65b0rootfs\u65f6\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0parameter\uff0c\u5426\u5219\u6709\u53ef\u80fd\u51fa\u73b0\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u4e0d\u4e0a\u3001\u65e0\u6cd5\u542f\u52a8\u7684\u95ee\u9898\u3002 \u7b2c\u4e00\u6b21\u70e7\u5199\u5206\u533a\u6620\u50cf\u5230SD\u5361\u65f6\uff0c\u5efa\u8bae\u70e7\u5199\u5168\u90e86\u4e2a\u5206\u533a\u6620\u50cf\u3002 3. Linux\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528Windows\u4e3b\u673a\uff0c\u4e3aGW3399\u66f4\u65b0\u7cfb\u7edf\u56fa\u4ef6\u3002\u8fd9\u91cc\u4ec5\u5bf9Linux\u4e0b\u66f4\u65b0\u56fa\u4ef6\u7684\u65b9\u6cd5\u505a\u7b80\u5355\u7684\u8bf4\u660e\u3002 Linux \u4e0b\u65e0\u987b\u5b89\u88c5\u8bbe\u5907\u9a71\u52a8\u3002\u6309\u7167\u4ee5\u4e0b\u64cd\u4f5c\u8ba9\u8bbe\u5907\u8fdb\u5165Loader\u6a21\u5f0f\uff0c\u518d\u6309\u4e0b\u56fe\u5c06Rockchip USB\u5206\u914d\u5230\u865a\u62df\u673a \u63a5\u7740\u91cd\u65b0\u8ba9\u8bbe\u5907\u8fdb\u5165Loader\u6a21\u5f0f\uff1a \u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 Type-C\u6570\u636e\u7ebf\u4e00\u7aef\u8fde\u63a5\u4e3b\u673a\uff0c\u4e00\u7aef\u8fde\u63a5GW3399 \u6309\u4f4f\u8bbe\u5907\u4e0a\u7684REC\u952e\u5e76\u4fdd\u6301 \u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 \u5927\u7ea6\u4e09\u79d2\u949f\u540e\uff0c\u677e\u5f00REC\u952e \u5728Tools\u4e0b\uff0c\u627e\u5230Linux_Upgrade_Tool.tar.gz\uff0c\u590d\u5236\u5230Linux\u865a\u62df\u673a\u4e2d\uff0c\u7136\u540e\u518dLinux\u865a\u62df\u673a\u4e2d\u89e3\u538b\uff1a $ mkdir ~/mysdk $ sudo tar -xvzf Linux_Upgrade_Tool.tar.gz ~/mysdk #\u89e3\u538b\u5237\u673a\u5de5\u5177 3.1 \u70e7\u5199\u7edf\u4e00\u56fa\u4ef6update.img \u5c06\u7edf\u4e00\u56fa\u4ef6\u590d\u5236\u5230Linux\u865a\u62df\u673a\u4e2d\uff0c\u7136\u540e\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5f00\u59cb\u5347\u7ea7\u56fa\u4ef6\u3002\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5237\u673a\u5b8c\u6210\uff0c\u8bbe\u5907\u81ea\u52a8\u91cd\u542f\u3002 $ sudo ./upgrade_tool uf ../update.img #\u70e7\u5199\u7edf\u4e00\u56fa\u4ef6 \u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5148\u64e6\u9664\u540e\u518d\u5347\u7ea7\u3002 # \u64e6\u9664flash \u4f7f\u7528ef\u53c2\u6570\u9700\u8981\u6307\u5b9aloader\u6587\u4ef6\u6216\u8005\u5bf9\u5e94\u7684update.img $ sudo ./upgrade_tool ef ../update.img #update.img :\u4f60\u9700\u8981\u70e7\u5199\u7684ubuntu\u56fa\u4ef6 # \u91cd\u65b0\u70e7\u5199 $ sudo ./upgrade_tool uf ../update.img 3.2 \u70e7\u5199\u5206\u7acb\u56fa\u4ef6\uff1aUbuntu(GPT) \u5c06\u8981\u70e7\u5199\u7684\u5206\u533a\u955c\u50cf\u590d\u5236\u5230\\textasciitilde/mysdk/\u4e0b\uff0c\u7136\u540e\u9009\u62e9\u4e0b\u5217\u6307\u4ee4\u4e2d\u7684\u4e00\u6761\u6216\u51e0\u6761\uff0c\u70e7\u5199\u5206\u7acb\u56fa\u4ef6\uff1a $ sudo ./upgrade_tool ul ../MiniLoaderAll.bin #\u70e7\u5199Loader $ sudo ./upgrade_tool di -p ../parameter.txt #\u70e7\u5199parameter $ sudo ./upgrade_tool di -uboot ../uboot.img #\u70e7\u5199U-Boot $ sudo ./upgrade_tool di -trust ../trust.img #\u70e7\u5199trust $ sudo ./upgrade_tool di -b ../boot.img #\u70e7\u5199Linux\u5185\u6838 $ sudo ./upgrade_tool di -rootfs ../rootfs.img #\u70e7\u5199Ubuntu\u6587\u4ef6\u7cfb\u7edf \u5982\u679c\u56e0 flash \u95ee\u9898\u5bfc\u81f4\u5347\u7ea7\u65f6\u51fa\u9519\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f4e\u7ea7\u683c\u5f0f\u5316\u3001\u64e6\u9664 nand flash\uff1a $ sudo upgrade_tool lf update.img #\u4f4e\u7ea7\u683c\u5f0f\u5316 $ sudo upgrade_tool ef update.img #\u64e6\u9664","title":"\u7cfb\u7edf\u56fa\u4ef6\u66f4\u65b0"},{"location":"GW3399/part4/#_1","text":"\u56fa\u4ef6\u6587\u4ef6\u4e00\u822c\u6709\u4e24\u79cd\uff1a \u56fa\u4ef6\u6587\u4ef6\u7c7b\u578b \u8bf4\u660e \u7edf\u4e00\u56fa\u4ef6 update.img, \u5c06\u542f\u52a8\u52a0\u8f7d\u5668\u3001\u53c2\u6570\u548c\u6240\u6709\u5206\u533a\u955c\u50cf\u90fd\u6253\u5305\u5230\u4e00\u8d77\uff0c\u7528\u4e8e\u56fa\u4ef6\u53d1\u5e03\u3002 \u5206\u7acb\u56fa\u4ef6 \u5982uboot.img, trust.img, boot.img \u7b49\uff0c\u5728\u5f00\u53d1\u9636\u6bb5\u751f\u6210\u3002 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u901a\u8fc7Windows\u4e3b\u673a\uff0c\u4e3aGW3399\u66f4\u65b0\u7cfb\u7edf\u56fa\u4ef6\u3002\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\uff1aWindows XP/\u215e/10\uff0832/64\u4f4d\uff09\uff0cLinux\uff0832/64\u4f4d\uff09\u3002 \u7cfb\u7edf\u56fa\u4ef6\u66f4\u65b0\u6709\u4e09\u79cd\u65b9\u6cd5\uff1a \u5236\u4f5cSD\u5361\u542f\u52a8\u76d8 Windows\u73af\u5883\u4e0b\u66f4\u65b0SD\u5361\u56fa\u4ef6 Linux\u73af\u5883\u4e0b\u66f4\u65b0SD\u5361\u56fa\u4ef6 \u7b2c\u4e00\u79cd\u65b9\u6cd5\u9700\u8981\u4f7f\u7528SD\u5361\u8bfb\u5361\u5668\uff0c\u5c06SD\u5361\u63d2\u5230\u7535\u8111\u4e2d\uff0c\u5bf9SD\u5361\u8fdb\u884c\u70e7\u5199\u3002\u540e\u4e24\u79cd\u65b9\u6cd5\u53ea\u9700\u8981\u5c06SD\u5361\u63d2\u5230RK3399\u5f00\u53d1\u677f\u4e2d\uff0c\u901a\u8fc7Type-C\u8fde\u63a5\u7ebf\u8fde\u63a5\u7535\u8111\uff0c\u5373\u53ef\u4ee5\u5728windows/linux\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6\u3002","title":"\u7cfb\u7edf\u56fa\u4ef6\u66f4\u65b0"},{"location":"GW3399/part4/#1-sd","text":"\u9996\u5148\uff0c\u5c06SD\u5361\u63d2\u5165\u8bfb\u5361\u5668\uff0c\u8fde\u63a5\u5230PC\u3002 \u6253\u5f00\u5b9e\u9a8c\u5305\u7684Tools\u6587\u4ef6\u5939\uff0c\u8fd0\u884cSDDiskTool_v1.56\u4e2d\u7684SD_Firmware_Tool.exe\uff0c\u9009\u4e2dSD\u5361\u540e\uff0c\u70b9\u51fb\u201c\u9009\u62e9\u56fa\u4ef6\u201d\u6309\u94ae\uff0c\u9009\u62e9Ubuntu\u6587\u4ef6\u5939\u7684update-MiniLinux.img\uff1a \u9009\u62e9\u201c\u56fa\u4ef6\u5347\u7ea7\u201d\uff0c\u70b9\u51fb\u201c\u5f00\u59cb\u521b\u5efa\u201d\uff1a \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u63d0\u793a\u201c\u5199\u5165MBR\u5931\u8d25\u201d\uff0c\u8fd9\u662f\u6b63\u5e38\u7684\uff0c\u70b9\u51fb\u786e\u5b9a\u7ee7\u7eed\u4e0b\u4e00\u6b65\uff1a \u9009\u62e9\u201cSD\u542f\u52a8\u201d\uff0c\u518d\u6b21\u70b9\u51fb\u201c\u5f00\u59cb\u521b\u5efa\u201d\uff1a \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u63d0\u793a\u201c\u521b\u5efa\u5347\u7ea7\u78c1\u76d8\u6210\u529f\u201d\uff0c\u8bf4\u660eSD\u5361\u542f\u52a8\u76d8\u5236\u4f5c\u6210\u529f\uff1a SD\u5361\u542f\u52a8\u76d8\u5236\u4f5c\u5b8c\u6210\u540e\u5373\u53ef\u63d2\u5165RK3399\u5f00\u53d1\u677f\u4e2d\u4f7f\u7528\u3002","title":"1.  \u5236\u4f5cSD\u5361\u542f\u52a8\u76d8"},{"location":"GW3399/part4/#2-windows","text":"","title":"2.  Windows\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6"},{"location":"GW3399/part4/#21-rk-usb","text":"\u6253\u5f00\u5b9e\u9a8c\u5305\u4e2d\u7684Tools\u6587\u4ef6\u5939\uff0c\u627e\u5230DriverAssitant_v4.5\uff0c\u7136\u540e\u8fd0\u884c\u91cc\u9762\u7684DriverInstall.exe\u3002\u4e3a\u4e86\u6240\u6709\u8bbe\u5907\u90fd\u4f7f\u7528\u66f4\u65b0\u7684\u9a71\u52a8\uff0c\u8bf7\u5148\u9009\u62e9\u201c\u9a71\u52a8\u5378\u8f7d\u201d\uff0c\u7136\u540e\u518d\u9009\u62e9\u201c\u9a71\u52a8\u5b89\u88c5\u201d\u3002","title":"2.1  \u5b89\u88c5RK USB\u9a71\u52a8"},{"location":"GW3399/part4/#22","text":"\u9996\u5148\uff0c\u5c06SD\u5361\u542f\u52a8\u76d8\u63d2\u5165GW3399\uff0c\u7136\u540e\uff0c\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u53ef\u4ee5\u4f7f\u8bbe\u5907\u8fdb\u5165\u5347\u7ea7\u6a21\u5f0f\uff1a \u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 Type-C\u6570\u636e\u7ebf\u4e00\u7aef\u8fde\u63a5\u4e3b\u673a\uff0c\u4e00\u7aef\u8fde\u63a5GW3399 \u6309\u4f4f\u8bbe\u5907\u4e0a\u7684REC\u952e\u5e76\u4fdd\u6301 \u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 \u5927\u7ea6\u4e09\u79d2\u949f\u540e\uff0c\u677e\u5f00REC\u952e \u4e3b\u673a\u4f1a\u63d0\u793a\u53d1\u73b0\u65b0\u786c\u4ef6\u5e76\u914d\u7f6e\u9a71\u52a8\u3002\u6253\u5f00\u8bbe\u5907\u7ba1\u7406\u5668\uff0c\u4f1a\u89c1\u5230\u65b0\u8bbe\u5907\u201cRockusb Device\u201d \u51fa\u73b0\uff0c\u5982\u4e0b\u56fe\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u9700\u8981\u8fd4\u56de\u4e0a\u4e00\u6b65\u91cd\u65b0\u5b89\u88c5\u9a71\u52a8\u3002","title":"2.2  \u8fde\u63a5\u8bbe\u5907"},{"location":"GW3399/part4/#23","text":"\u6253\u5f00\u5b9e\u9a8c\u5305\u7684Tools\u6587\u4ef6\u5939\uff0c\u9009\u62e9AndroidTool_Release\uff0c\u7136\u540e\u8fd0\u884c\u91cc\u9762\u7684AndroidTool.exe\u3002 \u66f4\u65b0\u65b9\u5f0f\u6709\u4e24\u79cd\uff0c\u53ef\u4ee5\u70e7\u5199\u7edf\u4e00\u56fa\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u53ea\u70e7\u5199\u90e8\u5206\u5206\u533a\u6620\u50cf\u3002 \u70e7\u5199\u7edf\u4e00\u56fa\u4ef6update.img \u70e7\u5199\u7edf\u4e00\u56fa\u4ef6\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a \u5207\u6362\u81f3\u201c\u5347\u7ea7\u56fa\u4ef6\u201d\u9875 \u6309\u201c\u56fa\u4ef6\u201d\u6309\u94ae\uff0c\u6253\u5f00\u8981\u5347\u7ea7\u7684\u56fa\u4ef6\u6587\u4ef6\u3002\u5347\u7ea7\u5de5\u5177\u4f1a\u663e\u793a\u8be6\u7ec6\u7684\u56fa\u4ef6\u4fe1\u606f \u6309\u201c\u5347\u7ea7\u201d\u6309\u94ae\u5f00\u59cb\u5347\u7ea7 \u5347\u7ea7\u5b8c\u6210\u540e\uff0c\u63d0\u793a\u4fe1\u606f\u5982\u4e0b\u56fe\uff0c\u7cfb\u7edf\u81ea\u52a8\u91cd\u542f\u3002 \u6ce8\u610f\uff1a\u63d2SD\u5361\u65f6\uff0c\u4e00\u5b9a\u4e0d\u80fd\u70b9\u51fb\u201c\u64e6\u9664Flash\u201d\u6309\u94ae\uff01\u5426\u5219\u4f1a\u51fa\u4e00\u7cfb\u5217\u9519\u8bef\uff0c\u5e76\u4e14\u8981\u91cd\u65b0\u6309\u201c\u5236\u4f5cSD\u5361\u542f\u52a8\u76d8\u201d\u6b65\u9aa4\u5236\u4f5cSD\u5361\u542f\u52a8\u76d8\u3002 \u70e7\u5199\u5206\u533a\u6620\u50cf \u70e7\u5199\u5206\u533a\u6620\u50cf\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a \u5207\u6362\u81f3\u201c\u4e0b\u8f7d\u955c\u50cf\u201d\u9875 \u52fe\u9009\u9700\u8981\u70e7\u5f55\u7684\u5206\u533a\uff0c\u53ef\u4ee5\u591a\u9009 \u786e\u4fdd\u6620\u50cf\u6587\u4ef6\u7684\u8def\u5f84\u6b63\u786e\uff0c\u9700\u8981\u7684\u8bdd\uff0c\u70b9\u8def\u5f84\u53f3\u8fb9\u7684\u7a7a\u767d\u8868\u683c\u5355\u5143\u683c\u6765\u91cd\u65b0\u9009\u62e9 \u70b9\u51fb\u201c\u6267\u884c\u201d\u6309\u94ae\u5f00\u59cb\u5347\u7ea7\uff0c\u5347\u7ea7\u7ed3\u675f\u540e\u8bbe\u5907\u4f1a\u81ea\u52a8\u91cd\u542f \u6ce8\u610f\uff1a\u8981\u66f4\u65b0rootfs\u65f6\uff0c\u5fc5\u987b\u540c\u65f6\u66f4\u65b0parameter\uff0c\u5426\u5219\u6709\u53ef\u80fd\u51fa\u73b0\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u4e0d\u4e0a\u3001\u65e0\u6cd5\u542f\u52a8\u7684\u95ee\u9898\u3002 \u7b2c\u4e00\u6b21\u70e7\u5199\u5206\u533a\u6620\u50cf\u5230SD\u5361\u65f6\uff0c\u5efa\u8bae\u70e7\u5199\u5168\u90e86\u4e2a\u5206\u533a\u6620\u50cf\u3002","title":"2.3  \u66f4\u65b0\u7cfb\u7edf"},{"location":"GW3399/part4/#3-linux","text":"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u4f7f\u7528Windows\u4e3b\u673a\uff0c\u4e3aGW3399\u66f4\u65b0\u7cfb\u7edf\u56fa\u4ef6\u3002\u8fd9\u91cc\u4ec5\u5bf9Linux\u4e0b\u66f4\u65b0\u56fa\u4ef6\u7684\u65b9\u6cd5\u505a\u7b80\u5355\u7684\u8bf4\u660e\u3002 Linux \u4e0b\u65e0\u987b\u5b89\u88c5\u8bbe\u5907\u9a71\u52a8\u3002\u6309\u7167\u4ee5\u4e0b\u64cd\u4f5c\u8ba9\u8bbe\u5907\u8fdb\u5165Loader\u6a21\u5f0f\uff0c\u518d\u6309\u4e0b\u56fe\u5c06Rockchip USB\u5206\u914d\u5230\u865a\u62df\u673a \u63a5\u7740\u91cd\u65b0\u8ba9\u8bbe\u5907\u8fdb\u5165Loader\u6a21\u5f0f\uff1a \u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 Type-C\u6570\u636e\u7ebf\u4e00\u7aef\u8fde\u63a5\u4e3b\u673a\uff0c\u4e00\u7aef\u8fde\u63a5GW3399 \u6309\u4f4f\u8bbe\u5907\u4e0a\u7684REC\u952e\u5e76\u4fdd\u6301 \u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09 \u5927\u7ea6\u4e09\u79d2\u949f\u540e\uff0c\u677e\u5f00REC\u952e \u5728Tools\u4e0b\uff0c\u627e\u5230Linux_Upgrade_Tool.tar.gz\uff0c\u590d\u5236\u5230Linux\u865a\u62df\u673a\u4e2d\uff0c\u7136\u540e\u518dLinux\u865a\u62df\u673a\u4e2d\u89e3\u538b\uff1a $ mkdir ~/mysdk $ sudo tar -xvzf Linux_Upgrade_Tool.tar.gz ~/mysdk #\u89e3\u538b\u5237\u673a\u5de5\u5177","title":"3.  Linux\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6"},{"location":"GW3399/part4/#31-updateimg","text":"\u5c06\u7edf\u4e00\u56fa\u4ef6\u590d\u5236\u5230Linux\u865a\u62df\u673a\u4e2d\uff0c\u7136\u540e\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5f00\u59cb\u5347\u7ea7\u56fa\u4ef6\u3002\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5237\u673a\u5b8c\u6210\uff0c\u8bbe\u5907\u81ea\u52a8\u91cd\u542f\u3002 $ sudo ./upgrade_tool uf ../update.img #\u70e7\u5199\u7edf\u4e00\u56fa\u4ef6 \u5982\u679c\u5347\u7ea7\u5931\u8d25\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5148\u64e6\u9664\u540e\u518d\u5347\u7ea7\u3002 # \u64e6\u9664flash \u4f7f\u7528ef\u53c2\u6570\u9700\u8981\u6307\u5b9aloader\u6587\u4ef6\u6216\u8005\u5bf9\u5e94\u7684update.img $ sudo ./upgrade_tool ef ../update.img #update.img :\u4f60\u9700\u8981\u70e7\u5199\u7684ubuntu\u56fa\u4ef6 # \u91cd\u65b0\u70e7\u5199 $ sudo ./upgrade_tool uf ../update.img","title":"3.1  \u70e7\u5199\u7edf\u4e00\u56fa\u4ef6update.img"},{"location":"GW3399/part4/#32-ubuntugpt","text":"\u5c06\u8981\u70e7\u5199\u7684\u5206\u533a\u955c\u50cf\u590d\u5236\u5230\\textasciitilde/mysdk/\u4e0b\uff0c\u7136\u540e\u9009\u62e9\u4e0b\u5217\u6307\u4ee4\u4e2d\u7684\u4e00\u6761\u6216\u51e0\u6761\uff0c\u70e7\u5199\u5206\u7acb\u56fa\u4ef6\uff1a $ sudo ./upgrade_tool ul ../MiniLoaderAll.bin #\u70e7\u5199Loader $ sudo ./upgrade_tool di -p ../parameter.txt #\u70e7\u5199parameter $ sudo ./upgrade_tool di -uboot ../uboot.img #\u70e7\u5199U-Boot $ sudo ./upgrade_tool di -trust ../trust.img #\u70e7\u5199trust $ sudo ./upgrade_tool di -b ../boot.img #\u70e7\u5199Linux\u5185\u6838 $ sudo ./upgrade_tool di -rootfs ../rootfs.img #\u70e7\u5199Ubuntu\u6587\u4ef6\u7cfb\u7edf \u5982\u679c\u56e0 flash \u95ee\u9898\u5bfc\u81f4\u5347\u7ea7\u65f6\u51fa\u9519\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f4e\u7ea7\u683c\u5f0f\u5316\u3001\u64e6\u9664 nand flash\uff1a $ sudo upgrade_tool lf update.img #\u4f4e\u7ea7\u683c\u5f0f\u5316 $ sudo upgrade_tool ef update.img #\u64e6\u9664","title":"3.2  \u70e7\u5199\u5206\u7acb\u56fa\u4ef6\uff1aUbuntu(GPT)"},{"location":"lab1/overview/","text":"\u5b9e\u9a8c\u6982\u8ff0 \u5b9e\u9a8c\u76ee\u7684 \u2003\u20031. \u638c\u63e1uboot\u3001kernel\u3001rootfs\u7684\u914d\u7f6e\u4e0e\u7f16\u8bd1 \u2003\u20032. \u638c\u63e1\u56fa\u4ef6\u6253\u5305\u65b9\u6cd5 \u5b9e\u9a8c\u5185\u5bb9 \u2003\u2003\u4ece\u5b9e\u9a8c\u5305\u4e2d\u83b7\u53d6\u7cfb\u7edfSDK\uff0c\u642d\u5efa\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883\uff0c\u7f16\u8bd1uboot\u3001kernel\u548crootfs\uff0c\u5c06\u751f\u6210\u7684\u56fa\u4ef6\u6253\u5305\uff0c\u70e7\u5f55\u5230GW3399\u5f00\u53d1\u677f\u4e2d\u3002 \u5b9e\u9a8c\u73af\u5883 \u786c\u4ef6\u73af\u5883 PC\u673aPentium\u5904\u7406\u5668\u53cc\u68382GHz\u4ee5\u4e0a\uff0c\u5185\u5b588GB\u4ee5\u4e0a \u64cd\u4f5c\u7cfb\u7edf Windows7 64\u4f4d\u53ca\u4ee5\u4e0a\u64cd\u4f5c\u7cfb\u7edf \u5b9e\u9a8c\u5668\u6750 GW3399\u5b9e\u9a8c\u5e73\u53f0","title":"\u5b9e\u9a8c\u6982\u8ff0"},{"location":"lab1/overview/#_1","text":"","title":"\u5b9e\u9a8c\u6982\u8ff0"},{"location":"lab1/overview/#_2","text":"1. \u638c\u63e1uboot\u3001kernel\u3001rootfs\u7684\u914d\u7f6e\u4e0e\u7f16\u8bd1 \u2003\u20032. \u638c\u63e1\u56fa\u4ef6\u6253\u5305\u65b9\u6cd5","title":"\u5b9e\u9a8c\u76ee\u7684"},{"location":"lab1/overview/#_3","text":"\u4ece\u5b9e\u9a8c\u5305\u4e2d\u83b7\u53d6\u7cfb\u7edfSDK\uff0c\u642d\u5efa\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883\uff0c\u7f16\u8bd1uboot\u3001kernel\u548crootfs\uff0c\u5c06\u751f\u6210\u7684\u56fa\u4ef6\u6253\u5305\uff0c\u70e7\u5f55\u5230GW3399\u5f00\u53d1\u677f\u4e2d\u3002","title":"\u5b9e\u9a8c\u5185\u5bb9"},{"location":"lab1/overview/#_4","text":"\u786c\u4ef6\u73af\u5883 PC\u673aPentium\u5904\u7406\u5668\u53cc\u68382GHz\u4ee5\u4e0a\uff0c\u5185\u5b588GB\u4ee5\u4e0a \u64cd\u4f5c\u7cfb\u7edf Windows7 64\u4f4d\u53ca\u4ee5\u4e0a\u64cd\u4f5c\u7cfb\u7edf \u5b9e\u9a8c\u5668\u6750 GW3399\u5b9e\u9a8c\u5e73\u53f0","title":"\u5b9e\u9a8c\u73af\u5883"},{"location":"lab1/step/","text":"\u5b9e\u9a8c\u6b65\u9aa4 1. \u5bfc\u5165\u865a\u62df\u673a \u2003\u2003\u672c\u5b9e\u9a8c\u63d0\u4f9b\u5df2\u5b89\u88c5\u597d\u5b9e\u9a8c\u73af\u5883\u7684Ubuntu20.04\u865a\u62df\u673a\u3002\u5b9e\u9a8c\u5f00\u59cb\u524d\uff0c\u9700\u8981\u5728VirtualBox\u4e2d\u5bfc\u5165\u865a\u62df\u673a\u955c\u50cf\u3002 \u2003\u2003\u9996\u5148\uff0c\u4e0b\u8f7d\u5e76\u5b89\u88c5VirtualBox\u53caVirtualBox\u7684\u6269\u5c55\u5305\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u6253\u5f00VirtualBox\u3002 \u2003\u2003\u7136\u540e\uff0c\u6309\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u4f9d\u6b21\u70b9\u51fb\u76f8\u5e94\u7684\u6309\u94ae\u4ee5\u5bfc\u5165\u865a\u62df\u673a\u3002 \u2003\u2003\u70b9\u51fb\u201c\u6253\u5f00\u201d\u6309\u94ae\u540e\uff0c\u68c0\u67e5\u4e0b\u56fe\u6240\u793a\u7684\u8bbe\u7f6e\u662f\u5426\u4e0e\u7269\u7406\u673a\u517c\u5bb9\u3002\u5982\u679c\u51fa\u73b0\u4e0d\u517c\u5bb9\uff0c\u9700\u6839\u636e\u7269\u7406\u673a\u7684\u914d\u7f6e\u8fdb\u884c\u76f8\u5e94\u7684\u4fee\u6539\u3002 \u2003\u2003\u68c0\u67e5\u65e0\u8bef\u540e\uff0c\u70b9\u51fb\u7a97\u53e3\u53f3\u4e0b\u65b9\u7684\u201c\u5bfc\u5165\u201d\u6309\u94ae\uff0c\u8010\u5fc3\u7b49\u5f85\u865a\u62df\u673a\u5bfc\u5165\u5b8c\u6210\u3002 2. \u83b7\u53d6\u7cfb\u7edfsdk \u2003\u2003\u9996\u5148\uff0c\u5728Ubuntu\u7cfb\u7edf\u4e2d/home/embsys\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa\u6587\u4ef6\u5939mysdk\uff0c\u7136\u540e\u5728\u5b9e\u9a8c\u5305\u91cc\u7684gw3399-linux\u76ee\u5f55\u4e0b\uff0c\u590d\u5236gw3399-linux.tar.gz\uff08\u5305\u542buboot\u3001kernel\uff09\u548cpatch.tar.gz\u5230/home/embsys/mysdk\u76ee\u5f55\u4e0b\u3002 \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u901a\u8fc7tar\u6307\u4ee4\u89e3\u538bsdk\u5305\uff1a $ cd ~/mysdk $ sudo tar -xvf gw3399-linux.tar.gz \u2003\u2003\u7b49\u5f85\u89e3\u538b\u5b8c\u6210\u540e\uff0c\u901a\u8fc7ls\u547d\u4ee4\uff0c\u53ef\u770b\u5230mysdk\u76ee\u5f55\u4e0b\u591a\u4e86\u4e00\u4e2agw3399-linux\u76ee\u5f55\u3002 \u2003\u2003\u63a5\u7740\uff0c\u7ed9sdk\u6253\u4e0apatch.tar.gz\u7684\u8865\u4e01\u5305\uff1a $ cp patch.tar.gz gw3399-linux # \u590d\u5236\u8865\u4e01\u5305\u5230Linux SDK\u6839\u76ee\u5f55\u4e0b $ cd gw3399-linux # \u5207\u6362\u5230Linux SDK\u6839\u76ee\u5f55 $ sudo tar -xvf patch.tar.gz # \u89e3\u538b\u8865\u4e01\u5305\uff0c\u8986\u76d6\u4e4b\u524d\u7684\u6e90\u7801 $ sudo rm patch.tar.gz # \u5220\u9664\u8865\u4e01\u5305 3. \u7f16\u8bd1U-Boot \u2003\u2003\u9996\u5148\uff0c\u8bbe\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u5668\u73af\u5883\u53d8\u91cf\uff1a $ cd ~/mysdk/gw3399-linux/ $ export PATH = $PATH :~/mysdk/gw3399-linux/prebuilts/gcc/linux-x86/aarch64/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \u2003\u2003\u6ce8\u610f\uff0c\u4e0a\u8ff0\u8bbe\u7f6e\u4ec5\u5bf9\u5f53\u524d\u6253\u5f00\u7684\u7ec8\u7aef\u6709\u6548\u3002\u5982\u679c\u4e0d\u60f3\u6bcf\u6b21\u6253\u5f00\u7ec8\u7aef\u90fd\u8f93\u4e00\u904d\u4e0a\u8ff0\u547d\u4ee4\uff0c\u53ef\u5c06\u4ea4\u53c9\u7f16\u8bd1\u5668\u7684\u8def\u5f84\u6dfb\u52a0\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\u3002 \u2003\u2003\u7136\u540e\uff0c\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u914d\u7f6e\u7f16\u8bd1U-Boot\uff1a $ cd ./u-boot $ make gw3399_defconfig # \u5199\u5165\u9ed8\u8ba4\u914d\u7f6e $ make CROSS_COMPILE = aarch64-linux-gnu- # \u5f00\u59cb\u7f16\u8bd1 \u2003\u2003\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u7f16\u8bd1\u5b8c\u6210\uff0c\u751f\u6210u-boot.img\uff1a \u2003\u2003\u4f46\u8fd9\u4e2au-boot.img\u5e76\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u6253\u5305\u751f\u6210rk\u517c\u5bb9\u7684u-boot\u6587\u4ef6\uff1a $ ../rkbin/tools/loaderimage --pack --uboot u-boot.bin uboot.img 0x00200000 \u2003\u2003\u8fd9\u6837\u751f\u6210\u7684uboot.img\uff08\u6ce8\u610f\uff1au\u548cboot\u4e2d\u95f4\u6ca1\u6709\u6a2a\u6760-\uff09\uff0c\u624d\u662f\u53ef\u4ee5\u66f4\u65b0\u5230GW3399\u4e2d\u7684U-Boot\u56fa\u4ef6\u3002 \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u6253\u5305\u751f\u6210*_loader_*.bin\u548ctrust.img\uff1a $ cd ../rkbin $ ./tools/boot_merger --replace tools/rk_tools/ ./ ./RKBOOT/RK3399MINIALL.ini $ sudo mv *_loader_*.bin ../u-boot/ #\u5c06\u751f\u6210\u7684bin\u6587\u4ef6\u79fb\u52a8\u5230u-boot\u76ee\u5f55 $ tools/trust_merger --replace tools/rk_tools/ ./ RKTRUST/RK3399TRUST.ini #\u751f\u6210trust.img $ sudo mv trust.img ../u-boot/ #\u5c06\u751f\u6210\u7684trust.img\u79fb\u52a8\u5230u-boot\u76ee\u5f55 \u2003\u2003\u6700\u540e\uff0c\u5c06\u8fd9\u4e09\u4e2a\u6709\u6548\u955c\u50cf\u6587\u4ef6\u590d\u5236\u5230\u8f93\u51fa\u76ee\u5f55\uff08output\u76ee\u5f55\uff09\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ cd ../u-boot/ $ sudo cp -v ./*_loader_*.bin ../output/MiniLoaderAll.bin $ sudo cp -v ./uboot.img ../output/ $ sudo cp -v ./trust.img ../output/ $ make clean \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0c\u901a\u8fc7\u7f16\u8bd1U-Boot\uff0c\u5c06\u4e09\u4e2a\u53ef\u4ee5\u70e7\u5199\u5230GW3399\u7684\u5206\u533a\u6620\u50cf\uff08uboot.img\uff0ctrust.img\uff0cMiniLoaderAll.bin\uff09\u8f93\u51fa\u5230\u4e86output\u76ee\u5f55\uff1a $ cd ../output/ $ ls 4. \u7f16\u8bd1Linux\u5185\u6838 \u2003\u2003\u7f16\u8bd1Linux\u5185\u6838\u7684\u65b9\u6cd5\u548c\u7f16\u8bd1U-Boot\u7c7b\u4f3c\uff0c\u5e76\u4e14\u8fc7\u7a0b\u66f4\u4e3a\u7b80\u6377\u3002 \u2003\u2003\u9996\u5148\uff0c\u8bbe\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u5668\u73af\u5883\u53d8\u91cf\uff1a $ cd ~/mysdk/gw3399-linux/ $ export PATH = $PATH :~/mysdk/gw3399-linux/prebuilts/gcc/linux-x86/aarch64/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \u2003\u2003\u7136\u540e\uff0c\u914d\u7f6e\u7f16\u8bd1Linux\u5185\u6838\uff1a $ cd ./kernel/ $ make ARCH = arm64 gw3399_linux_defconfig #\u5199\u5165\u9ed8\u8ba4\u914d\u7f6e $ make ARCH = arm64 CROSS_COMPILE = aarch64-linux-gnu- #\u5f00\u59cb\u7f16\u8bd1 #\u7f16\u8bd1\u5185\u6838\u8bbe\u5907\u6811\u5e76\u751f\u6210boot.img $ make ARCH = arm64 gw3399-linux.img CROSS_COMPILE = aarch64-linux-gnu- \u2003\u2003\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u7f16\u8bd1\u5b8c\u6210\uff0c\u751f\u6210boot.img\uff1a \u2003\u2003\u6700\u540e\uff0c\u5c06\u8fd9\u4e2aboot.img\u590d\u5236\u5230\u8f93\u51fa\u76ee\u5f55\uff08output\u76ee\u5f55\uff09\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp -v ./boot.img ../output/ $ make clean \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0c\u901a\u8fc7\u7f16\u8bd1Linux\u5185\u6838\uff0c\u5c06\u4e00\u4e2a\u53ef\u4ee5\u70e7\u5199\u5230GW3399\u7684\u5206\u533a\u6620\u50cf\uff08boot.img\uff09\u8f93\u51fa\u5230\u4e86output\u76ee\u5f55\uff1a 5. Ubuntu\u6587\u4ef6\u7cfb\u7edf\u5236\u4f5c \u2003\u2003\u672c\u8282\u8bb2\u89e3\u4ece\u5b98\u7f51\u4e0b\u8f7d\u7eaf\u51c0\u7248Ubuntu\u6838\u5fc3\uff0c\u5728ARM64 AARCH64\u4e0a\u6784\u5efa\u6700\u5c0f\u7684Ubuntu\u6587\u4ef6\u7cfb\u7edf\u7684\u65b9\u6cd5\u3002\u672c\u8282\u53ea\u662f\u8bb2\u8ff0\u6587\u4ef6\u7cfb\u7edf\u7684\u5236\u4f5c\u65b9\u6cd5\uff0c\u5236\u4f5c\u51fa\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u4e0d\u5e26\u684c\u9762\u7684\uff0c\u53ea\u80fd\u901a\u8fc7\u4e32\u53e3\u8bbf\u95ee\u3002\u5e26\u684c\u9762\u7684\u6587\u4ef6\u7cfb\u7edf\uff08\u51fa\u5382\u955c\u50cf\uff09\u5236\u4f5c\u65b9\u6cd5\u4e0e\u672c\u8282\u5b8c\u5168\u76f8\u540c\uff0c\u53ea\u662f\u9700\u8981\u5b89\u88c5\u684c\u9762\u3001\u5404\u79cd\u8f6f\u4ef6\u5305\uff0c\u751f\u6210\u7684\u6587\u4ef6\u7cfb\u7edf\u8f83\u5927\u3002 \u2003\u2003\u9996\u5148\uff0c\u5728~/mysdk\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efarootfs\u76ee\u5f55\u3002\u4ece\u5b9e\u9a8c\u5305\u7684rootfs\u6587\u4ef6\u5939\u4e2d\uff0c\u5c06ch-mount.sh\u548cubuntu-base-16.04.2-base-arm64.tar.gz\uff08\u5b98\u65b9Ubuntu\u6838\u5fc3\uff09\u590d\u5236\u5230rootfs\u76ee\u5f55\u4e0b\u3002\u590d\u5236\u65b9\u6cd5\u53ef\u53c2\u7167MobaXterm \u8fdc\u7a0b\u767b\u5f55\u5de5\u5177MobaXterm \u4e2d\u7684\u6587\u4ef6\u4f20\u8f93SFTP\u670d\u52a1\u3002 \u2003\u2003\u5728rootfs\u76ee\u5f55\u4e2d\u521b\u5efa\u65b0\u76ee\u5f55ubuntu-rootfs\uff0c\u5c06\u538b\u7f29\u5305\u901a\u8fc7tar\u6307\u4ee4\u89e3\u538b\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u3002\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u89e3\u538b\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7ls\u547d\u4ee4\uff0c\u770b\u5230ubuntu-rootfs\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u7ed3\u6784\u5df2\u7ecf\u5b8c\u6210\uff1a $ cd ~/mysdk $ mkdir rootfs $ cd ./rootfs/ $ sudo mkdir ubuntu-rootfs $ sudo tar -xvf ubuntu-base-16.04.2-base-arm64.tar.gz -C ubuntu-rootfs $ cd ./ubuntu-rootfs/ $ ls \u2003\u2003\u63a5\u7740\uff0c\u4f7f\u7528qemu\u5728X86\u73af\u5883\u4e0b\u6784\u5efa\u51faarm\u865a\u62df\u673a\uff0c\u53ef\u4ee5\u6a21\u62dfarm\u73af\u5883\u8fdb\u884c\u5f00\u53d1\uff0c\u5728arm linux\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5b89\u88c5\u76f8\u5e94\u7684\u5e93\u6587\u4ef6\uff0c\u7f16\u8bd1arm\u7248\u672c\u7b49\u3002 \u2003\u2003\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5b89\u88c5qemu-user-static\uff0c\u642d\u5efaarm64\u6a21\u62df\u73af\u5883\uff1a $ sudo apt-get install qemu-user-static $ sudo cp /usr/bin/qemu-aarch64-static ./usr/bin $ sudo cp -b /etc/resolv.conf etc/ \u2003\u2003\u901a\u8fc7ch-mount.sh\u811a\u672c\uff0cchroot\u5230arm64\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0b\uff1a $ cd ../ $ chmod +x ch-mount.sh $ sudo ./ch-mount.sh -m ubuntu-rootfs/ \u2003\u2003\u5982\u56fe\uff0c\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u524d\u7f00\u53d8\u6210\u4e86root@ubuntu\uff0c\u8bf4\u660echroot\u6210\u529f\uff1a \u2003\u2003\u5b89\u88c5\u57fa\u7840\u8f6f\u4ef6\u5305\uff08\u8fd9\u4e00\u6b65\u9700\u8981\u7f51\u7edc\uff0c\u5982\u679c\u6ca1\u6709\u7f51\u7edc\u53ef\u4ee5\u8df3\u8fc7\uff09 \u2003\u2003\u5728\u66f4\u65b0\u8f6f\u4ef6\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u56fd\u5916\u6e90\u592a\u6162\u4e86\uff0c\u53ef\u4ee5\u4fee\u6539\u4e3a\u4e2d\u79d1\u5927\u6e90\uff0c\u4fee\u6539\u5982\u4e0b\uff1a $ cd /etc/apt $ echo \"deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-proposed main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-proposed main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main multiverse restricted universe \" > sources.list $ apt-get update #\u66f4\u65b0\u8f6f\u4ef6\u5217\u8868 $ apt-get install language-pack-en-base sudo net-tools ethtool wireless-tools network-manager iputils-ping rsyslog bash-completion \u2003\u2003\u8fd9\u4e00\u6b65\u4e2d\u5b89\u88c5\u4e86\u57fa\u7840\u8bed\u8a00\u5305\u3001sudo\u547d\u4ee4\u5305\u3001\u7f51\u7edc\u5de5\u5177\u5305\u3001tab\u952e\u547d\u4ee4\u8865\u5168\u5de5\u5177\u7b49\u6700\u5e38\u7528\u7684\u57fa\u7840\u8f6f\u4ef6\u5305\u3002\u5e26\u684c\u9762\u7684\u6587\u4ef6\u7cfb\u7edf\uff08\u51fa\u5382\u955c\u50cf\uff09\u5236\u4f5c\u8981\u5728\u8fd9\u4e00\u6b65\u5b89\u88c5\u684c\u9762\u548c\u5927\u91cf\u9644\u52a0\u8f6f\u4ef6\u5305\uff0c\u5176\u4f59\u6b65\u9aa4\u5b8c\u5168\u76f8\u540c\u3002 \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u8bbe\u7f6e\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u3001root\u5bc6\u7801\u548c\u4e3b\u673a\u540d\uff1a $ useradd -s '/bin/bash' -m -G adm,sudo zonesion #\u6dfb\u52a0\u7528\u6237zonesion $ passwd zonesion #\u8bbe\u7f6ezonesion\u7528\u6237\u5bc6\u7801 123456 #\u8f93\u5165\u5bc6\u7801 123456 #\u786e\u8ba4\u5bc6\u7801 $ passwd root #\u8bbe\u7f6eroot\u5bc6\u7801 123456 #\u8f93\u5165\u5bc6\u7801 123456 #\u786e\u8ba4\u5bc6\u7801 $ echo 'GW3399' > /etc/hostname #\u8bbe\u7f6e\u4e3b\u673a\u540d \u2003\u2003\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u9000\u51faarm64\u6a21\u62df\u6587\u4ef6\u7cfb\u7edf\uff1a $ exit #\u6ce8\u9500\u5f53\u524d\u7528\u6237 $ sudo ./ch-mount.sh -u ubuntu-rootfs/ #\u5378\u9664\u5f53\u524d\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf \u2003\u2003\u7136\u540e\uff0c\u521b\u5efa\u4f5c\u4e3arootfs\u56fa\u4ef6\u5bb9\u5668\u7684img\u6587\u4ef6\uff08\u6ce8\u610f\uff1a\u683c\u5f0f\u5316\u65f6\u9700\u8981\u8f93\u5165y\u56de\u8f66\uff09\uff1a $ sudo dd if = /dev/zero of = ubuntu-rootfs.img bs = 1M count = 1024 #\u5236\u4f5c\u7a7a\u7684\u56fa\u4ef6\u5bb9\u5668 $ sudo mkfs.ext4 ubuntu-rootfs.img #\u5c06img\u6587\u4ef6\u683c\u5f0f\u5316\u4e3aext4\u683c\u5f0f \u2003\u2003\u63a5\u7740\uff0c\u5c06arm64\u6587\u4ef6\u7cfb\u7edf\u5185\u5bb9\u5236\u4f5c\u5230ubuntu-rootfs.img\uff1a $ sudo mkdir ubuntu-mount #\u65b0\u5efa\u6302\u8f7d\u76ee\u5f55 $ sudo mount ubuntu-rootfs.img ubuntu-mount/ #\u5c06img\u6587\u4ef6\u6302\u8f7d\u5230\u6302\u8f7d\u76ee\u5f55 $ sudo cp -rfp ubuntu-rootfs/* ubuntu-mount/ #\u5c06\u8bbe\u7f6e\u597d\u7684\u6587\u4ef6\u7cfb\u7edf\u590d\u5236\u5230\u6302\u8f7d\u76ee\u5f55 $ sudo umount ubuntu-mount/ #\u5c06img\u6587\u4ef6\u4ece\u6302\u8f7d\u76ee\u5f55\u5378\u9664 $ sudo e2fsck -p -f ubuntu-rootfs.img #\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u662f\u5426\u6b63\u5e38 $ sudo resize2fs -M ubuntu-rootfs.img #\u5c06rootfs\u538b\u7f29\u5230\u7b26\u5408\u5176\u5360\u7528\u7a7a\u95f4\u7684\u5927\u5c0f \u2003\u2003\u6700\u540e\uff0c\u5c06\u5236\u4f5c\u5b8c\u6210\u7684ubuntu-rootfs.img\u590d\u5236\u5230\u8f93\u51fa\u76ee\u5f55\uff08output\u76ee\u5f55\uff09\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp -v ./ubuntu-rootfs.img ../gw3399-linux/output/rootfs.img $ cd ../ $ sudo rm -rf rootfs/ \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0c\u901a\u8fc7\u4e0a\u8ff0\u64cd\u4f5c\uff0c\u5c06\u53ef\u4ee5\u70e7\u5199\u5230GW3399\u7684Ubuntu\u6587\u4ef6\u7cfb\u7edf\uff08rootfs.img\uff09\u8f93\u51fa\u5230\u4e86output\u76ee\u5f55\uff1a $ cd ./gw3399-linux/output/ $ ls 6. \u7cfb\u7edf\u56fa\u4ef6\u6253\u5305 \u2003\u2003\u7531\u4e8e\u51fa\u5382\u955c\u50cf\u7684\u6587\u4ef6\u7cfb\u7edf\u8fc7\u4e8e\u5e9e\u5927\uff0c\u672c\u8282\u4ecd\u901a\u8fc7\u4e0a\u4e00\u8282\u751f\u6210\u7684\u6700\u5c0fUbuntu\u6587\u4ef6\u7cfb\u7edf\uff0c\u6765\u6f14\u793a\u7cfb\u7edf\u56fa\u4ef6\u6253\u5305\u65b9\u6cd5\u3002 \u2003\u2003\u9996\u5148\uff0c\u5728Windows\u4e3b\u673a\u7684D\u76d8\uff08\u6216\u5176\u4ed6\u6709\u8db3\u591f\u7a7a\u95f4\u7684\u78c1\u76d8\uff09\u6839\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaFirmWare\u6587\u4ef6\u5939\uff0c\u7136\u540e\u5728FirmWare\u6587\u4ef6\u5939\u4e0b\u65b0\u5efaImage\u6587\u4ef6\u5939\u3002 \u2003\u2003\u63a5\u7740\uff0c\u5c06\u4e4b\u524d\u751f\u6210\u76845\u4e2a\u56fa\u4ef6\uff0c\u4eceLinux\u865a\u62df\u673a\u7684output\u76ee\u5f55\u4e2d\u590d\u5236\u5230Image\u6587\u4ef6\u5939\u3002\u590d\u5236\u65b9\u6cd5\u53ef\u4f7f\u7528\u8fdc\u7a0b\u767b\u5f55\u5de5\u5177MobaXterm \u4e2d\u7684\u6587\u4ef6\u4f20\u8f93SFTP\u670d\u52a1\uff0c\u6216\u901a\u8fc7\u5171\u4eab\u6587\u4ef6\u5939\u62f7\u8d1d\u3002 \u2003\u2003\u6253\u5f00Image\u6587\u4ef6\u5939\uff0c\u65b0\u5efaparameter.txt\uff0c\u5c06\u4ee5\u4e0b\u5185\u5bb9\u590d\u5236\u5230parameter.txt\u4e2d\u5e76\u4fdd\u5b58\uff1a FIRMWARE_VER: 8 .1 MACHINE_MODEL: RK3399 MACHINE_ID: 007 MANUFACTURER: RK3399 MAGIC: 0x5041524B ATAG: 0x00200800 MACHINE: 3399 CHECK_MASK: 0x80 PWR_HLD: 0 ,0,A,0,1 TYPE: GPT CMDLINE: mtdparts = rk29xxnand:0x00002000@0x00004000 ( uboot ) ,0x00002000@0x00006000 ( trust ) ,0x00002000@0x00008000 ( misc ) ,0x00010000@0x0000a000 ( boot ) ,0x00010000@0x0001a000 ( recovery ) ,0x00010000@0x0002a000 ( backup ) ,0x00020000@0x0003a000 ( oem ) ,0x00700000@0x0005a000 ( rootfs ) ,-@0x0075a000 ( userdata:grow ) uuid:rootfs = 614e0000-0000-4b53-8000-1d28000054a9 \u6ce8\u610f \u4eceCMDLINE\u5f00\u59cb\u4e00\u76f4\u5230uuid\u4e4b\u524d\u90fd\u662f\u540c\u4e00\u6761\u547d\u4ee4\uff0c\u4e0d\u8981\u5206\u884c\uff01 \u2003\u2003\u5728\u5b9e\u9a8c\u5305\u7684\u56fa\u4ef6\u6253\u5305\u5de5\u5177\uff0c\u5c06RKImageMaker.exe\u3001AFPTool.exe\u548cpackage-file\uff08package-file\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09\u590d\u5236\u5230FirmWare\u6587\u4ef6\u5939\uff0c\u7136\u540e\u6309\u4e0bWin+R\u6253\u5f00\u8fd0\u884c\u7a97\u53e3\uff0c\u8f93\u5165cmd\u6253\u5f00\u547d\u4ee4\u884c\u7a97\u53e3\uff1a \u2003\u2003\u5728\u547d\u4ee4\u884c\u7a97\u53e3\u4e2d\uff0c\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u5207\u6362\u5230FirmWare\u6587\u4ef6\u5939\uff1a > D: > cd FirmWare \u2003\u2003\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5148\u901a\u8fc7AFPTools\u5c06\u51e0\u4e2a\u56fa\u4ef6\u6253\u5305\u6210\u4e00\u4e2a\u5355\u72ec\u7684update.img\uff0c\u7136\u540e\u901a\u8fc7RKImageMaker.exe\u5c06update.img\u5236\u4f5c\u6210\u53ef\u7528\u4e8eRK3399\u7684\u56fa\u4ef6\uff08\u6ce8\uff1a\u7b2c2\u884c\u548c\u7b2c3\u884c\u662f\u4e00\u6761\u6307\u4ee4\uff09\uff1a > Afptool -pack ./ Image \\u pdate.img > RKImageMaker.exe -RK330C Image \\M iniLoaderAll.bin Image \\u pdate.img update.img -os_type:androidos \u2003\u2003\u6700\u540e\uff0c\u5728FirmWare\u6587\u4ef6\u5939\u4e2d\u7684update.img\u5373\u4e3a\u6253\u5305\u5b8c\u6210\u7684\u7cfb\u7edf\u56fa\u4ef6 \u8bf4\u660e \u672c\u8282\u751f\u6210\u7684\u7edf\u4e00\u56fa\u4ef6\u662f\u4e0d\u5e26\u684c\u9762\u7684\uff0c\u53ef\u4ee5\u5728\u5b9e\u9a8c\u5305\u7684ubuntu\u6587\u4ef6\u5939\u4e2d\uff0c\u5c06ubuntu-rootfs-20190609.img\u548cparameter.txt\u70e7\u5199\u5230GW3399\uff0c\u4ece\u800c\u83b7\u5f97\u5e26\u684c\u9762\u7684Ubuntu\u7cfb\u7edf\u3002 \u2003\u2003\u53c2\u7167Windows\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6\u6765\u70e7\u5f55update.img\u3002 7. \u542f\u52a8\u65b0\u56fa\u4ef6 \u2003\u2003\u542f\u52a8\u65b0\u56fa\u4ef6\u4e4b\u524d\uff0c\u5148\u901a\u8fc7Mini-USB\u7ebf\uff0c\u5c06GW3399\u7684UART\u4e32\u53e3\u8fde\u63a5\u5230PC\uff1a \u2003\u2003\u7136\u540e\uff0c\u6253\u5f00MobaXterm\uff0c\u70b9\u51fbSession -> Serial\uff0c\u9009\u62e9GW3399\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\uff0c\u5982\u679c\u4e0d\u77e5\u9053GW3399\u5bf9\u5e94\u7684\u662f\u54ea\u4e2a\u7aef\u53e3\uff0c\u6253\u5f00\u8bbe\u5907\u7ba1\u7406\u5668\u5373\u53ef\u67e5\u770b\uff08GW3399\u5fc5\u987b\u4e0a\u7535\uff09\uff1a \u2003\u2003\u9009\u62e9\u7aef\u53e3\u540e\uff0c\u5c06\u7aef\u53e3\u8fde\u63a5\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u4e0b\u56fe\u6240\u793a\uff08\u6ce2\u7279\u7387\uff1a115200\uff0c\u6570\u636e\u6d41\u63a7\u5236\uff1a\u65e0\uff09\u3002 \u2003\u2003\u4e32\u53e3\u8fde\u63a5\u6210\u529f\u540e\uff0c\u6309GW3399\u7684RESET\u952e\u590d\u4f4d\uff0c\u7b49\u5f85GW3399\u91cd\u542f\uff1a \u2003\u2003\u6700\u540e\uff0c\u8f93\u5165\u7528\u6237\u540d\u4e0e\u5bc6\u7801\uff08\u7528\u6237\u540d\uff1azonesion\uff0c\u5bc6\u7801\uff1a123456\uff09\uff0c\u767b\u5f55\u5230GW3399\uff1a \u2003\u2003\u81f3\u6b64\uff0c\u65b0\u56fa\u4ef6\u542f\u52a8\u6210\u529f\u3002","title":"\u5b9e\u73b0\u6b65\u9aa4"},{"location":"lab1/step/#_1","text":"","title":"\u5b9e\u9a8c\u6b65\u9aa4"},{"location":"lab1/step/#1","text":"\u672c\u5b9e\u9a8c\u63d0\u4f9b\u5df2\u5b89\u88c5\u597d\u5b9e\u9a8c\u73af\u5883\u7684Ubuntu20.04\u865a\u62df\u673a\u3002\u5b9e\u9a8c\u5f00\u59cb\u524d\uff0c\u9700\u8981\u5728VirtualBox\u4e2d\u5bfc\u5165\u865a\u62df\u673a\u955c\u50cf\u3002 \u2003\u2003\u9996\u5148\uff0c\u4e0b\u8f7d\u5e76\u5b89\u88c5VirtualBox\u53caVirtualBox\u7684\u6269\u5c55\u5305\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u6253\u5f00VirtualBox\u3002 \u2003\u2003\u7136\u540e\uff0c\u6309\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u4f9d\u6b21\u70b9\u51fb\u76f8\u5e94\u7684\u6309\u94ae\u4ee5\u5bfc\u5165\u865a\u62df\u673a\u3002 \u2003\u2003\u70b9\u51fb\u201c\u6253\u5f00\u201d\u6309\u94ae\u540e\uff0c\u68c0\u67e5\u4e0b\u56fe\u6240\u793a\u7684\u8bbe\u7f6e\u662f\u5426\u4e0e\u7269\u7406\u673a\u517c\u5bb9\u3002\u5982\u679c\u51fa\u73b0\u4e0d\u517c\u5bb9\uff0c\u9700\u6839\u636e\u7269\u7406\u673a\u7684\u914d\u7f6e\u8fdb\u884c\u76f8\u5e94\u7684\u4fee\u6539\u3002 \u2003\u2003\u68c0\u67e5\u65e0\u8bef\u540e\uff0c\u70b9\u51fb\u7a97\u53e3\u53f3\u4e0b\u65b9\u7684\u201c\u5bfc\u5165\u201d\u6309\u94ae\uff0c\u8010\u5fc3\u7b49\u5f85\u865a\u62df\u673a\u5bfc\u5165\u5b8c\u6210\u3002","title":"1. \u5bfc\u5165\u865a\u62df\u673a"},{"location":"lab1/step/#2-sdk","text":"\u9996\u5148\uff0c\u5728Ubuntu\u7cfb\u7edf\u4e2d/home/embsys\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa\u6587\u4ef6\u5939mysdk\uff0c\u7136\u540e\u5728\u5b9e\u9a8c\u5305\u91cc\u7684gw3399-linux\u76ee\u5f55\u4e0b\uff0c\u590d\u5236gw3399-linux.tar.gz\uff08\u5305\u542buboot\u3001kernel\uff09\u548cpatch.tar.gz\u5230/home/embsys/mysdk\u76ee\u5f55\u4e0b\u3002 \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u901a\u8fc7tar\u6307\u4ee4\u89e3\u538bsdk\u5305\uff1a $ cd ~/mysdk $ sudo tar -xvf gw3399-linux.tar.gz \u2003\u2003\u7b49\u5f85\u89e3\u538b\u5b8c\u6210\u540e\uff0c\u901a\u8fc7ls\u547d\u4ee4\uff0c\u53ef\u770b\u5230mysdk\u76ee\u5f55\u4e0b\u591a\u4e86\u4e00\u4e2agw3399-linux\u76ee\u5f55\u3002 \u2003\u2003\u63a5\u7740\uff0c\u7ed9sdk\u6253\u4e0apatch.tar.gz\u7684\u8865\u4e01\u5305\uff1a $ cp patch.tar.gz gw3399-linux # \u590d\u5236\u8865\u4e01\u5305\u5230Linux SDK\u6839\u76ee\u5f55\u4e0b $ cd gw3399-linux # \u5207\u6362\u5230Linux SDK\u6839\u76ee\u5f55 $ sudo tar -xvf patch.tar.gz # \u89e3\u538b\u8865\u4e01\u5305\uff0c\u8986\u76d6\u4e4b\u524d\u7684\u6e90\u7801 $ sudo rm patch.tar.gz # \u5220\u9664\u8865\u4e01\u5305","title":"2.  \u83b7\u53d6\u7cfb\u7edfsdk"},{"location":"lab1/step/#3-u-boot","text":"\u9996\u5148\uff0c\u8bbe\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u5668\u73af\u5883\u53d8\u91cf\uff1a $ cd ~/mysdk/gw3399-linux/ $ export PATH = $PATH :~/mysdk/gw3399-linux/prebuilts/gcc/linux-x86/aarch64/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \u2003\u2003\u6ce8\u610f\uff0c\u4e0a\u8ff0\u8bbe\u7f6e\u4ec5\u5bf9\u5f53\u524d\u6253\u5f00\u7684\u7ec8\u7aef\u6709\u6548\u3002\u5982\u679c\u4e0d\u60f3\u6bcf\u6b21\u6253\u5f00\u7ec8\u7aef\u90fd\u8f93\u4e00\u904d\u4e0a\u8ff0\u547d\u4ee4\uff0c\u53ef\u5c06\u4ea4\u53c9\u7f16\u8bd1\u5668\u7684\u8def\u5f84\u6dfb\u52a0\u5230\u7cfb\u7edf\u7684\u73af\u5883\u53d8\u91cf\u4e2d\u3002 \u2003\u2003\u7136\u540e\uff0c\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u914d\u7f6e\u7f16\u8bd1U-Boot\uff1a $ cd ./u-boot $ make gw3399_defconfig # \u5199\u5165\u9ed8\u8ba4\u914d\u7f6e $ make CROSS_COMPILE = aarch64-linux-gnu- # \u5f00\u59cb\u7f16\u8bd1 \u2003\u2003\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u7f16\u8bd1\u5b8c\u6210\uff0c\u751f\u6210u-boot.img\uff1a \u2003\u2003\u4f46\u8fd9\u4e2au-boot.img\u5e76\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\uff0c\u8fd8\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u6253\u5305\u751f\u6210rk\u517c\u5bb9\u7684u-boot\u6587\u4ef6\uff1a $ ../rkbin/tools/loaderimage --pack --uboot u-boot.bin uboot.img 0x00200000 \u2003\u2003\u8fd9\u6837\u751f\u6210\u7684uboot.img\uff08\u6ce8\u610f\uff1au\u548cboot\u4e2d\u95f4\u6ca1\u6709\u6a2a\u6760-\uff09\uff0c\u624d\u662f\u53ef\u4ee5\u66f4\u65b0\u5230GW3399\u4e2d\u7684U-Boot\u56fa\u4ef6\u3002 \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u6253\u5305\u751f\u6210*_loader_*.bin\u548ctrust.img\uff1a $ cd ../rkbin $ ./tools/boot_merger --replace tools/rk_tools/ ./ ./RKBOOT/RK3399MINIALL.ini $ sudo mv *_loader_*.bin ../u-boot/ #\u5c06\u751f\u6210\u7684bin\u6587\u4ef6\u79fb\u52a8\u5230u-boot\u76ee\u5f55 $ tools/trust_merger --replace tools/rk_tools/ ./ RKTRUST/RK3399TRUST.ini #\u751f\u6210trust.img $ sudo mv trust.img ../u-boot/ #\u5c06\u751f\u6210\u7684trust.img\u79fb\u52a8\u5230u-boot\u76ee\u5f55 \u2003\u2003\u6700\u540e\uff0c\u5c06\u8fd9\u4e09\u4e2a\u6709\u6548\u955c\u50cf\u6587\u4ef6\u590d\u5236\u5230\u8f93\u51fa\u76ee\u5f55\uff08output\u76ee\u5f55\uff09\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ cd ../u-boot/ $ sudo cp -v ./*_loader_*.bin ../output/MiniLoaderAll.bin $ sudo cp -v ./uboot.img ../output/ $ sudo cp -v ./trust.img ../output/ $ make clean \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0c\u901a\u8fc7\u7f16\u8bd1U-Boot\uff0c\u5c06\u4e09\u4e2a\u53ef\u4ee5\u70e7\u5199\u5230GW3399\u7684\u5206\u533a\u6620\u50cf\uff08uboot.img\uff0ctrust.img\uff0cMiniLoaderAll.bin\uff09\u8f93\u51fa\u5230\u4e86output\u76ee\u5f55\uff1a $ cd ../output/ $ ls","title":"3.  \u7f16\u8bd1U-Boot"},{"location":"lab1/step/#4-linux","text":"\u7f16\u8bd1Linux\u5185\u6838\u7684\u65b9\u6cd5\u548c\u7f16\u8bd1U-Boot\u7c7b\u4f3c\uff0c\u5e76\u4e14\u8fc7\u7a0b\u66f4\u4e3a\u7b80\u6377\u3002 \u2003\u2003\u9996\u5148\uff0c\u8bbe\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u5668\u73af\u5883\u53d8\u91cf\uff1a $ cd ~/mysdk/gw3399-linux/ $ export PATH = $PATH :~/mysdk/gw3399-linux/prebuilts/gcc/linux-x86/aarch64/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin \u2003\u2003\u7136\u540e\uff0c\u914d\u7f6e\u7f16\u8bd1Linux\u5185\u6838\uff1a $ cd ./kernel/ $ make ARCH = arm64 gw3399_linux_defconfig #\u5199\u5165\u9ed8\u8ba4\u914d\u7f6e $ make ARCH = arm64 CROSS_COMPILE = aarch64-linux-gnu- #\u5f00\u59cb\u7f16\u8bd1 #\u7f16\u8bd1\u5185\u6838\u8bbe\u5907\u6811\u5e76\u751f\u6210boot.img $ make ARCH = arm64 gw3399-linux.img CROSS_COMPILE = aarch64-linux-gnu- \u2003\u2003\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u7f16\u8bd1\u5b8c\u6210\uff0c\u751f\u6210boot.img\uff1a \u2003\u2003\u6700\u540e\uff0c\u5c06\u8fd9\u4e2aboot.img\u590d\u5236\u5230\u8f93\u51fa\u76ee\u5f55\uff08output\u76ee\u5f55\uff09\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp -v ./boot.img ../output/ $ make clean \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0c\u901a\u8fc7\u7f16\u8bd1Linux\u5185\u6838\uff0c\u5c06\u4e00\u4e2a\u53ef\u4ee5\u70e7\u5199\u5230GW3399\u7684\u5206\u533a\u6620\u50cf\uff08boot.img\uff09\u8f93\u51fa\u5230\u4e86output\u76ee\u5f55\uff1a","title":"4.  \u7f16\u8bd1Linux\u5185\u6838"},{"location":"lab1/step/#5-ubuntu","text":"\u672c\u8282\u8bb2\u89e3\u4ece\u5b98\u7f51\u4e0b\u8f7d\u7eaf\u51c0\u7248Ubuntu\u6838\u5fc3\uff0c\u5728ARM64 AARCH64\u4e0a\u6784\u5efa\u6700\u5c0f\u7684Ubuntu\u6587\u4ef6\u7cfb\u7edf\u7684\u65b9\u6cd5\u3002\u672c\u8282\u53ea\u662f\u8bb2\u8ff0\u6587\u4ef6\u7cfb\u7edf\u7684\u5236\u4f5c\u65b9\u6cd5\uff0c\u5236\u4f5c\u51fa\u7684\u6587\u4ef6\u7cfb\u7edf\u662f\u4e0d\u5e26\u684c\u9762\u7684\uff0c\u53ea\u80fd\u901a\u8fc7\u4e32\u53e3\u8bbf\u95ee\u3002\u5e26\u684c\u9762\u7684\u6587\u4ef6\u7cfb\u7edf\uff08\u51fa\u5382\u955c\u50cf\uff09\u5236\u4f5c\u65b9\u6cd5\u4e0e\u672c\u8282\u5b8c\u5168\u76f8\u540c\uff0c\u53ea\u662f\u9700\u8981\u5b89\u88c5\u684c\u9762\u3001\u5404\u79cd\u8f6f\u4ef6\u5305\uff0c\u751f\u6210\u7684\u6587\u4ef6\u7cfb\u7edf\u8f83\u5927\u3002 \u2003\u2003\u9996\u5148\uff0c\u5728~/mysdk\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efarootfs\u76ee\u5f55\u3002\u4ece\u5b9e\u9a8c\u5305\u7684rootfs\u6587\u4ef6\u5939\u4e2d\uff0c\u5c06ch-mount.sh\u548cubuntu-base-16.04.2-base-arm64.tar.gz\uff08\u5b98\u65b9Ubuntu\u6838\u5fc3\uff09\u590d\u5236\u5230rootfs\u76ee\u5f55\u4e0b\u3002\u590d\u5236\u65b9\u6cd5\u53ef\u53c2\u7167MobaXterm \u8fdc\u7a0b\u767b\u5f55\u5de5\u5177MobaXterm \u4e2d\u7684\u6587\u4ef6\u4f20\u8f93SFTP\u670d\u52a1\u3002 \u2003\u2003\u5728rootfs\u76ee\u5f55\u4e2d\u521b\u5efa\u65b0\u76ee\u5f55ubuntu-rootfs\uff0c\u5c06\u538b\u7f29\u5305\u901a\u8fc7tar\u6307\u4ee4\u89e3\u538b\u5230\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u3002\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u89e3\u538b\u5b8c\u6210\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7ls\u547d\u4ee4\uff0c\u770b\u5230ubuntu-rootfs\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u7ed3\u6784\u5df2\u7ecf\u5b8c\u6210\uff1a $ cd ~/mysdk $ mkdir rootfs $ cd ./rootfs/ $ sudo mkdir ubuntu-rootfs $ sudo tar -xvf ubuntu-base-16.04.2-base-arm64.tar.gz -C ubuntu-rootfs $ cd ./ubuntu-rootfs/ $ ls \u2003\u2003\u63a5\u7740\uff0c\u4f7f\u7528qemu\u5728X86\u73af\u5883\u4e0b\u6784\u5efa\u51faarm\u865a\u62df\u673a\uff0c\u53ef\u4ee5\u6a21\u62dfarm\u73af\u5883\u8fdb\u884c\u5f00\u53d1\uff0c\u5728arm linux\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u5b89\u88c5\u76f8\u5e94\u7684\u5e93\u6587\u4ef6\uff0c\u7f16\u8bd1arm\u7248\u672c\u7b49\u3002 \u2003\u2003\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5b89\u88c5qemu-user-static\uff0c\u642d\u5efaarm64\u6a21\u62df\u73af\u5883\uff1a $ sudo apt-get install qemu-user-static $ sudo cp /usr/bin/qemu-aarch64-static ./usr/bin $ sudo cp -b /etc/resolv.conf etc/ \u2003\u2003\u901a\u8fc7ch-mount.sh\u811a\u672c\uff0cchroot\u5230arm64\u7684\u6587\u4ef6\u7cfb\u7edf\u4e0b\uff1a $ cd ../ $ chmod +x ch-mount.sh $ sudo ./ch-mount.sh -m ubuntu-rootfs/ \u2003\u2003\u5982\u56fe\uff0c\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u524d\u7f00\u53d8\u6210\u4e86root@ubuntu\uff0c\u8bf4\u660echroot\u6210\u529f\uff1a \u2003\u2003\u5b89\u88c5\u57fa\u7840\u8f6f\u4ef6\u5305\uff08\u8fd9\u4e00\u6b65\u9700\u8981\u7f51\u7edc\uff0c\u5982\u679c\u6ca1\u6709\u7f51\u7edc\u53ef\u4ee5\u8df3\u8fc7\uff09 \u2003\u2003\u5728\u66f4\u65b0\u8f6f\u4ef6\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u56fd\u5916\u6e90\u592a\u6162\u4e86\uff0c\u53ef\u4ee5\u4fee\u6539\u4e3a\u4e2d\u79d1\u5927\u6e90\uff0c\u4fee\u6539\u5982\u4e0b\uff1a $ cd /etc/apt $ echo \"deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-proposed main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main multiverse restricted universe deb http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-backports main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-proposed main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-security main multiverse restricted universe deb-src http://mirrors.ustc.edu.cn/ubuntu-ports/ xenial-updates main multiverse restricted universe \" > sources.list $ apt-get update #\u66f4\u65b0\u8f6f\u4ef6\u5217\u8868 $ apt-get install language-pack-en-base sudo net-tools ethtool wireless-tools network-manager iputils-ping rsyslog bash-completion \u2003\u2003\u8fd9\u4e00\u6b65\u4e2d\u5b89\u88c5\u4e86\u57fa\u7840\u8bed\u8a00\u5305\u3001sudo\u547d\u4ee4\u5305\u3001\u7f51\u7edc\u5de5\u5177\u5305\u3001tab\u952e\u547d\u4ee4\u8865\u5168\u5de5\u5177\u7b49\u6700\u5e38\u7528\u7684\u57fa\u7840\u8f6f\u4ef6\u5305\u3002\u5e26\u684c\u9762\u7684\u6587\u4ef6\u7cfb\u7edf\uff08\u51fa\u5382\u955c\u50cf\uff09\u5236\u4f5c\u8981\u5728\u8fd9\u4e00\u6b65\u5b89\u88c5\u684c\u9762\u548c\u5927\u91cf\u9644\u52a0\u8f6f\u4ef6\u5305\uff0c\u5176\u4f59\u6b65\u9aa4\u5b8c\u5168\u76f8\u540c\u3002 \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u8bbe\u7f6e\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u3001root\u5bc6\u7801\u548c\u4e3b\u673a\u540d\uff1a $ useradd -s '/bin/bash' -m -G adm,sudo zonesion #\u6dfb\u52a0\u7528\u6237zonesion $ passwd zonesion #\u8bbe\u7f6ezonesion\u7528\u6237\u5bc6\u7801 123456 #\u8f93\u5165\u5bc6\u7801 123456 #\u786e\u8ba4\u5bc6\u7801 $ passwd root #\u8bbe\u7f6eroot\u5bc6\u7801 123456 #\u8f93\u5165\u5bc6\u7801 123456 #\u786e\u8ba4\u5bc6\u7801 $ echo 'GW3399' > /etc/hostname #\u8bbe\u7f6e\u4e3b\u673a\u540d \u2003\u2003\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u9000\u51faarm64\u6a21\u62df\u6587\u4ef6\u7cfb\u7edf\uff1a $ exit #\u6ce8\u9500\u5f53\u524d\u7528\u6237 $ sudo ./ch-mount.sh -u ubuntu-rootfs/ #\u5378\u9664\u5f53\u524d\u6302\u8f7d\u7684\u6587\u4ef6\u7cfb\u7edf \u2003\u2003\u7136\u540e\uff0c\u521b\u5efa\u4f5c\u4e3arootfs\u56fa\u4ef6\u5bb9\u5668\u7684img\u6587\u4ef6\uff08\u6ce8\u610f\uff1a\u683c\u5f0f\u5316\u65f6\u9700\u8981\u8f93\u5165y\u56de\u8f66\uff09\uff1a $ sudo dd if = /dev/zero of = ubuntu-rootfs.img bs = 1M count = 1024 #\u5236\u4f5c\u7a7a\u7684\u56fa\u4ef6\u5bb9\u5668 $ sudo mkfs.ext4 ubuntu-rootfs.img #\u5c06img\u6587\u4ef6\u683c\u5f0f\u5316\u4e3aext4\u683c\u5f0f \u2003\u2003\u63a5\u7740\uff0c\u5c06arm64\u6587\u4ef6\u7cfb\u7edf\u5185\u5bb9\u5236\u4f5c\u5230ubuntu-rootfs.img\uff1a $ sudo mkdir ubuntu-mount #\u65b0\u5efa\u6302\u8f7d\u76ee\u5f55 $ sudo mount ubuntu-rootfs.img ubuntu-mount/ #\u5c06img\u6587\u4ef6\u6302\u8f7d\u5230\u6302\u8f7d\u76ee\u5f55 $ sudo cp -rfp ubuntu-rootfs/* ubuntu-mount/ #\u5c06\u8bbe\u7f6e\u597d\u7684\u6587\u4ef6\u7cfb\u7edf\u590d\u5236\u5230\u6302\u8f7d\u76ee\u5f55 $ sudo umount ubuntu-mount/ #\u5c06img\u6587\u4ef6\u4ece\u6302\u8f7d\u76ee\u5f55\u5378\u9664 $ sudo e2fsck -p -f ubuntu-rootfs.img #\u68c0\u67e5\u6587\u4ef6\u7cfb\u7edf\u662f\u5426\u6b63\u5e38 $ sudo resize2fs -M ubuntu-rootfs.img #\u5c06rootfs\u538b\u7f29\u5230\u7b26\u5408\u5176\u5360\u7528\u7a7a\u95f4\u7684\u5927\u5c0f \u2003\u2003\u6700\u540e\uff0c\u5c06\u5236\u4f5c\u5b8c\u6210\u7684ubuntu-rootfs.img\u590d\u5236\u5230\u8f93\u51fa\u76ee\u5f55\uff08output\u76ee\u5f55\uff09\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp -v ./ubuntu-rootfs.img ../gw3399-linux/output/rootfs.img $ cd ../ $ sudo rm -rf rootfs/ \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0c\u901a\u8fc7\u4e0a\u8ff0\u64cd\u4f5c\uff0c\u5c06\u53ef\u4ee5\u70e7\u5199\u5230GW3399\u7684Ubuntu\u6587\u4ef6\u7cfb\u7edf\uff08rootfs.img\uff09\u8f93\u51fa\u5230\u4e86output\u76ee\u5f55\uff1a $ cd ./gw3399-linux/output/ $ ls","title":"5.  Ubuntu\u6587\u4ef6\u7cfb\u7edf\u5236\u4f5c"},{"location":"lab1/step/#6","text":"\u7531\u4e8e\u51fa\u5382\u955c\u50cf\u7684\u6587\u4ef6\u7cfb\u7edf\u8fc7\u4e8e\u5e9e\u5927\uff0c\u672c\u8282\u4ecd\u901a\u8fc7\u4e0a\u4e00\u8282\u751f\u6210\u7684\u6700\u5c0fUbuntu\u6587\u4ef6\u7cfb\u7edf\uff0c\u6765\u6f14\u793a\u7cfb\u7edf\u56fa\u4ef6\u6253\u5305\u65b9\u6cd5\u3002 \u2003\u2003\u9996\u5148\uff0c\u5728Windows\u4e3b\u673a\u7684D\u76d8\uff08\u6216\u5176\u4ed6\u6709\u8db3\u591f\u7a7a\u95f4\u7684\u78c1\u76d8\uff09\u6839\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efaFirmWare\u6587\u4ef6\u5939\uff0c\u7136\u540e\u5728FirmWare\u6587\u4ef6\u5939\u4e0b\u65b0\u5efaImage\u6587\u4ef6\u5939\u3002 \u2003\u2003\u63a5\u7740\uff0c\u5c06\u4e4b\u524d\u751f\u6210\u76845\u4e2a\u56fa\u4ef6\uff0c\u4eceLinux\u865a\u62df\u673a\u7684output\u76ee\u5f55\u4e2d\u590d\u5236\u5230Image\u6587\u4ef6\u5939\u3002\u590d\u5236\u65b9\u6cd5\u53ef\u4f7f\u7528\u8fdc\u7a0b\u767b\u5f55\u5de5\u5177MobaXterm \u4e2d\u7684\u6587\u4ef6\u4f20\u8f93SFTP\u670d\u52a1\uff0c\u6216\u901a\u8fc7\u5171\u4eab\u6587\u4ef6\u5939\u62f7\u8d1d\u3002 \u2003\u2003\u6253\u5f00Image\u6587\u4ef6\u5939\uff0c\u65b0\u5efaparameter.txt\uff0c\u5c06\u4ee5\u4e0b\u5185\u5bb9\u590d\u5236\u5230parameter.txt\u4e2d\u5e76\u4fdd\u5b58\uff1a FIRMWARE_VER: 8 .1 MACHINE_MODEL: RK3399 MACHINE_ID: 007 MANUFACTURER: RK3399 MAGIC: 0x5041524B ATAG: 0x00200800 MACHINE: 3399 CHECK_MASK: 0x80 PWR_HLD: 0 ,0,A,0,1 TYPE: GPT CMDLINE: mtdparts = rk29xxnand:0x00002000@0x00004000 ( uboot ) ,0x00002000@0x00006000 ( trust ) ,0x00002000@0x00008000 ( misc ) ,0x00010000@0x0000a000 ( boot ) ,0x00010000@0x0001a000 ( recovery ) ,0x00010000@0x0002a000 ( backup ) ,0x00020000@0x0003a000 ( oem ) ,0x00700000@0x0005a000 ( rootfs ) ,-@0x0075a000 ( userdata:grow ) uuid:rootfs = 614e0000-0000-4b53-8000-1d28000054a9 \u6ce8\u610f \u4eceCMDLINE\u5f00\u59cb\u4e00\u76f4\u5230uuid\u4e4b\u524d\u90fd\u662f\u540c\u4e00\u6761\u547d\u4ee4\uff0c\u4e0d\u8981\u5206\u884c\uff01 \u2003\u2003\u5728\u5b9e\u9a8c\u5305\u7684\u56fa\u4ef6\u6253\u5305\u5de5\u5177\uff0c\u5c06RKImageMaker.exe\u3001AFPTool.exe\u548cpackage-file\uff08package-file\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09\u590d\u5236\u5230FirmWare\u6587\u4ef6\u5939\uff0c\u7136\u540e\u6309\u4e0bWin+R\u6253\u5f00\u8fd0\u884c\u7a97\u53e3\uff0c\u8f93\u5165cmd\u6253\u5f00\u547d\u4ee4\u884c\u7a97\u53e3\uff1a \u2003\u2003\u5728\u547d\u4ee4\u884c\u7a97\u53e3\u4e2d\uff0c\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u5207\u6362\u5230FirmWare\u6587\u4ef6\u5939\uff1a > D: > cd FirmWare \u2003\u2003\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5148\u901a\u8fc7AFPTools\u5c06\u51e0\u4e2a\u56fa\u4ef6\u6253\u5305\u6210\u4e00\u4e2a\u5355\u72ec\u7684update.img\uff0c\u7136\u540e\u901a\u8fc7RKImageMaker.exe\u5c06update.img\u5236\u4f5c\u6210\u53ef\u7528\u4e8eRK3399\u7684\u56fa\u4ef6\uff08\u6ce8\uff1a\u7b2c2\u884c\u548c\u7b2c3\u884c\u662f\u4e00\u6761\u6307\u4ee4\uff09\uff1a > Afptool -pack ./ Image \\u pdate.img > RKImageMaker.exe -RK330C Image \\M iniLoaderAll.bin Image \\u pdate.img update.img -os_type:androidos \u2003\u2003\u6700\u540e\uff0c\u5728FirmWare\u6587\u4ef6\u5939\u4e2d\u7684update.img\u5373\u4e3a\u6253\u5305\u5b8c\u6210\u7684\u7cfb\u7edf\u56fa\u4ef6 \u8bf4\u660e \u672c\u8282\u751f\u6210\u7684\u7edf\u4e00\u56fa\u4ef6\u662f\u4e0d\u5e26\u684c\u9762\u7684\uff0c\u53ef\u4ee5\u5728\u5b9e\u9a8c\u5305\u7684ubuntu\u6587\u4ef6\u5939\u4e2d\uff0c\u5c06ubuntu-rootfs-20190609.img\u548cparameter.txt\u70e7\u5199\u5230GW3399\uff0c\u4ece\u800c\u83b7\u5f97\u5e26\u684c\u9762\u7684Ubuntu\u7cfb\u7edf\u3002 \u2003\u2003\u53c2\u7167Windows\u73af\u5883\u4e0b\u66f4\u65b0\u56fa\u4ef6\u6765\u70e7\u5f55update.img\u3002","title":"6.  \u7cfb\u7edf\u56fa\u4ef6\u6253\u5305"},{"location":"lab1/step/#7","text":"\u542f\u52a8\u65b0\u56fa\u4ef6\u4e4b\u524d\uff0c\u5148\u901a\u8fc7Mini-USB\u7ebf\uff0c\u5c06GW3399\u7684UART\u4e32\u53e3\u8fde\u63a5\u5230PC\uff1a \u2003\u2003\u7136\u540e\uff0c\u6253\u5f00MobaXterm\uff0c\u70b9\u51fbSession -> Serial\uff0c\u9009\u62e9GW3399\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\uff0c\u5982\u679c\u4e0d\u77e5\u9053GW3399\u5bf9\u5e94\u7684\u662f\u54ea\u4e2a\u7aef\u53e3\uff0c\u6253\u5f00\u8bbe\u5907\u7ba1\u7406\u5668\u5373\u53ef\u67e5\u770b\uff08GW3399\u5fc5\u987b\u4e0a\u7535\uff09\uff1a \u2003\u2003\u9009\u62e9\u7aef\u53e3\u540e\uff0c\u5c06\u7aef\u53e3\u8fde\u63a5\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u4e0b\u56fe\u6240\u793a\uff08\u6ce2\u7279\u7387\uff1a115200\uff0c\u6570\u636e\u6d41\u63a7\u5236\uff1a\u65e0\uff09\u3002 \u2003\u2003\u4e32\u53e3\u8fde\u63a5\u6210\u529f\u540e\uff0c\u6309GW3399\u7684RESET\u952e\u590d\u4f4d\uff0c\u7b49\u5f85GW3399\u91cd\u542f\uff1a \u2003\u2003\u6700\u540e\uff0c\u8f93\u5165\u7528\u6237\u540d\u4e0e\u5bc6\u7801\uff08\u7528\u6237\u540d\uff1azonesion\uff0c\u5bc6\u7801\uff1a123456\uff09\uff0c\u767b\u5f55\u5230GW3399\uff1a \u2003\u2003\u81f3\u6b64\uff0c\u65b0\u56fa\u4ef6\u542f\u52a8\u6210\u529f\u3002","title":"7. \u542f\u52a8\u65b0\u56fa\u4ef6"},{"location":"lab1/submit/","text":"\u9a8c\u6536\u4e0e\u63d0\u4ea4 \u5b9e\u9a8c\u62a5\u544a\u8981\u6c42 \u2003\u2003\u5b9e\u9a8c\u62a5\u544a\u9700\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a \u2003\u2003\uff081\uff09\u9605\u8bfb Boot option - Rockchip open source Document \uff0c\u6982\u62ec\u7cfb\u7edf\u7684\u542f\u52a8\u6d41\u7a0b\uff1b \u2003\u2003\uff082\uff09\u753b\u51fa\u503c\u4f5cGW3399\u56fa\u4ef6\u7684\u6d41\u7a0b\u56fe\u3002 \u9a8c\u6536\u4e0e\u63d0\u4ea4\u8981\u6c42 \u2003\u2003\u68c0\u67e5\u751f\u6210\u7684\u56fa\u4ef6\u80fd\u5426\u6b63\u5e38\u542f\u52a8\u3002 \u2003\u2003\u5b9e\u9a8c\u62a5\u544a\u8f6c\u6210pdf\u683c\u5f0f\uff0c\u4ee5\u201c \u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c1.pdf \u201d\u547d\u540d\uff0c\u63d0\u4ea4\u5230\u4f5c\u4e1a\u7cfb\u7edf\u3002 \u2003\u2003\u62a5\u544a\u63d0\u4ea4 Deadline \uff1a\u67e5\u770b\u4f5c\u4e1a\u7cfb\u7edf\u3002","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4"},{"location":"lab1/submit/#_1","text":"","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4"},{"location":"lab1/submit/#_2","text":"\u5b9e\u9a8c\u62a5\u544a\u9700\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a \u2003\u2003\uff081\uff09\u9605\u8bfb Boot option - Rockchip open source Document \uff0c\u6982\u62ec\u7cfb\u7edf\u7684\u542f\u52a8\u6d41\u7a0b\uff1b \u2003\u2003\uff082\uff09\u753b\u51fa\u503c\u4f5cGW3399\u56fa\u4ef6\u7684\u6d41\u7a0b\u56fe\u3002","title":"\u5b9e\u9a8c\u62a5\u544a\u8981\u6c42"},{"location":"lab1/submit/#_3","text":"\u68c0\u67e5\u751f\u6210\u7684\u56fa\u4ef6\u80fd\u5426\u6b63\u5e38\u542f\u52a8\u3002 \u2003\u2003\u5b9e\u9a8c\u62a5\u544a\u8f6c\u6210pdf\u683c\u5f0f\uff0c\u4ee5\u201c \u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c1.pdf \u201d\u547d\u540d\uff0c\u63d0\u4ea4\u5230\u4f5c\u4e1a\u7cfb\u7edf\u3002 \u2003\u2003\u62a5\u544a\u63d0\u4ea4 Deadline \uff1a\u67e5\u770b\u4f5c\u4e1a\u7cfb\u7edf\u3002","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4\u8981\u6c42"},{"location":"lab1/theory/","text":"\u5b9e\u9a8c\u539f\u7406 1. \u4ea4\u53c9\u7f16\u8bd1 \u2003\u2003\u5728\u540c\u5b66\u4eec\u4ee5\u524d\u5b66\u4e60\u7684\u8bfe\u7a0b\u4e2d\uff0c\u6e90\u7a0b\u5e8f\u7684\u7f16\u5199\u3001\u7f16\u8bd1\u548c\u8fd0\u884c\u90fd\u5728\u540c\u4e00\u4e2a\u5e73\u53f0\u5b8c\u6210\uff0c\u800c\u672c\u8bfe\u7a0b\u6d89\u53ca\u5d4c\u5165\u5f0f\u5f00\u53d1\uff0c\u9700\u8981\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u6280\u672f\u3002 \u2003\u2003\u4ea4\u53c9\u7f16\u8bd1\u662f\u5d4c\u5165\u5f0f\u5f00\u53d1\u4e2d\u7684\u4e00\u9879\u91cd\u8981\u6280\u672f\u3002\u6240\u8c13\u201c\u4ea4\u53c9\u201d\uff0c\u662f\u6307\u5728\u4e00\u4e2a\u5e73\u53f0\u4e0a\u751f\u6210\u53e6\u4e00\u4e2a\u5e73\u53f0\u7684\u53ef\u6267\u884c\u4ee3\u7801\uff0c\u5e76\u4e14\u8fd9\u4e24\u4e2a\u5e73\u53f0\u91c7\u7528\u4e0d\u540c\u7684ISA\uff08\u6bd4\u5982\u4e00\u4e2a\u662fX86\uff0c\u53e6\u4e00\u4e2a\u662fARM\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u2003\u2003\u4e00\u65b9\u9762\uff0c\u4ea4\u53c9\u7f16\u8bd1\u7ed9\u5d4c\u5165\u5f0f\u5f00\u53d1\u63d0\u4f9b\u4e86\u53ef\u80fd\u6027\u3002\u90e8\u5206\u5d4c\u5165\u5f0f\u7cfb\u7edf\u53d7\u9650\u4e8e\u5e94\u7528\u573a\u666f\uff0c\u9700\u8981\u88f8\u673a\u8fd0\u884c\u7a0b\u5e8f\u3002\u6b64\u65f6\uff0c\u53ea\u80fd\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u6765\u5f00\u53d1\u5d4c\u5165\u5f0f\u7a0b\u5e8f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u4ea4\u53c9\u7f16\u8bd1\u63d0\u9ad8\u4e86\u5d4c\u5165\u5f0f\u5f00\u53d1\u7684\u6548\u7387\u3002\u867d\u7136\u90e8\u5206\u5d4c\u5165\u5f0f\u7cfb\u7edf\u53ef\u4ee5\u8fd0\u884cOS\uff08\u5982\u5d4c\u5165\u5f0fLinux\u3001VxWorks\u7b49\uff09\uff0c\u4e5f\u80fd\u5b89\u88c5\u8bf8\u5982GCC\u7684\u7f16\u8bd1\u5668\uff0c\u4ece\u800c\u53ef\u4ee5\u76f4\u63a5\u5728\u5d4c\u5165\u5f0f\u5e73\u53f0\u4e0a\u8fdb\u884c\u5f00\u53d1\u3002\u4f46\u7531\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u53d7\u9650\u4e8e\u8d44\u6e90\u3001\u529f\u8017\u7b49\u9650\u5236\u6761\u4ef6\uff0c\u5176\u6027\u80fd\u4e0ePC\u76f8\u6bd4\u8f83\u5dee\uff0c\u5f00\u53d1\u6548\u7387\u8f83\u4f4e\u3002\u6b64\u65f6\uff0c\u53ef\u5728PC\u5e73\u53f0\u4e0a\u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u4ece\u800c\u53ef\u4ee5\u5c06\u5d4c\u5165\u5f0f\u7a0b\u5e8f\u7684\u5f00\u53d1\u8fc7\u7a0b\u632a\u5230PC\u7aef\uff0c\u4ee5\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u7f29\u77ed\u4ea7\u54c1\u7684\u7814\u53d1\u5468\u671f\u3002 \u2003\u2003\u8981\u8fdb\u884c\u4ea4\u53c9\u7f16\u8bd1\uff0c\u9700\u8981\u5148\u5728Host\u5e73\u53f0\u4e0a\u5b89\u88c5\u76f8\u5e94\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u7136\u540e\u7528\u5de5\u5177\u94fe\u7f16\u8bd1\u6e90\u4ee3\u7801\uff0c\u6700\u7ec8\u751f\u6210\u53ef\u5728\u76ee\u6807\u5e73\u53f0\u4e0a\u8fd0\u884c\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u3002 \u2003\u2003\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u548c\u8c03\u8bd5\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e00\u822c\u6574\u5408\u4e86\u7f16\u8f91\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5\u3001\u8c03\u8bd5\u3001\u5de5\u7a0b\u7ba1\u7406\u53ca\u51fd\u6570\u5e93\u7b49\u5e38\u7528\u529f\u80fd\u6a21\u5757\u3002 2. GW3399\u56fa\u4ef6 \u2003\u2003\u56fa\u4ef6\u6709\u4e24\u79cd\u683c\u5f0f\uff1a \u200b\u2003\u2003\uff081\uff09\u7edf\u4e00\u56fa\u4ef6 \u2003\u2003\u7edf\u4e00\u56fa\u4ef6\u662f\u901a\u8fc7\u5b98\u65b9\u70e7\u5199\u5de5\u5177\uff0c\u5c06\u6240\u6709\u5206\u533a\u7684\u955c\u50cf\u6253\u5305\u6210\u72ec\u7acb\u7684\u4e00\u4e2a\u6587\u4ef6\uff0c\u65b9\u4fbf\u7cfb\u7edf\u8fdb\u884c\u5347\u7ea7\u3002 \u200b\u2003\u2003\uff082\uff09\u5206\u7acb\u56fa\u4ef6 \u2003\u2003\u5206\u7acb\u56fa\u4ef6\u662f\u5206\u533a\u7684\u6620\u50cf\u6570\u636e\u3002\u4f8b\u5982\uff0c\u7f16\u8bd1Ubuntu SDK\u4f1a\u6784\u5efa\u51fauboot.img\u3001trust.img\u3001boot.img\u7b49\u5206\u533a\u6620\u50cf\u6587\u4ef6\u3002\u901a\u8fc7\u5b98\u65b9\u7684\u70e7\u5199\u5de5\u5177\u53ef\u4ee5\u5bf9\u5177\u4f53\u7684\u5355\u4e00\u5206\u533a\u56fa\u4ef6\u8fdb\u884c\u9009\u62e9\u6027\u5347\u7ea7\u3002 \u2003\u2003\u672c\u5b9e\u9a8c\u4f7f\u7528\u7684GW3399\u5e73\u53f0\u91c7\u7528\u5206\u7acb\u56fa\u4ef6\uff0c\u4e3b\u8981\u5305\u542bBootLoader\u3001Trust\u3001U-Boot\u3001Boot\u3001RootFS\u7b49\u5206\u533a\u6620\u50cf\u4ee5\u53ca\u5305\u542b\u56fa\u4ef6\u5206\u533a\u4fe1\u606f\u7684parameter\u6587\u672c\u6587\u4ef6\u3002 2.1 parameter.txt \u2003\u2003parameter.txt\u5305\u542b\u4e86\u56fa\u4ef6\u7684\u7248\u672c\u53f7\u3001\u5206\u533a\u7c7b\u578b\u3001\u5206\u533a\u5730\u5740\u3001\u5206\u533a\u5927\u5c0f\u7b49\u5173\u952e\u4fe1\u606f\u3002 \u2003\u2003\u4e0b\u9762\u4ee5parameter-ubuntu.txt\u4e3a\u4f8b\u5b50\u505a\u4ecb\u7ecd\uff1a FIRMWARE_VER: 8.1 MACHINE_MODEL: RK3399 MACHINE_ID: 007 MANUFACTURER: RK3399 MAGIC: 0x5041524B ATAG: 0x00200800 MACHINE: 3399 CHECK_MASK: 0x80 PWR_HLD: 0,0,A,0,1 TYPE: GPT CMDLINE:mtdparts=rk29xxnand:0x00002000@0x00004000(uboot),0x00002000@0x00006000(trust),0x00002000@0x00008000(misc),0x00010000@0x0000a000(boot),0x00010000@0x0001a000(recovery),0x00010000@0x0002a000(backup),0x00020000@0x0003a000(oem),-@0x0005a000(rootfs:grow) uuid:rootfs=614e0000-0000-4b53-8000-1d28000054a9 \u6ce8\u610f CMDLINE\u53ea\u6709\u4e00\u884c\uff01\u5199\u5230parameter.txt\u65f6\u6ce8\u610f\u4e0d\u8981\u5206\u884c\u3002 \u2003\u2003\u5176\u4e2d\uff0cCMDLINE\u7ed9\u51fa\u4e86\u5206\u533a\u4fe1\u606f\u3002\u4ee5uboot\u4e3a\u4f8b\uff0c0x00002000@0x00004000(uboot)\u4e2d\uff0c0x00004000\u4e3auboot\u5206\u533a\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c0x00002000\u4e3a\u5206\u533a\u7684\u5927\u5c0f\uff0c\u5373\uff1a\u5206\u533a\u5927\u5c0f@\u5206\u533a\u8d77\u59cb\u4f4d\u7f6e\uff0c\u540e\u9762\u7684\u5206\u533a\u89c4\u5219\u76f8\u540c\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u9700\u8981\u589e\u51cf\u6216\u8005\u4fee\u6539\u5206\u533a\u4fe1\u606f\uff0c\u4f46\u662f\u8bf7\u6700\u5c11\u4fdd\u7559uboot, trust, boot, rootfs\u5206\u533a\uff0c\u8fd9\u662f\u673a\u5668\u80fd\u6b63\u5e38\u542f\u52a8\u7684\u524d\u63d0\u6761\u4ef6\u3002 2.2 \u5206\u533a\u8bf4\u660e \u2003\u2003GW3399\u56fa\u4ef6\u4e2d\uff0c\u5fc5\u987b\u5305\u542bU-Boot\u3001Trust\u3001Boot\u3001RootFS\u5206\u533a\uff0c\u5176\u4f59\u53ef\u6839\u636e\u9700\u8981\u8fdb\u884c\u914d\u7f6e\u3002 \u5206\u533a \u8bf4\u660e uboot \u5206\u533a \u70e7\u5199 uboot \u7f16\u8bd1\u51fa\u6765\u7684 uboot.img trust \u5206\u533a \u70e7\u5199 uboot \u7f16\u8bd1\u51fa\u6765\u7684 trust.img misc \u5206\u533a \u70e7\u5199 misc.img\u3002\u5f00\u673a\u68c0\u6d4b\u8fdb\u5165recovery\u6a21\u5f0f.\uff08\u53ef\u9009\uff09 boot \u5206\u533a \u70e7\u5199 kernel \u7f16\u8bd1\u51fa\u6765\u7684 boot.img\uff0c\u5305\u542bkernel\u548c\u8bbe\u5907\u6811\u4fe1\u606f recovery \u5206\u533a \u70e7\u5199 recovery.img.\uff08\u53ef\u9009\uff09 backup \u5206\u533a \u9884\u7559,\u6682\u65f6\u6ca1\u6709\u7528\u3002\u540e\u7eed\u53ef\u4f5c\u4e3arecovery\u7684backup\u4f7f\u7528.\uff08\u53ef\u9009\uff09 oem \u5206\u533a \u7ed9\u5382\u5bb6\u4f7f\u7528,\u5b58\u653e\u5382\u5bb6\u7684 app \u6216\u6570\u636e\uff0c\u53ea\u8bfb\u3002\u6302\u8f7d\u5728/oem \u76ee\u5f55.\uff08\u53ef\u9009\uff09 rootfs \u5206\u533a \u5b58\u653ebuildroot\u6216\u8005debian\u7f16\u51fa\u6765\u7684rootfs.img,\u53ea\u8bfb. userdata\u5206\u533a \u5b58\u653eapp\u4e34\u65f6\u751f\u6210\u7684\u6587\u4ef6\u6216\u8005\u662f\u7ed9\u6700\u7ec8\u7528\u6237\u4f7f\u7528\u3002\u53ef\u8bfb\u5199,\u6302\u8f7d\u5728/userdata\u76ee\u5f55\u4e0b.\uff08\u53ef\u9009\uff09 2.3 package-file \u2003\u2003\u6b64\u6587\u4ef6\u7528\u4e8e\u56fa\u4ef6\u6253\u5305\uff0c\u5e94\u5f53\u4e0eparameter\u4fdd\u6301\u4e00\u81f4\u3002\u4ee5rk3399-ubuntu-package-file\u4e3a\u4f8b\u4ecb\u7ecd: # NAME Relative path # #HWDEF HWDEF package-file package-file bootloader Image/MiniLoaderAll.bin parameter Image/parameter.txt trust Image/trust.img uboot Image/uboot.img boot Image/boot.img rootfs Image/rootfs.img backup RESERVED \u2003\u2003\u4ee5\u4e0a\u662f\u7f16\u8bd1\u751f\u6210\u7684\u955c\u50cf\u6587\u4ef6\uff0c\u53ef\u6839\u636e\u9700\u8981\uff0c\u4fee\u6539\u5176\u4e2d\u7684\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u6587\u4ef6\u7cfb\u7edf\u7684\u6587\u4ef6\u540d\u4e3aubuntu-rootfs.img\u65f6\uff0c\u5e94\u5c06\u5012\u6570\u7b2c\u4e8c\u884c\u6539\u4e3aImage/ubuntu-rootfs.img\u3002 3. GW3399\u7cfb\u7edf\u542f\u52a8\u65b9\u5f0f \u2003\u2003GW3399\u5b9e\u9a8c\u5e73\u53f0\u6709\u7075\u6d3b\u7684\u542f\u52a8\u65b9\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u9664\u975e\u786c\u4ef6\u635f\u574f\uff0cGW3399\u5b9e\u9a8c\u5e73\u53f0\u662f\u4e0d\u4f1a\u53d8\u7816\u7684\u3002 3.1 \u542f\u52a8\u65b9\u5f0f \u2003\u2003\uff081\uff09SD\u5361\u542f\u52a8\uff1a\u5728\u63d2\u4e0a\u6709\u5b8c\u6574\u56fa\u4ef6\u7684SD\u5361\u65f6\uff0c\u9ed8\u8ba4\u4eceSD\u5361\u542f\u52a8Ubuntu\u7cfb\u7edf\u3002 \u2003\u2003\uff082\uff09eMMC\u542f\u52a8\uff1aSD\u5361\u672a\u63d2\u5165\u3001SD\u5361\u5185\u56fa\u4ef6\u6821\u9a8c\u5931\u8d25\u65f6\uff0c\u4eceeMMC\u542f\u52a8Andriod\u7cfb\u7edf\u3002 3.2 \u542f\u52a8\u6b21\u5e8f \u2003\u2003GW3399\u4eceeMMC\u63a5\u53e3\u52a0\u8f7d\u7cfb\u7edf\uff0c\u542f\u52a8\u7684\u6b21\u5e8f\u662f\u8fd9\u6837\u7684\uff1a \u2003\u2003\uff081\uff09\u4e3b\u63a7\u4e0a\u7535\u521d\u59cb\u5316\uff1b \u2003\u2003\uff082\uff09BootRom\u4ee3\u7801\u5728SRAM\u4e0a\u8fd0\u884c\uff0c\u6821\u9a8c\u5b58\u50a8\u8bbe\u5907\u91cc\u7684BootLoader\uff1b \u2003\u2003\uff083\uff09\u82e5\u6821\u9a8c\u901a\u8fc7\uff0c\u52a0\u8f7d\u5e76\u8fd0\u884cBootLoader\u5f15\u5bfc\u4ee3\u7801\uff1b \u2003\u2003\uff084\uff09BootLoader\u521d\u59cb\u5316DDR\u5185\u5b58\uff0c\u52a0\u8f7dBootLoader\u7684\u5b8c\u6574\u4ee3\u7801\u5230DDR\u4e2d\u5e76\u8fd0\u884c\uff1b \u2003\u2003\uff085\uff09BootLoader\u52a0\u8f7d\u5b58\u50a8\u8bbe\u5907\u4e0a\u7684Linux\u5185\u6838\uff0c\u5e76\u5c06\u6267\u884c\u6743\u4ea4\u7ed9Linux\u5185\u6838\u3002 3.3 \u542f\u52a8\u6a21\u5f0f \u2003\u2003GW3399\u6709\u4e24\u79cd\u542f\u52a8\u6a21\u5f0f\uff1a Normal \u6a21\u5f0f \u2003\u2003Normal\u6a21\u5f0f\u5c31\u662f\u6b63\u5e38\u7684\u542f\u52a8\u8fc7\u7a0b\uff0c\u5404\u4e2a\u7ec4\u4ef6\u4f9d\u6b21\u52a0\u8f7d\uff0c\u6b63\u5e38\u8fdb\u5165\u7cfb\u7edf\u3002 Loader \u6a21\u5f0f \u2003\u2003\u8981\u8fdb\u5165Loader\u6a21\u5f0f\uff0c\u5fc5\u987b\u8ba9BootLoader\u5728\u542f\u52a8\u65f6\u68c0\u6d4b\u5230REC\uff08\u6062\u590d\uff09\u952e\u6309\u4e0b\uff0c\u4e14USB\u5904\u4e8e\u8fde\u63a5\u72b6\u6001\u3002\u4f7f\u8bbe\u5907\u8fdb\u5165\u5347\u7ea7\u6a21\u5f0f\u65b9\u6cd5\u5982\u4e0b: \u2003\u2003\uff081\uff09\u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\uff1b \u2003\u2003\uff082\uff09Type-C\u6570\u636e\u7ebf\u8fde\u63a5\u597d\u8bbe\u5907\u548c\u4e3b\u673a\uff1b \u2003\u2003\uff083\uff09\u6309\u4f4f\u8bbe\u5907\u4e0a\u7684REC\u952e\u5e76\u4fdd\u6301\uff1b \u2003\u2003\uff084\uff09\u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\u5927\u7ea6\u4e09\u79d2\u949f\u540e\uff0c\u677e\u5f00REC\u952e\u3002 \u2003\u2003\u5728Loader\u6a21\u5f0f\u4e0b\uff0cBootLoader\u4f1a\u8fdb\u5165\u5347\u7ea7\u72b6\u6001\uff0c\u7b49\u5f85\u4e3b\u673a\u547d\u4ee4\uff0c\u7528\u4e8e\u56fa\u4ef6\u5347\u7ea7\u7b49\u3002 3.4 \u4e0b\u8f7d\u548c\u70e7\u5199\u56fa\u4ef6 \u2003\u2003\u6839\u636e\u6240\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u6765\u9009\u62e9\u5408\u9002\u7684\u5de5\u5177\u53bb\u70e7\u5199SD\u5361\u56fa\u4ef6\uff1a \u5de5\u5177\u540d\u79f0 \u8fd0\u884c\u73af\u5883 \u5de5\u5177\u7c7b\u578b SD_Firmware_Tool Windows \u56fe\u5f62\u754c\u9762\u70e7\u5199\u5de5\u5177\uff0c\u7528\u4e8e\u5236\u4f5cSD\u5361\u542f\u52a8\u76d8 Andriod Tools Windows \u56fe\u5f62\u754c\u9762\u70e7\u5199\u5de5\u5177\uff0cWindows\u4e0b\u70e7\u5199\u56fa\u4ef6 upgrade_tool Linux \u547d\u4ee4\u884c\u70e7\u5199\u5de5\u5177\uff0cLinux\u4e0b\u70e7\u5199\u56fa\u4ef6 3.5 \u5f00\u673a \u2003\u2003\u786e\u8ba4\u4e3b\u677f\u914d\u4ef6\u8fde\u63a5\u65e0\u8bef\u540e\uff0c\u5c06\u7535\u6e90\u9002\u914d\u5668\u63d2\u5165\u5e26\u7535\u7684\u63d2\u5ea7\u4e0a\uff0c\u7535\u6e90\u7ebf\u63a5\u53e3\u63d2\u5165GW3399\uff0c\u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\uff0cGW3399\u4f1a\u81ea\u52a8\u5f00\u673a\u3002\u7cfb\u7edf\u5173\u673a\u540e\uff0c\u5e94\u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\u3002","title":"\u5b9e\u9a8c\u539f\u7406"},{"location":"lab1/theory/#_1","text":"","title":"\u5b9e\u9a8c\u539f\u7406"},{"location":"lab1/theory/#1","text":"\u5728\u540c\u5b66\u4eec\u4ee5\u524d\u5b66\u4e60\u7684\u8bfe\u7a0b\u4e2d\uff0c\u6e90\u7a0b\u5e8f\u7684\u7f16\u5199\u3001\u7f16\u8bd1\u548c\u8fd0\u884c\u90fd\u5728\u540c\u4e00\u4e2a\u5e73\u53f0\u5b8c\u6210\uff0c\u800c\u672c\u8bfe\u7a0b\u6d89\u53ca\u5d4c\u5165\u5f0f\u5f00\u53d1\uff0c\u9700\u8981\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u6280\u672f\u3002 \u2003\u2003\u4ea4\u53c9\u7f16\u8bd1\u662f\u5d4c\u5165\u5f0f\u5f00\u53d1\u4e2d\u7684\u4e00\u9879\u91cd\u8981\u6280\u672f\u3002\u6240\u8c13\u201c\u4ea4\u53c9\u201d\uff0c\u662f\u6307\u5728\u4e00\u4e2a\u5e73\u53f0\u4e0a\u751f\u6210\u53e6\u4e00\u4e2a\u5e73\u53f0\u7684\u53ef\u6267\u884c\u4ee3\u7801\uff0c\u5e76\u4e14\u8fd9\u4e24\u4e2a\u5e73\u53f0\u91c7\u7528\u4e0d\u540c\u7684ISA\uff08\u6bd4\u5982\u4e00\u4e2a\u662fX86\uff0c\u53e6\u4e00\u4e2a\u662fARM\uff09\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u2003\u2003\u4e00\u65b9\u9762\uff0c\u4ea4\u53c9\u7f16\u8bd1\u7ed9\u5d4c\u5165\u5f0f\u5f00\u53d1\u63d0\u4f9b\u4e86\u53ef\u80fd\u6027\u3002\u90e8\u5206\u5d4c\u5165\u5f0f\u7cfb\u7edf\u53d7\u9650\u4e8e\u5e94\u7528\u573a\u666f\uff0c\u9700\u8981\u88f8\u673a\u8fd0\u884c\u7a0b\u5e8f\u3002\u6b64\u65f6\uff0c\u53ea\u80fd\u901a\u8fc7\u4ea4\u53c9\u7f16\u8bd1\u6765\u5f00\u53d1\u5d4c\u5165\u5f0f\u7a0b\u5e8f\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u4ea4\u53c9\u7f16\u8bd1\u63d0\u9ad8\u4e86\u5d4c\u5165\u5f0f\u5f00\u53d1\u7684\u6548\u7387\u3002\u867d\u7136\u90e8\u5206\u5d4c\u5165\u5f0f\u7cfb\u7edf\u53ef\u4ee5\u8fd0\u884cOS\uff08\u5982\u5d4c\u5165\u5f0fLinux\u3001VxWorks\u7b49\uff09\uff0c\u4e5f\u80fd\u5b89\u88c5\u8bf8\u5982GCC\u7684\u7f16\u8bd1\u5668\uff0c\u4ece\u800c\u53ef\u4ee5\u76f4\u63a5\u5728\u5d4c\u5165\u5f0f\u5e73\u53f0\u4e0a\u8fdb\u884c\u5f00\u53d1\u3002\u4f46\u7531\u4e8e\u5d4c\u5165\u5f0f\u7cfb\u7edf\u53d7\u9650\u4e8e\u8d44\u6e90\u3001\u529f\u8017\u7b49\u9650\u5236\u6761\u4ef6\uff0c\u5176\u6027\u80fd\u4e0ePC\u76f8\u6bd4\u8f83\u5dee\uff0c\u5f00\u53d1\u6548\u7387\u8f83\u4f4e\u3002\u6b64\u65f6\uff0c\u53ef\u5728PC\u5e73\u53f0\u4e0a\u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5668\uff0c\u4ece\u800c\u53ef\u4ee5\u5c06\u5d4c\u5165\u5f0f\u7a0b\u5e8f\u7684\u5f00\u53d1\u8fc7\u7a0b\u632a\u5230PC\u7aef\uff0c\u4ee5\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u7f29\u77ed\u4ea7\u54c1\u7684\u7814\u53d1\u5468\u671f\u3002 \u2003\u2003\u8981\u8fdb\u884c\u4ea4\u53c9\u7f16\u8bd1\uff0c\u9700\u8981\u5148\u5728Host\u5e73\u53f0\u4e0a\u5b89\u88c5\u76f8\u5e94\u7684\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\uff0c\u7136\u540e\u7528\u5de5\u5177\u94fe\u7f16\u8bd1\u6e90\u4ee3\u7801\uff0c\u6700\u7ec8\u751f\u6210\u53ef\u5728\u76ee\u6807\u5e73\u53f0\u4e0a\u8fd0\u884c\u7684\u4e8c\u8fdb\u5236\u53ef\u6267\u884c\u6587\u4ef6\u3002 \u2003\u2003\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u548c\u8c03\u8bd5\uff0c\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u4e00\u822c\u6574\u5408\u4e86\u7f16\u8f91\u3001\u7f16\u8bd1\u3001\u6c47\u7f16\u3001\u94fe\u63a5\u3001\u8c03\u8bd5\u3001\u5de5\u7a0b\u7ba1\u7406\u53ca\u51fd\u6570\u5e93\u7b49\u5e38\u7528\u529f\u80fd\u6a21\u5757\u3002","title":"1. \u4ea4\u53c9\u7f16\u8bd1"},{"location":"lab1/theory/#2-gw3399","text":"\u56fa\u4ef6\u6709\u4e24\u79cd\u683c\u5f0f\uff1a \u200b\u2003\u2003\uff081\uff09\u7edf\u4e00\u56fa\u4ef6 \u2003\u2003\u7edf\u4e00\u56fa\u4ef6\u662f\u901a\u8fc7\u5b98\u65b9\u70e7\u5199\u5de5\u5177\uff0c\u5c06\u6240\u6709\u5206\u533a\u7684\u955c\u50cf\u6253\u5305\u6210\u72ec\u7acb\u7684\u4e00\u4e2a\u6587\u4ef6\uff0c\u65b9\u4fbf\u7cfb\u7edf\u8fdb\u884c\u5347\u7ea7\u3002 \u200b\u2003\u2003\uff082\uff09\u5206\u7acb\u56fa\u4ef6 \u2003\u2003\u5206\u7acb\u56fa\u4ef6\u662f\u5206\u533a\u7684\u6620\u50cf\u6570\u636e\u3002\u4f8b\u5982\uff0c\u7f16\u8bd1Ubuntu SDK\u4f1a\u6784\u5efa\u51fauboot.img\u3001trust.img\u3001boot.img\u7b49\u5206\u533a\u6620\u50cf\u6587\u4ef6\u3002\u901a\u8fc7\u5b98\u65b9\u7684\u70e7\u5199\u5de5\u5177\u53ef\u4ee5\u5bf9\u5177\u4f53\u7684\u5355\u4e00\u5206\u533a\u56fa\u4ef6\u8fdb\u884c\u9009\u62e9\u6027\u5347\u7ea7\u3002 \u2003\u2003\u672c\u5b9e\u9a8c\u4f7f\u7528\u7684GW3399\u5e73\u53f0\u91c7\u7528\u5206\u7acb\u56fa\u4ef6\uff0c\u4e3b\u8981\u5305\u542bBootLoader\u3001Trust\u3001U-Boot\u3001Boot\u3001RootFS\u7b49\u5206\u533a\u6620\u50cf\u4ee5\u53ca\u5305\u542b\u56fa\u4ef6\u5206\u533a\u4fe1\u606f\u7684parameter\u6587\u672c\u6587\u4ef6\u3002","title":"2. GW3399\u56fa\u4ef6"},{"location":"lab1/theory/#21-parametertxt","text":"parameter.txt\u5305\u542b\u4e86\u56fa\u4ef6\u7684\u7248\u672c\u53f7\u3001\u5206\u533a\u7c7b\u578b\u3001\u5206\u533a\u5730\u5740\u3001\u5206\u533a\u5927\u5c0f\u7b49\u5173\u952e\u4fe1\u606f\u3002 \u2003\u2003\u4e0b\u9762\u4ee5parameter-ubuntu.txt\u4e3a\u4f8b\u5b50\u505a\u4ecb\u7ecd\uff1a FIRMWARE_VER: 8.1 MACHINE_MODEL: RK3399 MACHINE_ID: 007 MANUFACTURER: RK3399 MAGIC: 0x5041524B ATAG: 0x00200800 MACHINE: 3399 CHECK_MASK: 0x80 PWR_HLD: 0,0,A,0,1 TYPE: GPT CMDLINE:mtdparts=rk29xxnand:0x00002000@0x00004000(uboot),0x00002000@0x00006000(trust),0x00002000@0x00008000(misc),0x00010000@0x0000a000(boot),0x00010000@0x0001a000(recovery),0x00010000@0x0002a000(backup),0x00020000@0x0003a000(oem),-@0x0005a000(rootfs:grow) uuid:rootfs=614e0000-0000-4b53-8000-1d28000054a9 \u6ce8\u610f CMDLINE\u53ea\u6709\u4e00\u884c\uff01\u5199\u5230parameter.txt\u65f6\u6ce8\u610f\u4e0d\u8981\u5206\u884c\u3002 \u2003\u2003\u5176\u4e2d\uff0cCMDLINE\u7ed9\u51fa\u4e86\u5206\u533a\u4fe1\u606f\u3002\u4ee5uboot\u4e3a\u4f8b\uff0c0x00002000@0x00004000(uboot)\u4e2d\uff0c0x00004000\u4e3auboot\u5206\u533a\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c0x00002000\u4e3a\u5206\u533a\u7684\u5927\u5c0f\uff0c\u5373\uff1a\u5206\u533a\u5927\u5c0f@\u5206\u533a\u8d77\u59cb\u4f4d\u7f6e\uff0c\u540e\u9762\u7684\u5206\u533a\u89c4\u5219\u76f8\u540c\u3002\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u9700\u8981\u589e\u51cf\u6216\u8005\u4fee\u6539\u5206\u533a\u4fe1\u606f\uff0c\u4f46\u662f\u8bf7\u6700\u5c11\u4fdd\u7559uboot, trust, boot, rootfs\u5206\u533a\uff0c\u8fd9\u662f\u673a\u5668\u80fd\u6b63\u5e38\u542f\u52a8\u7684\u524d\u63d0\u6761\u4ef6\u3002","title":"2.1 parameter.txt"},{"location":"lab1/theory/#22","text":"GW3399\u56fa\u4ef6\u4e2d\uff0c\u5fc5\u987b\u5305\u542bU-Boot\u3001Trust\u3001Boot\u3001RootFS\u5206\u533a\uff0c\u5176\u4f59\u53ef\u6839\u636e\u9700\u8981\u8fdb\u884c\u914d\u7f6e\u3002 \u5206\u533a \u8bf4\u660e uboot \u5206\u533a \u70e7\u5199 uboot \u7f16\u8bd1\u51fa\u6765\u7684 uboot.img trust \u5206\u533a \u70e7\u5199 uboot \u7f16\u8bd1\u51fa\u6765\u7684 trust.img misc \u5206\u533a \u70e7\u5199 misc.img\u3002\u5f00\u673a\u68c0\u6d4b\u8fdb\u5165recovery\u6a21\u5f0f.\uff08\u53ef\u9009\uff09 boot \u5206\u533a \u70e7\u5199 kernel \u7f16\u8bd1\u51fa\u6765\u7684 boot.img\uff0c\u5305\u542bkernel\u548c\u8bbe\u5907\u6811\u4fe1\u606f recovery \u5206\u533a \u70e7\u5199 recovery.img.\uff08\u53ef\u9009\uff09 backup \u5206\u533a \u9884\u7559,\u6682\u65f6\u6ca1\u6709\u7528\u3002\u540e\u7eed\u53ef\u4f5c\u4e3arecovery\u7684backup\u4f7f\u7528.\uff08\u53ef\u9009\uff09 oem \u5206\u533a \u7ed9\u5382\u5bb6\u4f7f\u7528,\u5b58\u653e\u5382\u5bb6\u7684 app \u6216\u6570\u636e\uff0c\u53ea\u8bfb\u3002\u6302\u8f7d\u5728/oem \u76ee\u5f55.\uff08\u53ef\u9009\uff09 rootfs \u5206\u533a \u5b58\u653ebuildroot\u6216\u8005debian\u7f16\u51fa\u6765\u7684rootfs.img,\u53ea\u8bfb. userdata\u5206\u533a \u5b58\u653eapp\u4e34\u65f6\u751f\u6210\u7684\u6587\u4ef6\u6216\u8005\u662f\u7ed9\u6700\u7ec8\u7528\u6237\u4f7f\u7528\u3002\u53ef\u8bfb\u5199,\u6302\u8f7d\u5728/userdata\u76ee\u5f55\u4e0b.\uff08\u53ef\u9009\uff09","title":"2.2 \u5206\u533a\u8bf4\u660e"},{"location":"lab1/theory/#23-package-file","text":"\u6b64\u6587\u4ef6\u7528\u4e8e\u56fa\u4ef6\u6253\u5305\uff0c\u5e94\u5f53\u4e0eparameter\u4fdd\u6301\u4e00\u81f4\u3002\u4ee5rk3399-ubuntu-package-file\u4e3a\u4f8b\u4ecb\u7ecd: # NAME Relative path # #HWDEF HWDEF package-file package-file bootloader Image/MiniLoaderAll.bin parameter Image/parameter.txt trust Image/trust.img uboot Image/uboot.img boot Image/boot.img rootfs Image/rootfs.img backup RESERVED \u2003\u2003\u4ee5\u4e0a\u662f\u7f16\u8bd1\u751f\u6210\u7684\u955c\u50cf\u6587\u4ef6\uff0c\u53ef\u6839\u636e\u9700\u8981\uff0c\u4fee\u6539\u5176\u4e2d\u7684\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u540d\u79f0\u3002\u4f8b\u5982\uff0c\u6587\u4ef6\u7cfb\u7edf\u7684\u6587\u4ef6\u540d\u4e3aubuntu-rootfs.img\u65f6\uff0c\u5e94\u5c06\u5012\u6570\u7b2c\u4e8c\u884c\u6539\u4e3aImage/ubuntu-rootfs.img\u3002","title":"2.3 package-file"},{"location":"lab1/theory/#3-gw3399","text":"GW3399\u5b9e\u9a8c\u5e73\u53f0\u6709\u7075\u6d3b\u7684\u542f\u52a8\u65b9\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u9664\u975e\u786c\u4ef6\u635f\u574f\uff0cGW3399\u5b9e\u9a8c\u5e73\u53f0\u662f\u4e0d\u4f1a\u53d8\u7816\u7684\u3002","title":"3. GW3399\u7cfb\u7edf\u542f\u52a8\u65b9\u5f0f"},{"location":"lab1/theory/#31","text":"\uff081\uff09SD\u5361\u542f\u52a8\uff1a\u5728\u63d2\u4e0a\u6709\u5b8c\u6574\u56fa\u4ef6\u7684SD\u5361\u65f6\uff0c\u9ed8\u8ba4\u4eceSD\u5361\u542f\u52a8Ubuntu\u7cfb\u7edf\u3002 \u2003\u2003\uff082\uff09eMMC\u542f\u52a8\uff1aSD\u5361\u672a\u63d2\u5165\u3001SD\u5361\u5185\u56fa\u4ef6\u6821\u9a8c\u5931\u8d25\u65f6\uff0c\u4eceeMMC\u542f\u52a8Andriod\u7cfb\u7edf\u3002","title":"3.1 \u542f\u52a8\u65b9\u5f0f"},{"location":"lab1/theory/#32","text":"GW3399\u4eceeMMC\u63a5\u53e3\u52a0\u8f7d\u7cfb\u7edf\uff0c\u542f\u52a8\u7684\u6b21\u5e8f\u662f\u8fd9\u6837\u7684\uff1a \u2003\u2003\uff081\uff09\u4e3b\u63a7\u4e0a\u7535\u521d\u59cb\u5316\uff1b \u2003\u2003\uff082\uff09BootRom\u4ee3\u7801\u5728SRAM\u4e0a\u8fd0\u884c\uff0c\u6821\u9a8c\u5b58\u50a8\u8bbe\u5907\u91cc\u7684BootLoader\uff1b \u2003\u2003\uff083\uff09\u82e5\u6821\u9a8c\u901a\u8fc7\uff0c\u52a0\u8f7d\u5e76\u8fd0\u884cBootLoader\u5f15\u5bfc\u4ee3\u7801\uff1b \u2003\u2003\uff084\uff09BootLoader\u521d\u59cb\u5316DDR\u5185\u5b58\uff0c\u52a0\u8f7dBootLoader\u7684\u5b8c\u6574\u4ee3\u7801\u5230DDR\u4e2d\u5e76\u8fd0\u884c\uff1b \u2003\u2003\uff085\uff09BootLoader\u52a0\u8f7d\u5b58\u50a8\u8bbe\u5907\u4e0a\u7684Linux\u5185\u6838\uff0c\u5e76\u5c06\u6267\u884c\u6743\u4ea4\u7ed9Linux\u5185\u6838\u3002","title":"3.2 \u542f\u52a8\u6b21\u5e8f"},{"location":"lab1/theory/#33","text":"GW3399\u6709\u4e24\u79cd\u542f\u52a8\u6a21\u5f0f\uff1a Normal \u6a21\u5f0f \u2003\u2003Normal\u6a21\u5f0f\u5c31\u662f\u6b63\u5e38\u7684\u542f\u52a8\u8fc7\u7a0b\uff0c\u5404\u4e2a\u7ec4\u4ef6\u4f9d\u6b21\u52a0\u8f7d\uff0c\u6b63\u5e38\u8fdb\u5165\u7cfb\u7edf\u3002 Loader \u6a21\u5f0f \u2003\u2003\u8981\u8fdb\u5165Loader\u6a21\u5f0f\uff0c\u5fc5\u987b\u8ba9BootLoader\u5728\u542f\u52a8\u65f6\u68c0\u6d4b\u5230REC\uff08\u6062\u590d\uff09\u952e\u6309\u4e0b\uff0c\u4e14USB\u5904\u4e8e\u8fde\u63a5\u72b6\u6001\u3002\u4f7f\u8bbe\u5907\u8fdb\u5165\u5347\u7ea7\u6a21\u5f0f\u65b9\u6cd5\u5982\u4e0b: \u2003\u2003\uff081\uff09\u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\uff1b \u2003\u2003\uff082\uff09Type-C\u6570\u636e\u7ebf\u8fde\u63a5\u597d\u8bbe\u5907\u548c\u4e3b\u673a\uff1b \u2003\u2003\uff083\uff09\u6309\u4f4f\u8bbe\u5907\u4e0a\u7684REC\u952e\u5e76\u4fdd\u6301\uff1b \u2003\u2003\uff084\uff09\u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\u5927\u7ea6\u4e09\u79d2\u949f\u540e\uff0c\u677e\u5f00REC\u952e\u3002 \u2003\u2003\u5728Loader\u6a21\u5f0f\u4e0b\uff0cBootLoader\u4f1a\u8fdb\u5165\u5347\u7ea7\u72b6\u6001\uff0c\u7b49\u5f85\u4e3b\u673a\u547d\u4ee4\uff0c\u7528\u4e8e\u56fa\u4ef6\u5347\u7ea7\u7b49\u3002","title":"3.3 \u542f\u52a8\u6a21\u5f0f"},{"location":"lab1/theory/#34","text":"\u6839\u636e\u6240\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u6765\u9009\u62e9\u5408\u9002\u7684\u5de5\u5177\u53bb\u70e7\u5199SD\u5361\u56fa\u4ef6\uff1a \u5de5\u5177\u540d\u79f0 \u8fd0\u884c\u73af\u5883 \u5de5\u5177\u7c7b\u578b SD_Firmware_Tool Windows \u56fe\u5f62\u754c\u9762\u70e7\u5199\u5de5\u5177\uff0c\u7528\u4e8e\u5236\u4f5cSD\u5361\u542f\u52a8\u76d8 Andriod Tools Windows \u56fe\u5f62\u754c\u9762\u70e7\u5199\u5de5\u5177\uff0cWindows\u4e0b\u70e7\u5199\u56fa\u4ef6 upgrade_tool Linux \u547d\u4ee4\u884c\u70e7\u5199\u5de5\u5177\uff0cLinux\u4e0b\u70e7\u5199\u56fa\u4ef6","title":"3.4 \u4e0b\u8f7d\u548c\u70e7\u5199\u56fa\u4ef6"},{"location":"lab1/theory/#35","text":"\u786e\u8ba4\u4e3b\u677f\u914d\u4ef6\u8fde\u63a5\u65e0\u8bef\u540e\uff0c\u5c06\u7535\u6e90\u9002\u914d\u5668\u63d2\u5165\u5e26\u7535\u7684\u63d2\u5ea7\u4e0a\uff0c\u7535\u6e90\u7ebf\u63a5\u53e3\u63d2\u5165GW3399\uff0c\u6253\u5f00\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\uff0cGW3399\u4f1a\u81ea\u52a8\u5f00\u673a\u3002\u7cfb\u7edf\u5173\u673a\u540e\uff0c\u5e94\u5173\u95ed\u7535\u6e90\u5f00\u5173\uff08PWR\uff09\u3002","title":"3.5 \u5f00\u673a"},{"location":"lab2/gpio/","text":"U-Boot\u64cd\u4f5cGPIO 1. GW3399 GPIO\u7b80\u4ecb 1.1 GW3399\u7684GPIO\u5212\u5206 \u2003\u2003GPIO\uff08General-Purpose Input/Output\uff0c\u901a\u7528\u8f93\u5165\u8f93\u51fa\uff09\u662f\u4e00\u79cd\u80fd\u591f\u88ab\u8fd0\u884c\u65f6\u8f6f\u4ef6\u8fdb\u884c\u52a8\u6001\u914d\u7f6e\u548c\u63a7\u5236\u7684\u901a\u7528I/O\u5f15\u811a\u3002\u5d4c\u5165\u5f0f\u5f00\u53d1\u8005\u901a\u8fc7\u7f16\u7a0b\uff0c\u65e2\u53ef\u4ee5\u4f7fGPIO\u4f5c\u4e3a\u8f93\u51fa\u5f15\u811a\uff0c\u4ee5\u8f93\u51fa\u9ad8/\u4f4e\u7535\u5e73\uff1b\u4e5f\u53ef\u4ee5\u4f7fGPIO\u4f5c\u4e3a\u8f93\u5165\u5f15\u811a\uff0c\u4ee5\u8bfb\u53d6\u5916\u754c\u8f93\u5165\u5230\u5d4c\u5165\u5f0f\u5904\u7406\u5668\u7684\u4fe1\u53f7\u3002 \u2003\u2003RK3399\u5171\u67095\u7ec4GPIO\uff0c\u5206\u522b\u7528GPIO0\u3001GPIO1\u3001GPIO2\u3001GPIO3\u3001GPIO4\u6765\u8868\u793a\uff1b\u800c\u6bcf\u7ec4GPIO\u53c8\u5305\u542b32\u4e2aIO\u5f15\u811a\uff0c\u5206\u522b\u7528A0~A7\u3001B0~B7\u3001C0~C7\u3001D0~D7\u8868\u793a\u3002 \u4e3e\u4e2a\u6817\u5b50 GPIO0_A1\u8868\u793aRK3399\u7684\u7b2c1\u7ec4\u7f16\u53f7\u4e3a2\u7684GPIO\u5f15\u811a\uff0c\u800cGPIO2_B4\u5219\u8868\u793a\u7b2c3\u7ec4\u7f16\u53f7\u4e3a12\u7684GPIO\u5f15\u811a\u3002 1.2 \u6269\u5c55\u677fLED\u7684GPIO\u5f15\u811a \u2003\u2003\u7531\u5982\u4e0b\u6240\u793a\u7684\u7535\u8def\u56fe\u53ef\u77e5\uff0cARM\u6269\u5c55\u677f\u4e0a3\u7684\u4e2aLED\uff08D4\u3001D3\u548cD2\uff09\u5206\u522b\u8fde\u63a5\u5230\u4e86CPU\u7684GPIO2_B4\u3001GPIO2_B3\u3001GPIO2_B1\uff1b\u5e76\u4e14\u7531\u4e8eLED\u7684\u9633\u6781\u8fde\u63a5\u5230\u4e86\u9ad8\u7535\u5e73\uff0c\u56e0\u6b64\u5f53GPIO\u8f93\u51fa\u4f4e\u7535\u5e73\u65f6\uff0cLED\u624d\u4f1a\u88ab\u70b9\u4eae\u3002 \u52d8\u8bef\u8bf4\u660e \u6ce8\u610f\uff1aD2\u5b9e\u9645\u8fde\u63a5\u5230CPU\u7684\u7ba1\u811a\u5e94\u8be5\u662fGPIO2_B1\uff0c\u800c\u4e0d\u662f\u56fe\u4e0a\u6807\u6ce8\u7684GPIO2_B2\u3002 2. \u5728U-Boot\u4e2d\u64cd\u4f5cGPIO 2.1 GPIO\u7684\u8868\u793a \u2003\u2003U-Boot\u4e2d\u7528A\u3001B\u3001C\u3001D\u3001E\u8868\u793aGW3399\u76845\u7ec4IO\uff0c\u7528\u7f16\u53f70\u523031\u8868\u793a\u6bcf\u7ec4IO\u4e2d\u7684\u5177\u4f53IO\u53e3\u3002 \u4e3e\u4e2a\u6817\u5b50 \u6807\u53f7D4\u7684LED\u5728\u7535\u8def\u56fe\u4e0a\u5bf9\u5e94GPIO2_B4\uff0c\u5728U-Boot\u4e2d\u88ab\u8868\u793a\u4e3a\u201cC12\u201d\uff08\u5b57\u7b26\u4e32\uff09 \u6807\u53f7D3\u7684LED\u5728\u7535\u8def\u56fe\u4e0a\u5bf9\u5e94GPIO2_B3\uff0c\u5728U-Boot\u4e2d\u88ab\u8868\u793a\u4e3a\u201cC11\u201d\uff08\u5b57\u7b26\u4e32\uff09 \u6807\u53f7D2\u7684LED\u5728\u7535\u8def\u56fe\u4e0a\u5bf9\u5e94GPIO2_B1\uff0c\u5728U-Boot\u4e2d\u88ab\u8868\u793a\u4e3a\u201cC9\u201d\uff08\u5b57\u7b26\u4e32\uff09 \u2003\u2003\u5373\uff1a LED\u706f\u6807\u53f7 \u5bf9\u5e94\u7684CPU GPIO\u7ba1\u811a \u5728U-Boot\u4e2d\u7684\u8868\u793a\u65b9\u5f0f D4 GPIO2_B4 C12 D3 GPIO2_B3 C11 D2 GPIO2_B1 C9 2.2 U-Boot\u4e2dGPIO\u64cd\u4f5c // \u5c06GPIO\u540d\u5b57\u8f6c\u6362\u6210\u5bf9\u5e94GPIO\u53e3\u7a0b\u5e8f\u4e2d\u7684\u8868\u793a\u65b9\u5f0f int gpio_lookup_name ( const char * name , struct udevice ** devp , unsigned int * offsetp , unsigned int * gpiop ); // \u83b7\u53d6GPIO\u7684\u4f7f\u7528\u6743 int gpio_request ( unsigned gpio , const char * label ); // \u91ca\u653eGPIO\u7684\u4f7f\u7528\u6743 int gpio_free ( unsigned gpio ); \u2003\u2003\u4ee5\u4e0a\u51fd\u6570\u662f\u5728drivers/gpio/gpio-uclass.c\u4e2d\u5b9a\u4e49\u3002 // \u8bbe\u7f6eGPIO\u4e3a\u8f93\u5165\u6a21\u5f0f int gpio_direction_input ( unsigned gpio ); // \u8bbe\u7f6eGPIO\u8f93\u51fa\u503c int gpio_direction_output ( unsigned gpio , int value ); // \u83b7\u53d6\u5f53\u524dGPIO\u7ba1\u811a\u72b6\u6001 int gpio_get_value ( unsigned gpio ); \u2003\u2003\u4ee5\u4e0a\u51fd\u6570\u662f\u5728drivers/gpio/rk_gpio.c\u4e2d\u5b9a\u4e49\u3002 2.3 U-Boot\u547d\u4ee4\u5b9a\u4e49 \u2003\u2003\u7531\u201cU-Boot\u547d\u4ee4\u5b9e\u73b0\u53ca\u9a71\u52a8\u6a21\u578b\u201d\u53ef\u77e5\uff0c\u65b0\u589eU-Boot\u547d\u4ee4\u65f6\uff0c\u9700\u8981\u901a\u8fc7U_BOOT_CMD\u5b8f\u5b9a\u4e49\uff08\u5373cmd_tbl_s\uff09\u6765\u5b9e\u73b0\uff1a U_BOOT_CMD ( name , maxargs , repeatable , command , \"usage\" , \"help\" ) \u2003\u2003\u8be5\u5b8f\u5b9a\u4e49\u67096\u4e2a\u4e3b\u8981\u53c2\u6570\uff0c\u5176\u542b\u4e49\u5206\u522b\u5982\u4e0b\u8868\u6240\u793a\u3002 \u53c2\u6570 \u7c7b\u578b \u91ca\u4e49 name -- \u547d\u4ee4\u540d\uff0c\u975e\u5b57\u7b26\u4e32\uff0c\u4f46\u5728U_BOOT_CMD\u4e2d\u7528\u201c#\u201d\u7b26\u53f7\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32 maxargs \u6574\u578b \u547d\u4ee4\u7684\u6700\u5927\u53c2\u6570\u4e2a\u6570 repeatable \u6574\u578b \u662f\u5426\u81ea\u52a8\u91cd\u590d\uff08\u6309Enter\u952e\u662f\u5426\u4f1a\u91cd\u590d\u6267\u884c\uff1a0-\u5426\uff0c1-\u662f\uff09 command void* \u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u547d\u4ee4\u6240\u5bf9\u5e94\u7684\u54cd\u5e94\u51fd\u6570 usage \u5b57\u7b26\u4e32 \u547d\u4ee4\u7684\u7b80\u77ed\u4f7f\u7528\u8bf4\u660e help \u5b57\u7b26\u4e32 \u547d\u4ee4\u7684\u8f83\u8be6\u7ec6\u7684\u4f7f\u7528\u8bf4\u660e","title":"U-Boot\u64cd\u4f5cGPIO"},{"location":"lab2/gpio/#u-bootgpio","text":"","title":"U-Boot\u64cd\u4f5cGPIO"},{"location":"lab2/gpio/#1-gw3399-gpio","text":"","title":"1. GW3399 GPIO\u7b80\u4ecb"},{"location":"lab2/gpio/#11-gw3399gpio","text":"GPIO\uff08General-Purpose Input/Output\uff0c\u901a\u7528\u8f93\u5165\u8f93\u51fa\uff09\u662f\u4e00\u79cd\u80fd\u591f\u88ab\u8fd0\u884c\u65f6\u8f6f\u4ef6\u8fdb\u884c\u52a8\u6001\u914d\u7f6e\u548c\u63a7\u5236\u7684\u901a\u7528I/O\u5f15\u811a\u3002\u5d4c\u5165\u5f0f\u5f00\u53d1\u8005\u901a\u8fc7\u7f16\u7a0b\uff0c\u65e2\u53ef\u4ee5\u4f7fGPIO\u4f5c\u4e3a\u8f93\u51fa\u5f15\u811a\uff0c\u4ee5\u8f93\u51fa\u9ad8/\u4f4e\u7535\u5e73\uff1b\u4e5f\u53ef\u4ee5\u4f7fGPIO\u4f5c\u4e3a\u8f93\u5165\u5f15\u811a\uff0c\u4ee5\u8bfb\u53d6\u5916\u754c\u8f93\u5165\u5230\u5d4c\u5165\u5f0f\u5904\u7406\u5668\u7684\u4fe1\u53f7\u3002 \u2003\u2003RK3399\u5171\u67095\u7ec4GPIO\uff0c\u5206\u522b\u7528GPIO0\u3001GPIO1\u3001GPIO2\u3001GPIO3\u3001GPIO4\u6765\u8868\u793a\uff1b\u800c\u6bcf\u7ec4GPIO\u53c8\u5305\u542b32\u4e2aIO\u5f15\u811a\uff0c\u5206\u522b\u7528A0~A7\u3001B0~B7\u3001C0~C7\u3001D0~D7\u8868\u793a\u3002 \u4e3e\u4e2a\u6817\u5b50 GPIO0_A1\u8868\u793aRK3399\u7684\u7b2c1\u7ec4\u7f16\u53f7\u4e3a2\u7684GPIO\u5f15\u811a\uff0c\u800cGPIO2_B4\u5219\u8868\u793a\u7b2c3\u7ec4\u7f16\u53f7\u4e3a12\u7684GPIO\u5f15\u811a\u3002","title":"1.1 GW3399\u7684GPIO\u5212\u5206"},{"location":"lab2/gpio/#12-ledgpio","text":"\u7531\u5982\u4e0b\u6240\u793a\u7684\u7535\u8def\u56fe\u53ef\u77e5\uff0cARM\u6269\u5c55\u677f\u4e0a3\u7684\u4e2aLED\uff08D4\u3001D3\u548cD2\uff09\u5206\u522b\u8fde\u63a5\u5230\u4e86CPU\u7684GPIO2_B4\u3001GPIO2_B3\u3001GPIO2_B1\uff1b\u5e76\u4e14\u7531\u4e8eLED\u7684\u9633\u6781\u8fde\u63a5\u5230\u4e86\u9ad8\u7535\u5e73\uff0c\u56e0\u6b64\u5f53GPIO\u8f93\u51fa\u4f4e\u7535\u5e73\u65f6\uff0cLED\u624d\u4f1a\u88ab\u70b9\u4eae\u3002 \u52d8\u8bef\u8bf4\u660e \u6ce8\u610f\uff1aD2\u5b9e\u9645\u8fde\u63a5\u5230CPU\u7684\u7ba1\u811a\u5e94\u8be5\u662fGPIO2_B1\uff0c\u800c\u4e0d\u662f\u56fe\u4e0a\u6807\u6ce8\u7684GPIO2_B2\u3002","title":"1.2 \u6269\u5c55\u677fLED\u7684GPIO\u5f15\u811a"},{"location":"lab2/gpio/#2-u-bootgpio","text":"","title":"2. \u5728U-Boot\u4e2d\u64cd\u4f5cGPIO"},{"location":"lab2/gpio/#21-gpio","text":"U-Boot\u4e2d\u7528A\u3001B\u3001C\u3001D\u3001E\u8868\u793aGW3399\u76845\u7ec4IO\uff0c\u7528\u7f16\u53f70\u523031\u8868\u793a\u6bcf\u7ec4IO\u4e2d\u7684\u5177\u4f53IO\u53e3\u3002 \u4e3e\u4e2a\u6817\u5b50 \u6807\u53f7D4\u7684LED\u5728\u7535\u8def\u56fe\u4e0a\u5bf9\u5e94GPIO2_B4\uff0c\u5728U-Boot\u4e2d\u88ab\u8868\u793a\u4e3a\u201cC12\u201d\uff08\u5b57\u7b26\u4e32\uff09 \u6807\u53f7D3\u7684LED\u5728\u7535\u8def\u56fe\u4e0a\u5bf9\u5e94GPIO2_B3\uff0c\u5728U-Boot\u4e2d\u88ab\u8868\u793a\u4e3a\u201cC11\u201d\uff08\u5b57\u7b26\u4e32\uff09 \u6807\u53f7D2\u7684LED\u5728\u7535\u8def\u56fe\u4e0a\u5bf9\u5e94GPIO2_B1\uff0c\u5728U-Boot\u4e2d\u88ab\u8868\u793a\u4e3a\u201cC9\u201d\uff08\u5b57\u7b26\u4e32\uff09 \u2003\u2003\u5373\uff1a LED\u706f\u6807\u53f7 \u5bf9\u5e94\u7684CPU GPIO\u7ba1\u811a \u5728U-Boot\u4e2d\u7684\u8868\u793a\u65b9\u5f0f D4 GPIO2_B4 C12 D3 GPIO2_B3 C11 D2 GPIO2_B1 C9","title":"2.1 GPIO\u7684\u8868\u793a"},{"location":"lab2/gpio/#22-u-bootgpio","text":"// \u5c06GPIO\u540d\u5b57\u8f6c\u6362\u6210\u5bf9\u5e94GPIO\u53e3\u7a0b\u5e8f\u4e2d\u7684\u8868\u793a\u65b9\u5f0f int gpio_lookup_name ( const char * name , struct udevice ** devp , unsigned int * offsetp , unsigned int * gpiop ); // \u83b7\u53d6GPIO\u7684\u4f7f\u7528\u6743 int gpio_request ( unsigned gpio , const char * label ); // \u91ca\u653eGPIO\u7684\u4f7f\u7528\u6743 int gpio_free ( unsigned gpio ); \u2003\u2003\u4ee5\u4e0a\u51fd\u6570\u662f\u5728drivers/gpio/gpio-uclass.c\u4e2d\u5b9a\u4e49\u3002 // \u8bbe\u7f6eGPIO\u4e3a\u8f93\u5165\u6a21\u5f0f int gpio_direction_input ( unsigned gpio ); // \u8bbe\u7f6eGPIO\u8f93\u51fa\u503c int gpio_direction_output ( unsigned gpio , int value ); // \u83b7\u53d6\u5f53\u524dGPIO\u7ba1\u811a\u72b6\u6001 int gpio_get_value ( unsigned gpio ); \u2003\u2003\u4ee5\u4e0a\u51fd\u6570\u662f\u5728drivers/gpio/rk_gpio.c\u4e2d\u5b9a\u4e49\u3002","title":"2.2 U-Boot\u4e2dGPIO\u64cd\u4f5c"},{"location":"lab2/gpio/#23-u-boot","text":"\u7531\u201cU-Boot\u547d\u4ee4\u5b9e\u73b0\u53ca\u9a71\u52a8\u6a21\u578b\u201d\u53ef\u77e5\uff0c\u65b0\u589eU-Boot\u547d\u4ee4\u65f6\uff0c\u9700\u8981\u901a\u8fc7U_BOOT_CMD\u5b8f\u5b9a\u4e49\uff08\u5373cmd_tbl_s\uff09\u6765\u5b9e\u73b0\uff1a U_BOOT_CMD ( name , maxargs , repeatable , command , \"usage\" , \"help\" ) \u2003\u2003\u8be5\u5b8f\u5b9a\u4e49\u67096\u4e2a\u4e3b\u8981\u53c2\u6570\uff0c\u5176\u542b\u4e49\u5206\u522b\u5982\u4e0b\u8868\u6240\u793a\u3002 \u53c2\u6570 \u7c7b\u578b \u91ca\u4e49 name -- \u547d\u4ee4\u540d\uff0c\u975e\u5b57\u7b26\u4e32\uff0c\u4f46\u5728U_BOOT_CMD\u4e2d\u7528\u201c#\u201d\u7b26\u53f7\u8f6c\u5316\u4e3a\u5b57\u7b26\u4e32 maxargs \u6574\u578b \u547d\u4ee4\u7684\u6700\u5927\u53c2\u6570\u4e2a\u6570 repeatable \u6574\u578b \u662f\u5426\u81ea\u52a8\u91cd\u590d\uff08\u6309Enter\u952e\u662f\u5426\u4f1a\u91cd\u590d\u6267\u884c\uff1a0-\u5426\uff0c1-\u662f\uff09 command void* \u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u547d\u4ee4\u6240\u5bf9\u5e94\u7684\u54cd\u5e94\u51fd\u6570 usage \u5b57\u7b26\u4e32 \u547d\u4ee4\u7684\u7b80\u77ed\u4f7f\u7528\u8bf4\u660e help \u5b57\u7b26\u4e32 \u547d\u4ee4\u7684\u8f83\u8be6\u7ec6\u7684\u4f7f\u7528\u8bf4\u660e","title":"2.3 U-Boot\u547d\u4ee4\u5b9a\u4e49"},{"location":"lab2/overview/","text":"\u5b9e\u9a8c\u6982\u8ff0 \u5b9e\u9a8c\u76ee\u7684 \u2003\u20031. \u4e86\u89e3U-Boot\u7684\u9a71\u52a8\u6846\u67b6 \u2003\u20032. \u638c\u63e1U-Boot\u4e0a\u7684\u7f16\u7a0b\u65b9\u6cd5 \u5b9e\u9a8c\u5185\u5bb9 \u2003\u2003\u5728UBoot\u4e2d\u6dfb\u52a0\u4e00\u6761LED\u547d\u4ee4\u7528\u6765\u63a7\u5236ARM\u6269\u5c55\u677f\u4e0aLED\uff0c\u5373\u5728U-Boot\u4e0a\u5b9e\u73b0\u5982\u4e0b\u547d\u4ee4\uff1a > led-test on <led> # \u70b9\u4eae\u6307\u5b9aLED > led-test off <led> # \u7184\u706d\u6307\u5b9aLED > led-test toggle <led> # \u53cd\u8f6c\u6307\u5b9aLED","title":"\u5b9e\u9a8c\u6982\u8ff0"},{"location":"lab2/overview/#_1","text":"","title":"\u5b9e\u9a8c\u6982\u8ff0"},{"location":"lab2/overview/#_2","text":"1. \u4e86\u89e3U-Boot\u7684\u9a71\u52a8\u6846\u67b6 \u2003\u20032. \u638c\u63e1U-Boot\u4e0a\u7684\u7f16\u7a0b\u65b9\u6cd5","title":"\u5b9e\u9a8c\u76ee\u7684"},{"location":"lab2/overview/#_3","text":"\u5728UBoot\u4e2d\u6dfb\u52a0\u4e00\u6761LED\u547d\u4ee4\u7528\u6765\u63a7\u5236ARM\u6269\u5c55\u677f\u4e0aLED\uff0c\u5373\u5728U-Boot\u4e0a\u5b9e\u73b0\u5982\u4e0b\u547d\u4ee4\uff1a > led-test on <led> # \u70b9\u4eae\u6307\u5b9aLED > led-test off <led> # \u7184\u706d\u6307\u5b9aLED > led-test toggle <led> # \u53cd\u8f6c\u6307\u5b9aLED","title":"\u5b9e\u9a8c\u5185\u5bb9"},{"location":"lab2/step/","text":"\u5b9e\u9a8c\u6b65\u9aa4 \u2003\u20031. \u5728u-boot/cmd\u76ee\u5f55\u4e0b\uff0c\u7f16\u5199led-test.c\uff1b Tips \u53ef\u53c2\u8003u-boot/cmd/gpio.c\u6765\u7f16\u5199led-test.c\u3002 \u2003\u20032. \u4fee\u6539Makefile\uff0c\u5e76\u91cd\u65b0\u7f16\u8bd1U-Boot\uff1b \u2003\u2003\u2003\u5728u-boot/cmd/Makefile\u6587\u4ef6\u4e0a\u589e\u52a0\uff1a obj-y += led-test.o \u2003\u2003\u2003\u4fee\u6539\u540e\u91cd\u65b0\u7f16\u8bd1\uff0c\u5373\u53ef\u5c06led-test.c\u7f16\u8bd1\u5230uboot.img\u4e2d\u3002 \u2003\u20033. \u5c06\u6269\u5c55\u677f\u901a\u8fc7\u6392\u7ebf\u8fde\u63a5\u5230GW3399\u7684EXT\u63a5\u53e3\uff1b \u2003\u20034. \u4f7f\u7528\u4e0b\u8f7d\u5206\u7acb\u56fa\u4ef6\u7684\u65b9\u6cd5\uff0c\u5c06\u65b0\u751f\u6210\u7684uboot.img\u4e0b\u8f7d\u5230GW3399\uff1b \u2003\u20035. \u4f7f\u7528MobaXterm\u6216\u5176\u4ed6\u4e32\u53e3\u8c03\u8bd5\u5de5\u5177\uff0c\u8fde\u63a5\u5230GW3399\u7684\u4e32\u53e3\u3002\u5728\u56fa\u4ef6\u542f\u52a8\u8fc7\u7a0b\u4e2d\u8f93\u51fa\u201cHit key to stop autoboot('CTRL+C')\u201d\u65f6\uff0c\u6309\u4e0bCtrl+C\u4e2d\u65ad\u542f\u52a8\u8fc7\u7a0b\uff0c\u4ece\u800c\u8fdb\u5165U-Boot\u547d\u4ee4\u884c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u2003\u20036. \u5728U-Boot\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u4e0b\u5217\u547d\u4ee4\uff0c\u67e5\u770b\u6269\u5c55\u677fLED\u7684\u72b6\u6001\u53d8\u5316\u3002 > led-test on D4 > led-test toggle D3 > led-test toggle D3 > led-test off D4 > led-test on D2","title":"\u5b9e\u9a8c\u6b65\u9aa4"},{"location":"lab2/step/#_1","text":"1. \u5728u-boot/cmd\u76ee\u5f55\u4e0b\uff0c\u7f16\u5199led-test.c\uff1b Tips \u53ef\u53c2\u8003u-boot/cmd/gpio.c\u6765\u7f16\u5199led-test.c\u3002 \u2003\u20032. \u4fee\u6539Makefile\uff0c\u5e76\u91cd\u65b0\u7f16\u8bd1U-Boot\uff1b \u2003\u2003\u2003\u5728u-boot/cmd/Makefile\u6587\u4ef6\u4e0a\u589e\u52a0\uff1a obj-y += led-test.o \u2003\u2003\u2003\u4fee\u6539\u540e\u91cd\u65b0\u7f16\u8bd1\uff0c\u5373\u53ef\u5c06led-test.c\u7f16\u8bd1\u5230uboot.img\u4e2d\u3002 \u2003\u20033. \u5c06\u6269\u5c55\u677f\u901a\u8fc7\u6392\u7ebf\u8fde\u63a5\u5230GW3399\u7684EXT\u63a5\u53e3\uff1b \u2003\u20034. \u4f7f\u7528\u4e0b\u8f7d\u5206\u7acb\u56fa\u4ef6\u7684\u65b9\u6cd5\uff0c\u5c06\u65b0\u751f\u6210\u7684uboot.img\u4e0b\u8f7d\u5230GW3399\uff1b \u2003\u20035. \u4f7f\u7528MobaXterm\u6216\u5176\u4ed6\u4e32\u53e3\u8c03\u8bd5\u5de5\u5177\uff0c\u8fde\u63a5\u5230GW3399\u7684\u4e32\u53e3\u3002\u5728\u56fa\u4ef6\u542f\u52a8\u8fc7\u7a0b\u4e2d\u8f93\u51fa\u201cHit key to stop autoboot('CTRL+C')\u201d\u65f6\uff0c\u6309\u4e0bCtrl+C\u4e2d\u65ad\u542f\u52a8\u8fc7\u7a0b\uff0c\u4ece\u800c\u8fdb\u5165U-Boot\u547d\u4ee4\u884c\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u2003\u20036. \u5728U-Boot\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\u4e0b\u5217\u547d\u4ee4\uff0c\u67e5\u770b\u6269\u5c55\u677fLED\u7684\u72b6\u6001\u53d8\u5316\u3002 > led-test on D4 > led-test toggle D3 > led-test toggle D3 > led-test off D4 > led-test on D2","title":"\u5b9e\u9a8c\u6b65\u9aa4"},{"location":"lab2/submit/","text":"\u9a8c\u6536\u4e0e\u63d0\u4ea4 \u5b9e\u9a8c\u62a5\u544a\u8981\u6c42 \u2003\u2003\u5b9e\u9a8c\u62a5\u544a\u9700\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a \u2003\u2003\uff081\uff09\u9898\u76ee\u5206\u6790\uff1b \u2003\u2003\uff082\uff09\u8bbe\u8ba1\u601d\u8def\uff1b \u2003\u2003\uff083\uff09\u5173\u952e\u5b9e\u73b0\uff08\u753b\u51fa\u6d41\u7a0b\u56fe\uff09\u3002 \u9a8c\u6536\u4e0e\u63d0\u4ea4\u8981\u6c42 \u2003\u2003\u68c0\u67e5\u80fd\u5426\u901a\u8fc7\u89c4\u5b9a\u7684U-Boot\u547d\u4ee4\u63a7\u5236\u6269\u5c55\u677f\u4e0a\u7684LED\u3002 \u2003\u2003\u5c06 led-test.c \u3001 Makefile \u548c \u5b9e\u9a8c\u62a5\u544a \u6253\u5305\u6210.zip\uff0c\u4ee5\u201c \u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c2.zip \u201d\u547d\u540d\uff0c\u63d0\u4ea4\u5230\u4f5c\u4e1a\u7cfb\u7edf\u3002 \u2003\u2003\u62a5\u544a\u63d0\u4ea4 Deadline \uff1a\u67e5\u770b\u4f5c\u4e1a\u7cfb\u7edf\u3002 \u6ce8\u610f \u4ee3\u7801\u4e2d\u5fc5\u987b\u6709\u9002\u5f53\u7684\u6ce8\u91ca\u3002","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4"},{"location":"lab2/submit/#_1","text":"","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4"},{"location":"lab2/submit/#_2","text":"\u5b9e\u9a8c\u62a5\u544a\u9700\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\uff1a \u2003\u2003\uff081\uff09\u9898\u76ee\u5206\u6790\uff1b \u2003\u2003\uff082\uff09\u8bbe\u8ba1\u601d\u8def\uff1b \u2003\u2003\uff083\uff09\u5173\u952e\u5b9e\u73b0\uff08\u753b\u51fa\u6d41\u7a0b\u56fe\uff09\u3002","title":"\u5b9e\u9a8c\u62a5\u544a\u8981\u6c42"},{"location":"lab2/submit/#_3","text":"\u68c0\u67e5\u80fd\u5426\u901a\u8fc7\u89c4\u5b9a\u7684U-Boot\u547d\u4ee4\u63a7\u5236\u6269\u5c55\u677f\u4e0a\u7684LED\u3002 \u2003\u2003\u5c06 led-test.c \u3001 Makefile \u548c \u5b9e\u9a8c\u62a5\u544a \u6253\u5305\u6210.zip\uff0c\u4ee5\u201c \u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c2.zip \u201d\u547d\u540d\uff0c\u63d0\u4ea4\u5230\u4f5c\u4e1a\u7cfb\u7edf\u3002 \u2003\u2003\u62a5\u544a\u63d0\u4ea4 Deadline \uff1a\u67e5\u770b\u4f5c\u4e1a\u7cfb\u7edf\u3002 \u6ce8\u610f \u4ee3\u7801\u4e2d\u5fc5\u987b\u6709\u9002\u5f53\u7684\u6ce8\u91ca\u3002","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4\u8981\u6c42"},{"location":"lab2/uboot/","text":"U-Boot\u547d\u4ee4\u5b9e\u73b0\u53ca\u9a71\u52a8\u6a21\u578b 1. U-Boot\u547d\u4ee4\u5b9e\u73b0\u65b9\u5f0f 1.1 \u547d\u4ee4\u884c\u7684\u5904\u7406 \u2003\u2003\u7cfb\u7edf\u4e0a\u7535\u540e\uff0cRK3399\u82af\u7247\u5148\u4eceBootRom\u83b7\u53d6SPL\u4ee3\u7801\uff0c\u7136\u540e\u52a0\u8f7dU-Boot\u5230\u5185\u5b58\u4e2d\u8fd0\u884c\uff08\u8be6\u89c1\u201cBootloader\u542f\u52a8\u6d41\u7a0b\u5206\u6790\u201d\uff09\u3002\u5728\u6240\u6709\u521d\u59cb\u5316\u7a0b\u5e8f\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0cU-Boot\u8c03\u7528run_main_loop\u51fd\u6570\u4ee5\u8fdb\u5165\u4e3b\u5faa\u73af\uff0c\u5e76\u5728\u4e3b\u5faa\u73af\u4e2d\u8fdb\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff0c\u4ee5\u83b7\u53d6\u4e32\u53e3\u6570\u636e\uff0c\u4ece\u800c\u89e3\u6790\u548c\u6267\u884c\u7528\u6237\u8f93\u5165\u7684\u547d\u4ee4\u884c\u547d\u4ee4\u3002 static int run_main_loop ( void ) { #ifdef CONFIG_SANDBOX sandbox_main_loop_init (); #endif /* main_loop() can return to retry autoboot, if so just run it again */ for (;;) main_loop (); return 0 ; } \u2003\u2003U-Boot\u628a\u6240\u6709\u547d\u4ee4\u7684\u6570\u636e\u7ed3\u6784\u90fd\u653e\u5728\u547d\u4ee4\u8868\u4e2d\u3002\u547d\u4ee4\u8868\u7684\u6bcf\u4e00\u884c\u90fd\u4ee3\u8868\u4e00\u4e2a\u547d\u4ee4\uff0c\u5176\u6570\u636e\u7c7b\u578b\u662fcmd_tbl_t\u3002\u8fd9\u4e9b\u547d\u4ee4\u5728\u94fe\u63a5\u65f6\u4f1a\u88ab\u94fe\u63a5\u5230\u6307\u5b9a\u7684\u6bb5\u4e2d\uff0c\u56e0\u6b64\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u547d\u4ee4\u8868\u662f\u88ab\u5b9a\u4e49\u5728\u8fd9\u4e2a\u6bb5\u4e2d\u3002 1.2 U_BOOT_CMD\u5b8f\u5b9a\u4e49 \u2003\u2003U-Boot\u547d\u4ee4\u5728common\u76ee\u5f55\u4e0b\u5b9e\u73b0\uff0c\u4e14\u8be5\u76ee\u5f55\u4e0b\u7684\u5355\u4e2aC\u6587\u4ef6\u901a\u5e38\u4f1a\u5b9e\u73b0\u4e00\u6761\u6216\u591a\u6761\u547d\u4ee4\u3002\u5982\u679c\u8981\u589e\u52a0\u4e00\u6761\u65b0\u547d\u4ee4\uff0c\u5219\u9996\u5148\u9700\u8981\u5728common\u76ee\u5f55\u4e0b\u65b0\u5efa\u76f8\u5e94\u7684C\u6587\u4ef6\uff0c\u7136\u540e\u5728Makefile\u4e2d\u6307\u5b9a\u7f16\u8bd1\u8be5\u6587\u4ef6\u3002 \u2003\u2003\u5b9a\u4e49\u65b0\u7684U-Boot\u547d\u4ee4\u65f6\uff0c\u9700\u8981\u4f7f\u7528U_BOOT_CMD\u7684\u5b8f\u5b9a\u4e49\u3002 \u2003\u2003U_BOOT_CMD\u662f\u5b9a\u4e49\u5728include/command.h\u4e2d\u7684\u5b8f\uff1a #define U_BOOT_CMD(_name, _maxargs, _rep, _cmd, _usage, _help) \\ U_BOOT_CMD_COMPLETE(_name, _maxargs, _rep, _cmd, _usage, _help, NULL) \u2003\u2003\u800cU_BOOT_CMD_COMPLETE\u4e5f\u662f\u4e00\u4e2a\u5b8f\u5b9a\u4e49\uff1a #define U_BOOT_CMD_COMPLETE(_name, _maxargs, _rep, _cmd, _usage, _help, _comp) \\ ll_entry_declare(cmd_tbl_t, _name, cmd) = \\ U_BOOT_CMD_MKENT_COMPLETE(_name, _maxargs, _rep, _cmd, \\ _usage, _help, _comp); \u2003\u2003\u7531\u4e0a\u8ff0\u4ee3\u7801\u53ef\u77e5\uff0cU_BOOT_CMD_COMPLETE\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u8d4b\u503c\u8bed\u53e5\u3002 \u2003\u2003\u8d4b\u503c\u8bed\u53e5\u53f3\u4fa7\u662f\u53e6\u4e00\u4e2a\u5b8f\u5b9a\u4e49U_BOOT_CMD_MKENT_COMPLETE\uff1a #define U_BOOT_CMD_MKENT_COMPLETE(_name, _maxargs, _rep, _cmd, \\ _usage, _help, _comp) \\ { #_name, _maxargs, _rep, _cmd, _usage, \\ _CMD_HELP(_help) _CMD_COMPLETE(_comp) } \u8bf4\u660e #_name\u662f\u5c06_name\u4f20\u9012\u7684\u503c\u5b57\u7b26\u4e32\u5316\uff0c_CMD_HELP\u548c_CMD_COMPLETE\u5c31\u662f\u53d6\u672c\u8eab\u3002 \u5177\u4f53\u5b8f\u5b9a\u4e49\u89c1include/command.h\u3002 \u2003\u2003\u8d4b\u503c\u8bed\u53e5\u5de6\u4fa7\u7684ll_entry_declare\u4e5f\u662f\u4e00\u4e2a\u5b8f\u5b9a\u4e49\uff08\u8be6\u89c1include/linker_lists.h\uff09\uff1a #define ll_entry_declare(_type, _name, _list) \\ _type _u_boot_list_2_##_list##_2_##_name __aligned(4) \\ __attribute__((unused, section(\".u_boot_list_2_\"#_list\"_2_\"#_name))) \u8bf4\u660e \u201c##\u201d\u548c\u201c#\u201d\u90fd\u662f\u9884\u7f16\u8bd1\u64cd\u4f5c\u7b26\uff0c\u201c##\u201d\u6709\u5b57\u7b26\u4e32\u8fde\u63a5\u7684\u529f\u80fd\uff0c\u800c\u201c#\u201d\u5219\u8868\u793a\u540e\u9762\u7d27\u63a5\u7740\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 _type\uff1a\u4f20\u9012\u53d8\u91cf\u7c7b\u578b _name\uff0c_list\uff1a\u4f20\u9012\u7ec4\u6210\u53d8\u91cf\u540d\u79f0\u7684\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u8be5\u53d8\u91cf\u653e\u5728section\u4e2d _aligned(4)\uff1a\u6307\u5b9a\u5b9a\u4e49\u7684\u53d8\u91cf4\u5b57\u8282\u5bf9\u9f50 _attribute\uff1a\u9009\u62e9\u672a\u4f7f\u7528\u7684section\u3002 \u2003\u2003\u6b64\u5916\uff0cU_BOOT_CMD_COMPLETE\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u578b\u4e3acmd_tbl_t\u7684\u7ed3\u6784\u4f53\u5e76\u5bf9\u5176\u8d4b\u503c\u3002 \u2003\u2003\u5728U-Boot\u4e2d\uff0c\u6bcf\u4e2a\u547d\u4ee4\u90fd\u8981\u7528\u8fd9\u6837\u7684\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u63cf\u8ff0\uff0c\u5176\u5b9a\u4e49\u5982\u4e0b\uff1a typedef struct cmd_tbl_s cmd_tbl_t ; struct cmd_tbl_s { char * name ; /* Command Name */ int maxargs ; /* maximum number of arguments */ int repeatable ; /* autorepeat allowed? */ /* Implementation function */ int ( * cmd )( struct cmd_tbl_s * , int , int , char * const []); char * usage ; /* Usage message (short) */ #ifdef CONFIG_SYS_LONGHELP char * help ; /* Help message (long) */ #endif #ifdef CONFIG_AUTO_COMPLETE /* do auto completion on the arguments */ int ( * complete )( int argc , char * const argv [], char last_char , int maxv , char * cmdv []); #endif }; \u8bf4\u660e \u6210\u5458cmd\u662f\u4e00\u4e2a\u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u8be5\u547d\u4ee4\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570\u3002 \u6240\u6709\u547d\u4ee4\u7684\u5904\u7406\u51fd\u6570\u7684\u63a5\u53e3\u90fd\u662f\u4e00\u81f4\u7684\u3002 \u2003\u2003\u5c06\u4e0a\u8ff0\u5b8f\u5b9a\u4e49\u5168\u90e8\u5c55\u5f00\uff0c\u53ef\u5f97\u5982\u4e0b\u7ed3\u6784\u4f53\uff1a struct cmd_tbl_s _u_boot_list_2_cmd_2_ ## _name = { #_name, _maxargs, _rep, _cmd, _usage, _help, NULL }; \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0cU_BOOT_CMD\u5c31\u662f\u5b58\u653e\u5728U-Boot\u4e2d\u7684\u7a7a\u95f2section\u5185\u7684\u4e00\u4e2a\u7ed3\u6784\u4f53\u53d8\u91cf\u3002 \u2003\u2003U-Boot\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u53ef\u5728arch/arm/cpu/armv8/u-boot-spl.lds\u548cu-boot.map\u4e2d\u770b\u5230\u6620\u5c04\u7684\u5730\u5740\uff1a .u_boot_list : { . = ALIGN(8); KEEP(*(SORT(.u_boot_list*))); } >.sram ... .rela.u_boot_list_2_cmd_2_led-test 0x00000000002b61b8 0x60 arch/arm/cpu/armv8/start.o \u2003\u2003\u4eceu-boot.map\u53ef\u4ee5\u770b\u5230\uff0cled-test\uff08\u9700\u5c06\u7f16\u5199\u7684led-test.c\u653e\u5230common\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u7f16\u8bd1\u540e\u624d\u80fd\u770b\u5230led-test\u6bb5\uff09\u5df2\u7ecf\u653e\u5230u_boot_list_2\u6bb5\u4e2d\u3002 \u2003\u2003\u8fd0\u884c\u65f6\uff0cU-Boot\u4ece\u4e32\u53e3\u63a5\u6536\u7528\u6237\u7684\u547d\u4ee4\uff0c\u7136\u540e\u4eceu_boot_list_2\u6bb5\u4e2d\u4f9d\u6b21\u67e5\u627e\u6bcf\u4e2acmd_tbl_t\uff0c\u6839\u636e\u6210\u5458name\u6bd4\u8f83\u662f\u5426\u548c\u7528\u6237\u547d\u4ee4\u5339\u914d\u3002\u5982\u679c\u5339\u914d\u6210\u529f\uff0c\u5219\u6267\u884c\u7b2c\u4e09\u4e2a\u6210\u5458cmd\u6307\u5411\u7684\u51fd\u6570\uff0c\u5426\u5219\u67e5\u627e\u4e0b\u4e00\u4e2acmd_tbl_t\u3002\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003find_cmd\u51fd\u6570\u3002 2. U-Boot\u9a71\u52a8\u6a21\u578b \u2003\u2003U-Boot\u7684\u9a71\u52a8\u6a21\u578b\uff08Driver Model\uff0c\u7b80\u79f0DM\uff09\u4e3a\u9a71\u52a8\u7684\u5b9a\u4e49\u548c\u8bbf\u95ee\u63a5\u53e3\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u65b9\u6cd5\uff0c\u63d0\u9ad8\u4e86\u9a71\u52a8\u4e4b\u95f4\u7684\u517c\u5bb9\u6027\u4ee5\u53ca\u8bbf\u95ee\u7684\u6807\u51c6\u3002 \u8bf4\u660e DM\u7684\u8be6\u7ec6\u8bf4\u660e\u89c1u-boot/doc/driver-model/README.txt\u3002 \u2003\u2003DM\u4e2d\u5305\u542b\u4e09\u4e2a\u57fa\u672c\u6982\u5ff5\uff1aDevice\u3001Driver\u548cUclass\u3002 Device \u2003\u2003Device\u6307\u8bbe\u5907\u5bf9\u8c61\u3002\u6bcf\u4e2aDevice\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5177\u4f53\u7684\u7aef\u53e3\u6216\u5916\u8bbe\uff0c\u5728README\u4e2d\u7684\u8bf4\u660e\u5982\u4e0b\uff1a Device - an instance of a driver, tied to a particular port or peripheral. Driver \u2003\u2003Driver\u6307\u8bbe\u5907\u9a71\u52a8\u3002Driver\u5b9e\u73b0\u548c\u5e95\u5c42\u786c\u4ef6\u8bbe\u5907\u7684\u901a\u4fe1\uff0c\u5e76\u4e14\u4e3a\u8bbe\u5907\u63d0\u4f9b\u4e0a\u5c42\u8bbf\u95ee\u63a5\u53e3\uff0c\u5728README\u4e2d\u7684\u8bf4\u660e\u5982\u4e0b\uff1a Driver - some code which talks to a peripheral and presents a higher-level interface to it. \u4e3e\u4e2a\u6817\u5b50 RK3399\u7684GPIO Driver\u63d0\u4f9b\u4e86gpio_direction_input\u3001gpio_direction_output\u548cgpio_get_value\u7b49\u63a5\u53e3\u3002 Uclass \u2003\u2003Uclass\u4e3a\u540c\u4e00\u7ec4\u7c7b\u578b\u7684\u8bbe\u5907\u63d0\u4f9b\u7edf\u4e00\u63a5\u53e3\uff0c\u5728README\u4e2d\u7684\u8bf4\u660e\u5982\u4e0b\uff1a Uclass - a group of devices which operate in the same way. A uclass provides a way of accessing individual devices within the group, but always using the same interface. For example a GPIO uclass provides operations for get/set value. An I2C uclass may have 10 I2C ports, 4 with one driver, and 6 with another. \u4e3e\u4e2a\u6817\u5b50 GPIO Uclass\u63d0\u4f9b\u4e86gpio_request\u548cgpio_free\u63a5\u53e3 3. U-Boot\u4e2d\u7684GPIO\u9a71\u52a8\u6a21\u578b \u2003\u2003GPIO\u7684\u9a71\u52a8\u6a21\u578b\u4e3b\u8981\u5305\u62ecGPIO Core\u3001GPIO Uclass\u3001GPIO Udevice\u548cGPIO Udriver\u56db\u90e8\u5206\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 GPIO Core\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/gpio-uclass.c\uff09 \u2003\u2003GPIO Core\u4e3a\u4e0a\u5c42\u63d0\u4f9bGPIO\u8bbe\u5907\u7684\u8bbf\u95ee\u63a5\u53e3\u3002GPIO Core\u4ece\u8bbe\u5907\u6811arch/arm/dts/rk3399.dtsi\u4e2d\u83b7\u53d6GPIO\u5c5e\u6027\uff0c\u5e76\u4eceGPIO Uclass\u7684\u8bbe\u5907\u94fe\u8868\u4e2d\u83b7\u53d6\u76f8\u5e94\u7684Udevice\u8bbe\u5907\u3002 GPIO Uclass\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/gpio-uclass.c\uff09 \u2003\u2003GPIO Uclass\u4e3aGPIO Udevice\u7684\u9a71\u52a8\u63d0\u4f9b\u7edf\u4e00\u7684\u64cd\u4f5c\u96c6\u63a5\u53e3\uff0c\u5e76\u94fe\u63a5\u5c5e\u4e8e\u8be5Uclass\u7684\u6240\u6709GPIO Udevice\u8bbe\u5907\u3002 GPIO Udevice\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/rk_gpio.c\uff09 \u2003\u2003RK3399\u5171\u67095\u7ec4GPIO bank\uff0c\u6bcf\u7ec4\u5305\u542b32\u4e2aIO\u63a5\u53e3\u3002\u5176\u4e2d\uff0c\u6bcf\u4e2aGPIO bank\u90fd\u6709\u4e00\u4e2aGPIO Udevice\u4e0e\u4e4b\u5bf9\u5e94\u3002 enum { ROCKCHIP_GPIOS_PER_BANK = 32 , }; static int rockchip_gpio_probe ( struct udevice * dev ) { struct gpio_dev_priv * uc_priv = dev_get_uclass_priv ( dev ); struct rockchip_gpio_priv * priv = dev_get_priv ( dev ); char * end ; int ret ; priv -> regs = dev_read_addr_ptr ( dev ); ret = uclass_first_device_err ( UCLASS_PINCTRL , & priv -> pinctrl ); if ( ret ) return ret ; uc_priv -> gpio_count = ROCKCHIP_GPIOS_PER_BANK ; end = strrchr ( dev -> name , '@' ); priv -> bank = trailing_strtoln ( dev -> name , end ); priv -> name [ 0 ] = 'A' + priv -> bank ; uc_priv -> bank_name = priv -> name ; return 0 ; } U_BOOT_DRIVER ( gpio_rockchip ) = { . name = \"gpio_rockchip\" , . id = UCLASS_GPIO , . of_match = rockchip_gpio_ids , . ops = & gpio_rockchip_ops , . priv_auto_alloc_size = sizeof ( struct rockchip_gpio_priv ), . probe = rockchip_gpio_probe , }; GPIO Udriver\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/rk_gpio.c\uff09 \u2003\u2003\u5df2\u77e5RK3399\u5171\u67095\u7ec4GPIO bank\uff0c\u6bcf\u7ec4\u5305\u542b32\u4e2aIO\u63a5\u53e3\u3002GPIO\u9a71\u52a8\u6a21\u578b\u4f7f\u7528bank\u5185\u504f\u79fb\u6765\u8868\u793a\u5177\u4f53\u7684GPIO\u7f16\u53f7\u3002GPIO Udriver\u6839\u636ebank\u7f16\u53f7\u548cbank\u5185\u504f\u79fb\u627e\u5230\u5bf9\u5e94\u7684GPIO\uff0c\u5e76\u5bf9\u76f8\u5e94\u5bc4\u5b58\u5668\u7684\u76f8\u5e94\u6bd4\u7279\u4f4d\u8fdb\u884c\u64cd\u4f5c\u3002","title":"U-Boot\u547d\u4ee4\u5b9e\u73b0\u53ca\u9a71\u52a8\u6a21\u578b"},{"location":"lab2/uboot/#u-boot","text":"","title":"U-Boot\u547d\u4ee4\u5b9e\u73b0\u53ca\u9a71\u52a8\u6a21\u578b"},{"location":"lab2/uboot/#1-u-boot","text":"","title":"1. U-Boot\u547d\u4ee4\u5b9e\u73b0\u65b9\u5f0f"},{"location":"lab2/uboot/#11","text":"\u7cfb\u7edf\u4e0a\u7535\u540e\uff0cRK3399\u82af\u7247\u5148\u4eceBootRom\u83b7\u53d6SPL\u4ee3\u7801\uff0c\u7136\u540e\u52a0\u8f7dU-Boot\u5230\u5185\u5b58\u4e2d\u8fd0\u884c\uff08\u8be6\u89c1\u201cBootloader\u542f\u52a8\u6d41\u7a0b\u5206\u6790\u201d\uff09\u3002\u5728\u6240\u6709\u521d\u59cb\u5316\u7a0b\u5e8f\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0cU-Boot\u8c03\u7528run_main_loop\u51fd\u6570\u4ee5\u8fdb\u5165\u4e3b\u5faa\u73af\uff0c\u5e76\u5728\u4e3b\u5faa\u73af\u4e2d\u8fdb\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff0c\u4ee5\u83b7\u53d6\u4e32\u53e3\u6570\u636e\uff0c\u4ece\u800c\u89e3\u6790\u548c\u6267\u884c\u7528\u6237\u8f93\u5165\u7684\u547d\u4ee4\u884c\u547d\u4ee4\u3002 static int run_main_loop ( void ) { #ifdef CONFIG_SANDBOX sandbox_main_loop_init (); #endif /* main_loop() can return to retry autoboot, if so just run it again */ for (;;) main_loop (); return 0 ; } \u2003\u2003U-Boot\u628a\u6240\u6709\u547d\u4ee4\u7684\u6570\u636e\u7ed3\u6784\u90fd\u653e\u5728\u547d\u4ee4\u8868\u4e2d\u3002\u547d\u4ee4\u8868\u7684\u6bcf\u4e00\u884c\u90fd\u4ee3\u8868\u4e00\u4e2a\u547d\u4ee4\uff0c\u5176\u6570\u636e\u7c7b\u578b\u662fcmd_tbl_t\u3002\u8fd9\u4e9b\u547d\u4ee4\u5728\u94fe\u63a5\u65f6\u4f1a\u88ab\u94fe\u63a5\u5230\u6307\u5b9a\u7684\u6bb5\u4e2d\uff0c\u56e0\u6b64\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u547d\u4ee4\u8868\u662f\u88ab\u5b9a\u4e49\u5728\u8fd9\u4e2a\u6bb5\u4e2d\u3002","title":"1.1 \u547d\u4ee4\u884c\u7684\u5904\u7406"},{"location":"lab2/uboot/#12-u_boot_cmd","text":"U-Boot\u547d\u4ee4\u5728common\u76ee\u5f55\u4e0b\u5b9e\u73b0\uff0c\u4e14\u8be5\u76ee\u5f55\u4e0b\u7684\u5355\u4e2aC\u6587\u4ef6\u901a\u5e38\u4f1a\u5b9e\u73b0\u4e00\u6761\u6216\u591a\u6761\u547d\u4ee4\u3002\u5982\u679c\u8981\u589e\u52a0\u4e00\u6761\u65b0\u547d\u4ee4\uff0c\u5219\u9996\u5148\u9700\u8981\u5728common\u76ee\u5f55\u4e0b\u65b0\u5efa\u76f8\u5e94\u7684C\u6587\u4ef6\uff0c\u7136\u540e\u5728Makefile\u4e2d\u6307\u5b9a\u7f16\u8bd1\u8be5\u6587\u4ef6\u3002 \u2003\u2003\u5b9a\u4e49\u65b0\u7684U-Boot\u547d\u4ee4\u65f6\uff0c\u9700\u8981\u4f7f\u7528U_BOOT_CMD\u7684\u5b8f\u5b9a\u4e49\u3002 \u2003\u2003U_BOOT_CMD\u662f\u5b9a\u4e49\u5728include/command.h\u4e2d\u7684\u5b8f\uff1a #define U_BOOT_CMD(_name, _maxargs, _rep, _cmd, _usage, _help) \\ U_BOOT_CMD_COMPLETE(_name, _maxargs, _rep, _cmd, _usage, _help, NULL) \u2003\u2003\u800cU_BOOT_CMD_COMPLETE\u4e5f\u662f\u4e00\u4e2a\u5b8f\u5b9a\u4e49\uff1a #define U_BOOT_CMD_COMPLETE(_name, _maxargs, _rep, _cmd, _usage, _help, _comp) \\ ll_entry_declare(cmd_tbl_t, _name, cmd) = \\ U_BOOT_CMD_MKENT_COMPLETE(_name, _maxargs, _rep, _cmd, \\ _usage, _help, _comp); \u2003\u2003\u7531\u4e0a\u8ff0\u4ee3\u7801\u53ef\u77e5\uff0cU_BOOT_CMD_COMPLETE\u88ab\u5b9a\u4e49\u4e3a\u4e00\u4e2a\u8d4b\u503c\u8bed\u53e5\u3002 \u2003\u2003\u8d4b\u503c\u8bed\u53e5\u53f3\u4fa7\u662f\u53e6\u4e00\u4e2a\u5b8f\u5b9a\u4e49U_BOOT_CMD_MKENT_COMPLETE\uff1a #define U_BOOT_CMD_MKENT_COMPLETE(_name, _maxargs, _rep, _cmd, \\ _usage, _help, _comp) \\ { #_name, _maxargs, _rep, _cmd, _usage, \\ _CMD_HELP(_help) _CMD_COMPLETE(_comp) } \u8bf4\u660e #_name\u662f\u5c06_name\u4f20\u9012\u7684\u503c\u5b57\u7b26\u4e32\u5316\uff0c_CMD_HELP\u548c_CMD_COMPLETE\u5c31\u662f\u53d6\u672c\u8eab\u3002 \u5177\u4f53\u5b8f\u5b9a\u4e49\u89c1include/command.h\u3002 \u2003\u2003\u8d4b\u503c\u8bed\u53e5\u5de6\u4fa7\u7684ll_entry_declare\u4e5f\u662f\u4e00\u4e2a\u5b8f\u5b9a\u4e49\uff08\u8be6\u89c1include/linker_lists.h\uff09\uff1a #define ll_entry_declare(_type, _name, _list) \\ _type _u_boot_list_2_##_list##_2_##_name __aligned(4) \\ __attribute__((unused, section(\".u_boot_list_2_\"#_list\"_2_\"#_name))) \u8bf4\u660e \u201c##\u201d\u548c\u201c#\u201d\u90fd\u662f\u9884\u7f16\u8bd1\u64cd\u4f5c\u7b26\uff0c\u201c##\u201d\u6709\u5b57\u7b26\u4e32\u8fde\u63a5\u7684\u529f\u80fd\uff0c\u800c\u201c#\u201d\u5219\u8868\u793a\u540e\u9762\u7d27\u63a5\u7740\u7684\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002 _type\uff1a\u4f20\u9012\u53d8\u91cf\u7c7b\u578b _name\uff0c_list\uff1a\u4f20\u9012\u7ec4\u6210\u53d8\u91cf\u540d\u79f0\u7684\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u8be5\u53d8\u91cf\u653e\u5728section\u4e2d _aligned(4)\uff1a\u6307\u5b9a\u5b9a\u4e49\u7684\u53d8\u91cf4\u5b57\u8282\u5bf9\u9f50 _attribute\uff1a\u9009\u62e9\u672a\u4f7f\u7528\u7684section\u3002 \u2003\u2003\u6b64\u5916\uff0cU_BOOT_CMD_COMPLETE\u4e2d\u5b9a\u4e49\u4e86\u4e00\u4e2a\u7c7b\u578b\u4e3acmd_tbl_t\u7684\u7ed3\u6784\u4f53\u5e76\u5bf9\u5176\u8d4b\u503c\u3002 \u2003\u2003\u5728U-Boot\u4e2d\uff0c\u6bcf\u4e2a\u547d\u4ee4\u90fd\u8981\u7528\u8fd9\u6837\u7684\u4e00\u4e2a\u7ed3\u6784\u4f53\u6765\u63cf\u8ff0\uff0c\u5176\u5b9a\u4e49\u5982\u4e0b\uff1a typedef struct cmd_tbl_s cmd_tbl_t ; struct cmd_tbl_s { char * name ; /* Command Name */ int maxargs ; /* maximum number of arguments */ int repeatable ; /* autorepeat allowed? */ /* Implementation function */ int ( * cmd )( struct cmd_tbl_s * , int , int , char * const []); char * usage ; /* Usage message (short) */ #ifdef CONFIG_SYS_LONGHELP char * help ; /* Help message (long) */ #endif #ifdef CONFIG_AUTO_COMPLETE /* do auto completion on the arguments */ int ( * complete )( int argc , char * const argv [], char last_char , int maxv , char * cmdv []); #endif }; \u8bf4\u660e \u6210\u5458cmd\u662f\u4e00\u4e2a\u51fd\u6570\u6307\u9488\uff0c\u6307\u5411\u8be5\u547d\u4ee4\u5bf9\u5e94\u7684\u5904\u7406\u51fd\u6570\u3002 \u6240\u6709\u547d\u4ee4\u7684\u5904\u7406\u51fd\u6570\u7684\u63a5\u53e3\u90fd\u662f\u4e00\u81f4\u7684\u3002 \u2003\u2003\u5c06\u4e0a\u8ff0\u5b8f\u5b9a\u4e49\u5168\u90e8\u5c55\u5f00\uff0c\u53ef\u5f97\u5982\u4e0b\u7ed3\u6784\u4f53\uff1a struct cmd_tbl_s _u_boot_list_2_cmd_2_ ## _name = { #_name, _maxargs, _rep, _cmd, _usage, _help, NULL }; \u2003\u2003\u7efc\u4e0a\u6240\u8ff0\uff0cU_BOOT_CMD\u5c31\u662f\u5b58\u653e\u5728U-Boot\u4e2d\u7684\u7a7a\u95f2section\u5185\u7684\u4e00\u4e2a\u7ed3\u6784\u4f53\u53d8\u91cf\u3002 \u2003\u2003U-Boot\u7f16\u8bd1\u5b8c\u6210\u540e\uff0c\u53ef\u5728arch/arm/cpu/armv8/u-boot-spl.lds\u548cu-boot.map\u4e2d\u770b\u5230\u6620\u5c04\u7684\u5730\u5740\uff1a .u_boot_list : { . = ALIGN(8); KEEP(*(SORT(.u_boot_list*))); } >.sram ... .rela.u_boot_list_2_cmd_2_led-test 0x00000000002b61b8 0x60 arch/arm/cpu/armv8/start.o \u2003\u2003\u4eceu-boot.map\u53ef\u4ee5\u770b\u5230\uff0cled-test\uff08\u9700\u5c06\u7f16\u5199\u7684led-test.c\u653e\u5230common\u76ee\u5f55\u4e0b\uff0c\u4fee\u6539Makefile\u6587\u4ef6\uff0c\u7f16\u8bd1\u540e\u624d\u80fd\u770b\u5230led-test\u6bb5\uff09\u5df2\u7ecf\u653e\u5230u_boot_list_2\u6bb5\u4e2d\u3002 \u2003\u2003\u8fd0\u884c\u65f6\uff0cU-Boot\u4ece\u4e32\u53e3\u63a5\u6536\u7528\u6237\u7684\u547d\u4ee4\uff0c\u7136\u540e\u4eceu_boot_list_2\u6bb5\u4e2d\u4f9d\u6b21\u67e5\u627e\u6bcf\u4e2acmd_tbl_t\uff0c\u6839\u636e\u6210\u5458name\u6bd4\u8f83\u662f\u5426\u548c\u7528\u6237\u547d\u4ee4\u5339\u914d\u3002\u5982\u679c\u5339\u914d\u6210\u529f\uff0c\u5219\u6267\u884c\u7b2c\u4e09\u4e2a\u6210\u5458cmd\u6307\u5411\u7684\u51fd\u6570\uff0c\u5426\u5219\u67e5\u627e\u4e0b\u4e00\u4e2acmd_tbl_t\u3002\u5177\u4f53\u5b9e\u73b0\u53ef\u4ee5\u53c2\u8003find_cmd\u51fd\u6570\u3002","title":"1.2 U_BOOT_CMD\u5b8f\u5b9a\u4e49"},{"location":"lab2/uboot/#2-u-boot","text":"U-Boot\u7684\u9a71\u52a8\u6a21\u578b\uff08Driver Model\uff0c\u7b80\u79f0DM\uff09\u4e3a\u9a71\u52a8\u7684\u5b9a\u4e49\u548c\u8bbf\u95ee\u63a5\u53e3\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u65b9\u6cd5\uff0c\u63d0\u9ad8\u4e86\u9a71\u52a8\u4e4b\u95f4\u7684\u517c\u5bb9\u6027\u4ee5\u53ca\u8bbf\u95ee\u7684\u6807\u51c6\u3002 \u8bf4\u660e DM\u7684\u8be6\u7ec6\u8bf4\u660e\u89c1u-boot/doc/driver-model/README.txt\u3002 \u2003\u2003DM\u4e2d\u5305\u542b\u4e09\u4e2a\u57fa\u672c\u6982\u5ff5\uff1aDevice\u3001Driver\u548cUclass\u3002 Device \u2003\u2003Device\u6307\u8bbe\u5907\u5bf9\u8c61\u3002\u6bcf\u4e2aDevice\u7ed1\u5b9a\u5230\u4e00\u4e2a\u5177\u4f53\u7684\u7aef\u53e3\u6216\u5916\u8bbe\uff0c\u5728README\u4e2d\u7684\u8bf4\u660e\u5982\u4e0b\uff1a Device - an instance of a driver, tied to a particular port or peripheral. Driver \u2003\u2003Driver\u6307\u8bbe\u5907\u9a71\u52a8\u3002Driver\u5b9e\u73b0\u548c\u5e95\u5c42\u786c\u4ef6\u8bbe\u5907\u7684\u901a\u4fe1\uff0c\u5e76\u4e14\u4e3a\u8bbe\u5907\u63d0\u4f9b\u4e0a\u5c42\u8bbf\u95ee\u63a5\u53e3\uff0c\u5728README\u4e2d\u7684\u8bf4\u660e\u5982\u4e0b\uff1a Driver - some code which talks to a peripheral and presents a higher-level interface to it. \u4e3e\u4e2a\u6817\u5b50 RK3399\u7684GPIO Driver\u63d0\u4f9b\u4e86gpio_direction_input\u3001gpio_direction_output\u548cgpio_get_value\u7b49\u63a5\u53e3\u3002 Uclass \u2003\u2003Uclass\u4e3a\u540c\u4e00\u7ec4\u7c7b\u578b\u7684\u8bbe\u5907\u63d0\u4f9b\u7edf\u4e00\u63a5\u53e3\uff0c\u5728README\u4e2d\u7684\u8bf4\u660e\u5982\u4e0b\uff1a Uclass - a group of devices which operate in the same way. A uclass provides a way of accessing individual devices within the group, but always using the same interface. For example a GPIO uclass provides operations for get/set value. An I2C uclass may have 10 I2C ports, 4 with one driver, and 6 with another. \u4e3e\u4e2a\u6817\u5b50 GPIO Uclass\u63d0\u4f9b\u4e86gpio_request\u548cgpio_free\u63a5\u53e3","title":"2. U-Boot\u9a71\u52a8\u6a21\u578b"},{"location":"lab2/uboot/#3-u-bootgpio","text":"GPIO\u7684\u9a71\u52a8\u6a21\u578b\u4e3b\u8981\u5305\u62ecGPIO Core\u3001GPIO Uclass\u3001GPIO Udevice\u548cGPIO Udriver\u56db\u90e8\u5206\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002 GPIO Core\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/gpio-uclass.c\uff09 \u2003\u2003GPIO Core\u4e3a\u4e0a\u5c42\u63d0\u4f9bGPIO\u8bbe\u5907\u7684\u8bbf\u95ee\u63a5\u53e3\u3002GPIO Core\u4ece\u8bbe\u5907\u6811arch/arm/dts/rk3399.dtsi\u4e2d\u83b7\u53d6GPIO\u5c5e\u6027\uff0c\u5e76\u4eceGPIO Uclass\u7684\u8bbe\u5907\u94fe\u8868\u4e2d\u83b7\u53d6\u76f8\u5e94\u7684Udevice\u8bbe\u5907\u3002 GPIO Uclass\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/gpio-uclass.c\uff09 \u2003\u2003GPIO Uclass\u4e3aGPIO Udevice\u7684\u9a71\u52a8\u63d0\u4f9b\u7edf\u4e00\u7684\u64cd\u4f5c\u96c6\u63a5\u53e3\uff0c\u5e76\u94fe\u63a5\u5c5e\u4e8e\u8be5Uclass\u7684\u6240\u6709GPIO Udevice\u8bbe\u5907\u3002 GPIO Udevice\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/rk_gpio.c\uff09 \u2003\u2003RK3399\u5171\u67095\u7ec4GPIO bank\uff0c\u6bcf\u7ec4\u5305\u542b32\u4e2aIO\u63a5\u53e3\u3002\u5176\u4e2d\uff0c\u6bcf\u4e2aGPIO bank\u90fd\u6709\u4e00\u4e2aGPIO Udevice\u4e0e\u4e4b\u5bf9\u5e94\u3002 enum { ROCKCHIP_GPIOS_PER_BANK = 32 , }; static int rockchip_gpio_probe ( struct udevice * dev ) { struct gpio_dev_priv * uc_priv = dev_get_uclass_priv ( dev ); struct rockchip_gpio_priv * priv = dev_get_priv ( dev ); char * end ; int ret ; priv -> regs = dev_read_addr_ptr ( dev ); ret = uclass_first_device_err ( UCLASS_PINCTRL , & priv -> pinctrl ); if ( ret ) return ret ; uc_priv -> gpio_count = ROCKCHIP_GPIOS_PER_BANK ; end = strrchr ( dev -> name , '@' ); priv -> bank = trailing_strtoln ( dev -> name , end ); priv -> name [ 0 ] = 'A' + priv -> bank ; uc_priv -> bank_name = priv -> name ; return 0 ; } U_BOOT_DRIVER ( gpio_rockchip ) = { . name = \"gpio_rockchip\" , . id = UCLASS_GPIO , . of_match = rockchip_gpio_ids , . ops = & gpio_rockchip_ops , . priv_auto_alloc_size = sizeof ( struct rockchip_gpio_priv ), . probe = rockchip_gpio_probe , }; GPIO Udriver\uff08\u5b9e\u73b0\uff1au-boot/drivers/gpio/rk_gpio.c\uff09 \u2003\u2003\u5df2\u77e5RK3399\u5171\u67095\u7ec4GPIO bank\uff0c\u6bcf\u7ec4\u5305\u542b32\u4e2aIO\u63a5\u53e3\u3002GPIO\u9a71\u52a8\u6a21\u578b\u4f7f\u7528bank\u5185\u504f\u79fb\u6765\u8868\u793a\u5177\u4f53\u7684GPIO\u7f16\u53f7\u3002GPIO Udriver\u6839\u636ebank\u7f16\u53f7\u548cbank\u5185\u504f\u79fb\u627e\u5230\u5bf9\u5e94\u7684GPIO\uff0c\u5e76\u5bf9\u76f8\u5e94\u5bc4\u5b58\u5668\u7684\u76f8\u5e94\u6bd4\u7279\u4f4d\u8fdb\u884c\u64cd\u4f5c\u3002","title":"3. U-Boot\u4e2d\u7684GPIO\u9a71\u52a8\u6a21\u578b"},{"location":"lab3/hilens/","text":"\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b 1. HiLens\u7b80\u4ecb \u2003\u2003HiLens\u662f\u534e\u4e3a\u5f00\u53d1\u7684\u4e00\u4e2a\u7aef\u4e91\u534f\u540c\u7684\u591a\u6a21\u6001AI\u5f00\u53d1\u5e94\u7528\u5e73\u53f0\uff0c\u63d0\u4f9b\u7b80\u5355\u6613\u7528\u7684\u5f00\u53d1\u6846\u67b6\u3001\u5f00\u7bb1\u5373\u7528\u7684\u5f00\u53d1\u73af\u5883\u3001\u4e30\u5bcc\u7684AI\u6280\u80fd\u5e02\u573a\u548c\u4e91\u4e0a\u7ba1\u7406\u5e73\u53f0\uff0c\u5bf9\u63a5\u591a\u79cd\u7aef\u4fa7\u8ba1\u7b97\u8bbe\u5907\uff0c\u652f\u6301\u89c6\u89c9\u53ca\u542c\u89c9AI\u5e94\u7528\u5f00\u53d1\u3001AI\u5e94\u7528\u5728\u7ebf\u90e8\u7f72\u3001\u6d77\u91cf\u8bbe\u5907\u7ba1\u7406\u7b49\u3002 \u2003\u2003HiLens\u4e91\u4fa7\u63d0\u4f9b\u5f00\u53d1\u6846\u67b6HiLens Framework\u3001\u5f00\u53d1\u73af\u5883HiLens Studio\u3001\u7ba1\u7406\u5e73\u53f0\u548c\u591a\u6a21\u6001AI\u6280\u80fd\uff0c\u4f9b\u7528\u6237\u5728\u4e91\u4fa7\u9009\u8d2d\u6216\u5f00\u53d1\u6280\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u5b89\u88c5\u6280\u80fd\u5230\u7aef\u4fa7\u8bbe\u5907\uff0c\u4f7f\u7aef\u4fa7\u8bbe\u5907\u5177\u5907AI\u6280\u80fd\uff0c\u4e5f\u53ef\u4ee5\u53d1\u5e03\u6280\u80fd\u81f3\u6280\u80fd\u5e02\u573a\uff0c\u5171\u4eab\u7ed9\u5176\u4ed6\u7528\u6237\uff0c\u5982\u56fe1\u6240\u793a\u3002 \u56fe1 Hilens\u4e91\u4fa7\u67b6\u6784\u56fe \u2003\u2003\u66f4\u591a\u5173\u4e8eHiLens\u7684\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee HiLens\u7684\u5b98\u65b9\u7f51\u7ad9 \u3002 2. \u7cfb\u7edf\u6982\u8ff0 \u2003\u2003\u672c\u5b9e\u9a8c\u8981\u6c42\u8bbe\u8ba1\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b\u7cfb\u7edf\uff0c\u8be5\u7cfb\u7edf\u5305\u62ecHiLens\u667a\u80fd\u6444\u50cf\u5934\u548cGW3399\u5d4c\u5165\u5f0f\u5e73\u53f0\u3002\u5176\u4e2d\uff0cHiLens\u548cGW3399\u901a\u8fc7\u5c40\u57df\u7f51\u8fdb\u884c\u901a\u4fe1\uff0c\u4e14GW3399\u901a\u8fc7\u603b\u7ebf\u8fde\u63a5ARM\u6269\u5c55\u677f\u5e76\u5728\u5176\u4e0a\u663e\u793a\u8bc6\u522b\u7ed3\u679c\uff0c\u5982\u56fe2\u6240\u793a\u3002 \u56fe2 \u5b9e\u7269\u8fde\u63a5 \u2003\u2003\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b\u7cfb\u7edf\u4e3b\u8981\u7531HiLens\u667a\u80fd\u6444\u50cf\u5934\u548cGW3399\u5d4c\u5165\u5f0f\u786c\u4ef6\u5e73\u53f02\u90e8\u5206\u7ec4\u6210\u3002\u5176\u4e2d\uff0cHiLens\u901a\u8fc7\u6444\u50cf\u5934\u91c7\u96c6\u4eba\u8138\u56fe\u50cf\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c\u4e8e\u5176\u4e0a\u7684\u53e3\u7f69\u8bc6\u522b\u6280\u80fd\u5224\u65ad\u6444\u50cf\u5934\u524d\u7684\u4eba\u662f\u5426\u4f69\u6234\u53e3\u7f69\u3002 \u2003\u2003\u53e3\u7f69\u7684\u8bc6\u522b\u7ed3\u679c\u9700\u901a\u8fc7Socket\u4f20\u8f93\u5230\u4f5c\u4e3a\u5ba2\u6237\u7aef\u7684GW3399\u5e73\u53f0\u4e0a\u3002\u53e3\u7f69\u7684\u8bc6\u522b\u7ed3\u679c\u6709\u4e09\u79cd\uff1a\u201chas_mask\u201d\u3001\u201cno_mask\u201d\u548c\u201cunknown\u201d\uff0c\u5206\u522b\u8868\u793a\u6234\u53e3\u7f69\u3001\u672a\u6234\u53e3\u7f69\u3001\u672a\u68c0\u6d4b\u5230\u4eba\u8138\u3002 \u2003\u2003GW3399\u63a5\u6536\u5230\u8bc6\u522b\u7ed3\u679c\u540e\uff0c\u8c03\u7528\u4e00\u4e2a\u79f0\u4e3adisplay\u7684\u5e94\u7528\u7a0b\u5e8f\u6765\u5728ARM\u6269\u5c55\u677f\u4e0a\u663e\u793a\u53e3\u7f69\u8bc6\u522b\u7ed3\u679c\u3002 \u2003\u2003display\u7684\u4f5c\u7528\u662f\u6839\u636e\u8bc6\u522b\u7ed3\u679c\uff0c\u901a\u8fc7\u9a71\u52a8\u7a0b\u5e8f\u5c06\u76f8\u5e94\u7684\u663e\u793a\u6570\u636e\u8f93\u51fa\u5230OLED\u663e\u793a\u5c4f\u548c8*8\u7684LED\u70b9\u9635\u3002 \u2003\u2003\u82e5\u8bc6\u522b\u7ed3\u679c\u4e3a\u201chas_mask\u201d\uff0c\u5219OLED\u9700\u663e\u793a\u201chas mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u7b11\u8138\uff0c\u5982\u56fe3\u6240\u793a\u3002 \u56fe3 \u68c0\u6d4b\u5230\u6234\u53e3\u7f69 \u2003\u2003\u540c\u7406\uff0c\u82e5\u8bc6\u522b\u7ed3\u679c\u4e3a\u201cno_mask\u201d\uff0c\u5219OLED\u9700\u663e\u793a\u201cno mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u54ed\u8138\uff1b\u82e5\u8bc6\u522b\u7ed3\u679c\u4e3a\u201cunknown\u201d\uff0c\u5219OLED\u9700\u663e\u793a\u201cunknown\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u4e2a\u95ee\u53f7\uff0c\u5982\u56fe2\u6240\u793a\u3002","title":"\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b"},{"location":"lab3/hilens/#hilens","text":"","title":"\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b"},{"location":"lab3/hilens/#1-hilens","text":"HiLens\u662f\u534e\u4e3a\u5f00\u53d1\u7684\u4e00\u4e2a\u7aef\u4e91\u534f\u540c\u7684\u591a\u6a21\u6001AI\u5f00\u53d1\u5e94\u7528\u5e73\u53f0\uff0c\u63d0\u4f9b\u7b80\u5355\u6613\u7528\u7684\u5f00\u53d1\u6846\u67b6\u3001\u5f00\u7bb1\u5373\u7528\u7684\u5f00\u53d1\u73af\u5883\u3001\u4e30\u5bcc\u7684AI\u6280\u80fd\u5e02\u573a\u548c\u4e91\u4e0a\u7ba1\u7406\u5e73\u53f0\uff0c\u5bf9\u63a5\u591a\u79cd\u7aef\u4fa7\u8ba1\u7b97\u8bbe\u5907\uff0c\u652f\u6301\u89c6\u89c9\u53ca\u542c\u89c9AI\u5e94\u7528\u5f00\u53d1\u3001AI\u5e94\u7528\u5728\u7ebf\u90e8\u7f72\u3001\u6d77\u91cf\u8bbe\u5907\u7ba1\u7406\u7b49\u3002 \u2003\u2003HiLens\u4e91\u4fa7\u63d0\u4f9b\u5f00\u53d1\u6846\u67b6HiLens Framework\u3001\u5f00\u53d1\u73af\u5883HiLens Studio\u3001\u7ba1\u7406\u5e73\u53f0\u548c\u591a\u6a21\u6001AI\u6280\u80fd\uff0c\u4f9b\u7528\u6237\u5728\u4e91\u4fa7\u9009\u8d2d\u6216\u5f00\u53d1\u6280\u80fd\uff0c\u7528\u6237\u53ef\u4ee5\u5b89\u88c5\u6280\u80fd\u5230\u7aef\u4fa7\u8bbe\u5907\uff0c\u4f7f\u7aef\u4fa7\u8bbe\u5907\u5177\u5907AI\u6280\u80fd\uff0c\u4e5f\u53ef\u4ee5\u53d1\u5e03\u6280\u80fd\u81f3\u6280\u80fd\u5e02\u573a\uff0c\u5171\u4eab\u7ed9\u5176\u4ed6\u7528\u6237\uff0c\u5982\u56fe1\u6240\u793a\u3002 \u56fe1 Hilens\u4e91\u4fa7\u67b6\u6784\u56fe \u2003\u2003\u66f4\u591a\u5173\u4e8eHiLens\u7684\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee HiLens\u7684\u5b98\u65b9\u7f51\u7ad9 \u3002","title":"1. HiLens\u7b80\u4ecb"},{"location":"lab3/hilens/#2","text":"\u672c\u5b9e\u9a8c\u8981\u6c42\u8bbe\u8ba1\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b\u7cfb\u7edf\uff0c\u8be5\u7cfb\u7edf\u5305\u62ecHiLens\u667a\u80fd\u6444\u50cf\u5934\u548cGW3399\u5d4c\u5165\u5f0f\u5e73\u53f0\u3002\u5176\u4e2d\uff0cHiLens\u548cGW3399\u901a\u8fc7\u5c40\u57df\u7f51\u8fdb\u884c\u901a\u4fe1\uff0c\u4e14GW3399\u901a\u8fc7\u603b\u7ebf\u8fde\u63a5ARM\u6269\u5c55\u677f\u5e76\u5728\u5176\u4e0a\u663e\u793a\u8bc6\u522b\u7ed3\u679c\uff0c\u5982\u56fe2\u6240\u793a\u3002 \u56fe2 \u5b9e\u7269\u8fde\u63a5 \u2003\u2003\u57fa\u4e8eHiLens\u7684\u53e3\u7f69\u8bc6\u522b\u7cfb\u7edf\u4e3b\u8981\u7531HiLens\u667a\u80fd\u6444\u50cf\u5934\u548cGW3399\u5d4c\u5165\u5f0f\u786c\u4ef6\u5e73\u53f02\u90e8\u5206\u7ec4\u6210\u3002\u5176\u4e2d\uff0cHiLens\u901a\u8fc7\u6444\u50cf\u5934\u91c7\u96c6\u4eba\u8138\u56fe\u50cf\u6570\u636e\uff0c\u5e76\u901a\u8fc7\u8fd0\u884c\u4e8e\u5176\u4e0a\u7684\u53e3\u7f69\u8bc6\u522b\u6280\u80fd\u5224\u65ad\u6444\u50cf\u5934\u524d\u7684\u4eba\u662f\u5426\u4f69\u6234\u53e3\u7f69\u3002 \u2003\u2003\u53e3\u7f69\u7684\u8bc6\u522b\u7ed3\u679c\u9700\u901a\u8fc7Socket\u4f20\u8f93\u5230\u4f5c\u4e3a\u5ba2\u6237\u7aef\u7684GW3399\u5e73\u53f0\u4e0a\u3002\u53e3\u7f69\u7684\u8bc6\u522b\u7ed3\u679c\u6709\u4e09\u79cd\uff1a\u201chas_mask\u201d\u3001\u201cno_mask\u201d\u548c\u201cunknown\u201d\uff0c\u5206\u522b\u8868\u793a\u6234\u53e3\u7f69\u3001\u672a\u6234\u53e3\u7f69\u3001\u672a\u68c0\u6d4b\u5230\u4eba\u8138\u3002 \u2003\u2003GW3399\u63a5\u6536\u5230\u8bc6\u522b\u7ed3\u679c\u540e\uff0c\u8c03\u7528\u4e00\u4e2a\u79f0\u4e3adisplay\u7684\u5e94\u7528\u7a0b\u5e8f\u6765\u5728ARM\u6269\u5c55\u677f\u4e0a\u663e\u793a\u53e3\u7f69\u8bc6\u522b\u7ed3\u679c\u3002 \u2003\u2003display\u7684\u4f5c\u7528\u662f\u6839\u636e\u8bc6\u522b\u7ed3\u679c\uff0c\u901a\u8fc7\u9a71\u52a8\u7a0b\u5e8f\u5c06\u76f8\u5e94\u7684\u663e\u793a\u6570\u636e\u8f93\u51fa\u5230OLED\u663e\u793a\u5c4f\u548c8*8\u7684LED\u70b9\u9635\u3002 \u2003\u2003\u82e5\u8bc6\u522b\u7ed3\u679c\u4e3a\u201chas_mask\u201d\uff0c\u5219OLED\u9700\u663e\u793a\u201chas mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u7b11\u8138\uff0c\u5982\u56fe3\u6240\u793a\u3002 \u56fe3 \u68c0\u6d4b\u5230\u6234\u53e3\u7f69 \u2003\u2003\u540c\u7406\uff0c\u82e5\u8bc6\u522b\u7ed3\u679c\u4e3a\u201cno_mask\u201d\uff0c\u5219OLED\u9700\u663e\u793a\u201cno mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u54ed\u8138\uff1b\u82e5\u8bc6\u522b\u7ed3\u679c\u4e3a\u201cunknown\u201d\uff0c\u5219OLED\u9700\u663e\u793a\u201cunknown\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u4e2a\u95ee\u53f7\uff0c\u5982\u56fe2\u6240\u793a\u3002","title":"2. \u7cfb\u7edf\u6982\u8ff0"},{"location":"lab3/i2c/","text":"I2C\u534f\u8bae\u53ca\u9a71\u52a8\u6982\u8ff0 1. I2C\u534f\u8bae\u6982\u8ff0 \u2003\u2003I2C\u603b\u7ebf(Inter-Integrated Circuit Bus) \u6700\u65e9\u662f\u7531Philips\u534a\u5bfc\u4f53\uff08\u73b0\u88abNXP\u6536\u8d2d\uff09\u5f00\u53d1\u7684\u4e00\u79cd\u7b80\u5355\u3001\u53cc\u5411\u4e8c\u7ebf\u5236\u540c\u6b65\u4e32\u884c\u603b\u7ebf\u3002\u5b83\u53ea\u9700\u8981\u4e24\u6839\u7ebf\uff08\u4e32\u884c\u6570\u636e\u7ebfSDA\u548c\u65f6\u949f\u7ebfSCL\uff09\u5373\u53ef\u5728\u8fde\u63a5\u4e8e\u603b\u7ebf\u4e0a\u7684\u5668\u4ef6\u4e4b\u95f4\u4f20\u9001\u4fe1\u606f\u3002 \u2003\u2003\u8981\u60f3\u4e86\u89e3\u8be6\u7ec6I2C\u534f\u8bae\uff0c\u53ef\u4ee5\u53c2\u80032014\u5e74\u7b2c6\u7248\u672c\u7684I2C\u6807\u51c6\u534f\u8bae\uff1a I2C-Bus Standards Specification \u2003\u2003I2C\u662f\u4e32\u884c\u4f20\u8f93\u603b\u7ebf\uff0c\u6309\u7167\u4e0b\u9762\u683c\u5f0f\u8fdb\u884c\u4e00\u4f4d\u4e00\u4f4d\u4f20\u8f93\u3002\u534f\u8bae\u5982\u4e0b\uff1a 2. RK3399 I2C\u63a5\u53e3 \u2003\u2003RK3399 CPU\u63d0\u4f9b\u4e86\u67099\u7ec4I2C\u603b\u7ebf\u63a5\u53e3\uff1ai2c0 ~ i2c8\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u6bcf\u4e00\u7ec4I2C\u603b\u7ebf\u4e2d\u63a5\u5165\u7684\u4ece\u8bbe\u5907\u5730\u5740\u4e0d\u80fd\u6709\u76f8\u540c\u3002\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0cOLED\u663e\u793a\u5c4f\u548cLed8x8\u70b9\u9635\u90fd\u6302\u5230I2C2\uff08I2C Adaptor 2\uff09\u603b\u7ebf\u63a5\u53e3\u4e0a\u3002 \u2003\u2003I2C\u4ece\u8bbe\u5907\u5730\u5740\uff08slave address\uff09\u75287\u4f4d\u6807\u8bc6\u3002 OLED\u4ece\u8bbe\u5907\u5730\u5740 \u2003\u2003OLED\u82af\u7247\u578b\u53f7\uff1aSSD1316\uff0c\u67e5\u8be5\u82af\u7247\u624b\u518c\u53ef\u4ee5\u77e5\u9053\u5176slave address\uff1a b7 b6 b5 b4 b3 b2 b1 b0 0 1 1 1 1 0 SA0 R/W# \u2003\u2003\u5176\u4e2dSA0\u662f\u7531\u786c\u4ef6\u8bbe\u7f6e\u4e3a0\uff0c\u6700\u4f4e\u4f4db0\u662f\u8bfb\u5199\u6807\u5fd7\u4f4d\uff0c\u56e0\u6b64\uff0cSSD1316\uff08OLED\uff09\u4ece\u8bbe\u5907\u5730\u5740\u662f0x78>>1 = 0x3C\u3002 Led 8x8\u70b9\u9635\u4ece\u8bbe\u5907\u5730\u5740 \u2003\u2003Led 8x8\u70b9\u9635\u82af\u7247\u578b\u53f7\uff1aht16k33\uff0c\u67e5\u8be5\u82af\u7247\u624b\u518c\u53ef\u4ee5\u77e5\u9053\u5176slave address\uff1a b7 b6 b5 b4 b3 b2 b1 b0 1 1 1 0 0 0 0 R/W# \u2003\u2003\u6700\u4f4e\u4f4db0\u662f\u8bfb\u5199\u6807\u5fd7\u4f4d\uff0c\u56e0\u6b64\uff0cht16k33\uff08Led 8x8\uff09\u4ece\u8bbe\u5907\u5730\u5740\u662f0xE0>>1 = 0x70\u3002 3. Linux\u7684I2C\u9a71\u52a8\u6846\u67b6\u5206\u6790 3.1 I2C\u4f53\u7cfb\u7ed3\u6784 \u2003\u2003Linux\u7684I2C\u4f53\u7cfb\u7ed3\u6784\u5206\u4e3a3\u4e2a\u7ec4\u6210\u90e8\u5206\uff08\u5177\u4f53\u5206\u6790\u53ef\u4ee5\u53c2\u8003\u9648\u6587\u667a\u300a\u5d4c\u5165\u5f0f\u7cfb\u7edf\u539f\u7406\u4e0e\u8bbe\u8ba1\u300b\u3001\u5b8b\u5b9d\u534e\u300aLinux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3\u300b\uff09\uff1a I2C\u6838\u5fc3 \uff1adrivers/i2c/i2c-core.c \u2003\u2003I2C\u6838\u5fc3\u63d0\u4f9b\u4e86I2C\u603b\u7ebf\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u7684\u6ce8\u518c\uff0c\u6ce8\u9500\u65b9\u6cd5\uff0cI2C\u901a\u4fe1\u65b9\u6cd5(\u201dalgorithm\u201d)\u4e0a\u5c42\u4ee3\u7801\u5b9e\u73b0\uff0c\u63a2\u6d4b\u8bbe\u5907\uff0c\u68c0\u6d4b\u8bbe\u5907\u5730\u5740\u7684\u4e0a\u5c42\u4ee3\u7801\u5b9e\u73b0\u3002 \u2003\u2003\u4e00\u822c\u6765\u8bf4\uff0cdrivers/i2c/i2c-core.c\u8fd9\u4e2a\u6587\u4ef6\u4e0d\u9700\u8981\u88ab\u5f00\u53d1\u4eba\u5458\u4fee\u6539\uff0c\u4f46\u662f\u7406\u89e3\u5176\u4e2d\u7684\u51fd\u6570\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\u3002 I2C\u603b\u7ebf\u9a71\u52a8 \uff1adrivers/i2c/busses/i2c-rk3x.c \u2003\u2003I2C\u603b\u7ebf\u9a71\u52a8\u662f\u5bf9I2C\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\u9002\u914d\u5668\u7aef\u7684\u5b9e\u73b0\uff0c\u9002\u914d\u5668\u53ef\u7531CPU\u63a7\u5236\uff0c\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u96c6\u6210\u5728CPU\u5185\u90e8\u3002 \u2003\u2003I2C\u603b\u7ebf\u9a71\u52a8\u4e3b\u8981\u5305\u542bI2C\u9002\u914d\u5668\u6570\u636e\u7ed3\u6784i2c_adapter\u3001I2C\u9002\u914d\u5668\u7684Algorithm\u6570\u636e\u7ed3\u6784i2c_algorithm\u548c\u63a7\u5236I2C\u9002\u914d\u5668\u4ea7\u751f\u901a\u4fe1\u4fe1\u53f7\u7684\u51fd\u6570\u3002\u7ecf\u7531I2C\u603b\u7ebf\u9a71\u52a8\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u63a7\u5236I2C\u9002\u914d\u5668\u4ee5\u4e3b\u63a7\u65b9\u5f0f\u4ea7\u751f\u5f00\u59cb\u4f4d\u3001\u505c\u6b62\u4f4d\u3001\u8bfb\u5199\u5468\u671f\uff0c\u4ee5\u53ca\u4ee5\u4ece\u8bbe\u5907\u65b9\u5f0f\u88ab\u8bfb\u5199\u3001\u4ea7\u751fACK\u7b49\u3002 \u2003\u2003CPU\u82af\u7247\u5382\u5546\u4e00\u822c\u90fd\u4f1a\u63d0\u4f9bI2C\u603b\u7ebf\u9a71\u52a8\u4ee3\u7801\uff0c\u653e\u5728drivers/i2c/busses\u76ee\u5f55\u3002\u5982\u679c\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6ca1\u6709\u627e\u5230\u76f8\u5173CPU\u7684\u9a71\u52a8\u4ee3\u7801\uff0c\u8fd8\u9700\u8981\u9a71\u52a8\u4eba\u5458\u81ea\u884c\u7f16\u5199\u3002 I2C\u8bbe\u5907\u9a71\u52a8 \uff1a\uff08 \u9700\u8981\u5b9e\u73b0 \uff09 \u2003\u2003I2C\u8bbe\u5907\u9a71\u52a8(\u4e5f\u79f0\u4e3a\u5ba2\u6237\u9a71\u52a8)\u662f\u5bf9I2C\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\u8bbe\u5907\u7aef\u7684\u5b9e\u73b0\uff0c\u8bbe\u5907\u4e00\u822c\u6302\u63a5\u5728\u53d7CPU\u63a7\u5236\u7684I2C\u9002\u914d\u5668\u4e0a\uff0c\u901a\u8fc7I2C\u9002\u914d\u5668\u4e0eCPU\u4ea4\u6362\u6570\u636e\u3002 \u2003\u2003I2C\u8bbe\u5907\u9a71\u52a8\u4e3b\u8981\u5305\u542b\u6570\u636e\u7ed3\u6784i2c_driver\u548ci2c_client\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u5177\u4f53\u8bbe\u5907\u5b9e\u73b0\u5176\u4e2d\u7684\u6210\u5458\u51fd\u6570\u3002 (\u56fe\u7247\u6765\u6e90\u4e8e\uff1a https://www.jianshu.com/p/d1f30e4279d5 ) \u4e3a\u4ec0\u4e48\u8981\u5206\u4e3aI2C\u603b\u7ebf\u9a71\u52a8\u7a0b\u5e8f\u4e0eI2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff1f \u4ece\u786c\u4ef6\u5c42\u6b21\u4e0a\u6765\u8bf4\uff0cI2C\u7684\u65f6\u5e8f\u662f\u6c38\u8fdc\u4e0d\u53d8\u7684\uff08\u5982 I2C-Bus Standards Specification \u6807\u51c6\u5df2\u7ecf\u5236\u5b9a\u597d\u4e86\uff09\uff0cI2C\u603b\u7ebf\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u7740I2C\u7684\u65f6\u5e8f\u3002\u800c\u5bf9\u4e8eI2C\u8bbe\u5907\u6765\u8bf4\uff0c\u5176\u8bbe\u5907\u5730\u5740\u3001\u63a7\u5236\u547d\u4ee4\u3001\u6570\u636e\u90fd\u662f\u8981\u6839\u636e\u5177\u4f53\u7684\u8bbe\u5907\u6765\u786e\u5b9a\u7684\u3002\u6bd4\u5982\uff0c\u5b9e\u9a8c\u4e2d\u63d0\u4f9b\u7684OLED\u548cLED 8*8\u70b9\u9635\u7684\u8bbe\u5907\u5730\u5740\u548c\u63a7\u5236\u547d\u4ee4/\u6570\u636e\u662f\u4e0d\u4e00\u6837\u7684\u3002\u5c06\u603b\u7ebf\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u5206\u5f00\uff0c\u603b\u7ebf\u9a71\u52a8\u7528\u4e8e\u51b3\u5b9a\u603b\u7ebf\u548c\u8bbe\u5907\u4e4b\u95f4\u5982\u4f55\u53d1\u6570\u636e\uff0c\u800c\u8bbe\u5907\u9a71\u52a8\u51b3\u5b9a\u603b\u7ebf\u4e0e\u8bbe\u5907\u4e4b\u95f4\u53d1\u4ec0\u4e48\u6570\u636e\u3002\u4e00\u4e2a\u662f\u600e\u4e48\u53d1\u6570\u636e\uff0c\u4e00\u4e2a\u662f\u53d1\u4ec0\u4e48\u6570\u636e\uff0c\u8fd9\u4e5f\u4f53\u73b0\u4e86Linux\u5185\u6838\u6240\u5021\u5bfc\u7684\u673a\u5236\u4e0e\u7b56\u7565\u5206\u79bb\u7684\u7f16\u7a0b\u827a\u672f\u3002 \u901a\u8fc7\u8fd0\u7528\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u601d\u60f3\uff0cLinux\u5185\u6838\u5c06I2C\u603b\u7ebf\u9002\u914d\u5668\u62bd\u8c61\u51fa\u6765\uff0c\u7528i2c_adapter\u7ed3\u6784\u4f53\u8868\u793a\uff1b\u540c\u65f6\uff0c\u4e5f\u5c06I2C\u8bbe\u5907\u7684\u4fe1\u606f\u62bd\u8c61\u51fa\u6765\uff0c\u7528i2c_board_info\u7ed3\u6784\u4f53\u8868\u793a\u3002\u901a\u8fc7i2c_adapter\u7ed3\u6784\u4f53\u4e0ei2c_board_info\u7ed3\u6784\u4f53\u521b\u5efa\u51fa\u4e00\u4e2ai2c_client\u7684\u7ed3\u6784\u4f53\uff0c\u8fd9\u6837\uff0c\u4e00\u4e2ai2c_client\u5c31\u53ef\u4ee5\u4ee3\u8868\u4e86\u4e00\u4e2a\u62bd\u8c61\u51fa\u6765\u8f6f\u4ef6\u4e0a\u53ef\u4ee5\u64cd\u4f5c\u7684I2C\u8bbe\u5907\u3002 3.2 I2C\u9a71\u52a8\u51e0\u4e2a\u91cd\u8981\u7684\u5bf9\u8c61 struct bus_type i2c_bus_type \uff1aI2C\u603b\u7ebf\u5bf9\u5e94\u7740/sys/bus\u4e0b\u7684\u4e00\u6761\u603b\u7ebf\uff0c\u8fd9\u4e2aI2C\u603b\u7ebf\u7ed3\u6784\u4f53\u7ba1\u7406\u7740I2C\u8bbe\u5907\u4e0eI2C\u603b\u7ebf\u9a71\u52a8\u7684\u5339\u914d\u3001\u5220\u9664\u7b49\u64cd\u4f5c\uff0cI2C\u603b\u7ebf\u4f1a\u8c03\u7528i2c_device_match\u51fd\u6570\u770bI2C\u8bbe\u5907\u548cI2C\u9a71\u52a8\u662f\u5426\u5339\u914d\uff0c\u5982\u679c\u5339\u914d\u5c31\u8c03\u7528i2c_device_probe\u51fd\u6570\uff0c\u8fdb\u800c\u8c03\u7528I2C\u9a71\u52a8\u7684probe\u51fd\u6570\u3002 struct i2c_board_info \uff1a\u63cf\u8ff0\u4e86I2C\u8bbe\u5907\u7684\u786c\u4ef6\u4fe1\u606f struct i2c_adapter \uff1a\u5bf9\u5e94I2C\u603b\u7ebf\u9002\u914d\u5668 struct i2c_client \uff1a\u5bf9\u5e94I2C\u8bbe\u5907 struct i2c_algorithm \uff1a\u5bf9\u5e94\u5982\u4f55\u53d1\u9001I2C\u65f6\u5e8f struct i2c_driver \uff1a\u5bf9\u5e94I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f \u2003\u2003\u5c0f\u7ed3\uff1a i2c_driver\u4e0ei2c_client \u2003\u2003i2c_driver\u5bf9\u5e94\u4e00\u5957\u9a71\u52a8\u65b9\u6cd5\uff0ci2c_client\u5bf9\u5e94\u771f\u5b9e\u7684\u7269\u7406\u8bbe\u5907\uff0c\u6bcf\u4e2aI2C\u8bbe\u5907\u90fd\u9700\u8981\u4e00\u4e2ai2c_client\u6765\u63cf\u8ff0\u3002i2c_driver\u4e0ei2c_client\u7684\u5173\u7cfb\u662f\u4e00\u5bf9\u591a\uff0c\u4e00\u4e2ai2c_driver\u53ef\u4ee5\u652f\u6301\u591a\u4e2a\u540c\u7c7b\u578b\u7684i2c_client\u3002 i2c_adapter\u4e0ei2c_client \u2003\u2003i2c_adapter\u4e0ei2c_client\u7684\u5173\u7cfb\u5982\u4e0a\u8ff0\u6240\u8bf4\uff0c\u7531\u4e8e\u4e00\u4e2a\u9002\u914d\u5668\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aI2C\u8bbe\u5907\uff0c\u6240\u4ee5\u4e00\u4e2ai2c_adapter\u4e5f\u53ef\u4ee5\u88ab\u591a\u4e2ai2c_client\u4f9d\u9644\u3002 4. OLED\u8bbe\u5907\u4ecb\u7ecd 4.1 OLED\u786c\u4ef6\u4ecb\u7ecd \u2003\u2003SSD1316\uff08OLED\uff09\u50cf\u7d20\u662f96 * 32\uff1a \u2003\u2003\u67e5SSD1316\u82af\u7247\u624b\u518c\uff0c\u53ef\u4ee5\u77e5\u9053\uff1a There are 3 different memory addressing mode in SSD1316: page addressing mode, horizontal addressing mode and vertical addressing mode. \u2003\u2003\u672c\u5b9e\u9a8c\u9009\u62e9\u7528Page addressing mode\uff0c\u5373\u5206\u62104\u4e2apage\uff0cPAGE0 ~ PAGE3\uff0c\u6bcf\u4e2apage\u67098 Row\u3002 \u2003\u2003\u4e5f\u5c31\u662f\uff0c\u53ef\u4ee5\u7528\u4e8c\u7ef4\u6570\u7ec4led_buf[4][96]\u6765\u5b8c\u6210OLED 96 * 32\u50cf\u7d20\u7684\u5199\u64cd\u4f5c\uff1a for ( int m = 0 ; m < 4 ; m ++ ) { ssd1316_write_command ( 0xb0 + m ); /* Set the page start address of the target display location by command B0h to B3h. */ ssd1316_write_command ( 0x00 ); /* Set the lower start column address of pointer by command 00h */ ssd1316_write_command ( 0x10 ); /* Set the upper start column address of pointer by command 10h */ ssd1316_write_data ( led_buf [ m ]); } 4.2 OLED\u7684\u8bfb\u5199\u64cd\u4f5c \u2003\u2003Linux\u5185\u6838\u901a\u8fc7i2c-dev.c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u901a\u7528\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5176\u4e3b\u8bbe\u5907\u53f7\u90fd\u662f89\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a0 ~ 255\u3002\u4e0d\u8fc7\uff0c\u5b83\u5b9e\u73b0\u7684\u662fi2c_client\u662f\u865a\u62df\u3001\u4e34\u65f6\u7684\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u4fbf\u4e8e\u4ece\u7528\u6237\u7a7a\u95f4\u64cd\u4f5cI2C\u5916\u8bbe\uff0c\u5b9e\u73b0\u4e86\u5b57\u7b26\u8bbe\u5907\u7684\u6587\u4ef6\u64cd\u4f5c\u63a5\u53e3\uff0c\u5bf9\u8bbe\u5907\u7684\u5177\u4f53\u8bbf\u95ee\u662f\u901a\u8fc7I2C\u9002\u914d\u5668\u6765\u5b9e\u73b0\u7684\u3002\u4f46\u662f\uff0c\u8fd9\u6240\u6709\u7684\u64cd\u4f5c\u6570\u636e\u90fd\u662f\u57fa\u4e8e\u5b57\u8282\u6d41\u7684\uff0c\u6ca1\u6709\u660e\u786e\u7684\u683c\u5f0f\u548c\u610f\u4e49\u3002\u5982\u4e0a\u6240\u793a\uff0c\u6302\u8f7d\u5728i2c\u4e0a\u7684OLED\u662f\u6309buffer\u5757\u8bfb\u5199\uff0c\u4e0d\u9002\u5408\u4f7f\u7528\u5b57\u8282\u6d41\u6765\u64cd\u4f5cOLED\u3002\u672c\u6b21\u5b9e\u9a8c\u63a8\u8350\u540c\u5b66\u4eec\u4f7f\u7528Linux\u5185\u6838\u63d0\u4f9b\u7684\u8bbe\u5907\u6a21\u578b\u6765\u8bbf\u95eeOLED\u3002 \u2003\u2003\u8bbe\u5907\u6a21\u578b\u662f\u4e3a\u4e86\u65b9\u4fbf\u7535\u6e90\u7ba1\u7406\u800c\u8bbe\u8ba1\u7684\u4e00\u79cd\u8bbe\u5907\u62d3\u6251\u7ed3\u6784\uff0c\u5176\u5f00\u53d1\u8005\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u5c06\u8bbe\u5907\u7ed3\u6784\u6811\u5bfc\u51fa\u4e3a\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff0c\u5373sysfs\u6587\u4ef6\u7cfb\u7edf\u3002sysfs\u662f\u4e00\u4e2a\u57fa\u4e8eRAM\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u548cKobject\u4e00\u8d77\uff0c\u53ef\u4ee5\u5c06Kernel\u7684\u6570\u636e\u7ed3\u6784\u5bfc\u51fa\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u4ee5\u6587\u4ef6\u76ee\u5f55\u7ed3\u6784\u7684\u5f62\u5f0f\uff0c\u63d0\u4f9b\u5bf9\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\uff08\u4ee5\u53ca\u6570\u636e\u7ed3\u6784\u7684\u5c5e\u6027\uff09\u7684\u8bbf\u95ee\u652f\u6301\u3002\u8bf7\u9605\u8bfbDocumentation/filesystems/sysfs.txt \u3001Documentation/kobject.txt\u6587\u6863\u4ee5\u83b7\u5f97\u66f4\u591a\u5173\u4e8esysfs\u548ckobject \u63a5\u53e3\u7684\u4fe1\u606f\u3002 \u2003\u2003\u4e3a\u4e86\u5b9e\u73b0OLED\u6309buffer\u5757\u8bfb\u5199\uff0c\u63a8\u8350\u540c\u5b66\u4eec\u4f7f\u7528BIN_ATTR_RW\u4e8c\u8fdb\u5236\u5c5e\u6027\u6587\u4ef6\u3002 \u2003\u2003BIN_ATTR_RW\u662f\u5728include/linux/sysfs.h\u5934\u6587\u4ef6\u4e2d\u7684\u5b8f\u5b9a\u4e49 #define BIN_ATTR_RW(_name, _size) \\ struct bin_attribute bin_attr_##_name = __BIN_ATTR_RW(_name, _size) \u2003\u2003__BIN_ATTR_RW\u5b8f #define __BIN_ATTR_RW(_name, _size) __BIN_ATTR(_name, \\ (S_IWUSR | S_IRUGO), _name##_read, \\ _name##_write, _size) \u2003\u2003__BIN_ATTR\u5b8f /* macros to create static binary attributes easier */ #define __BIN_ATTR(_name, _mode, _read, _write, _size) { \\ .attr = { .name = __stringify(_name), .mode = _mode },\\ .read = _read, \\ .write = _write, \\ .size = _size, \\ } \u2003\u2003\u628aBIN_ATTR_RW(buffer, 4*96)\u5957\u5165\u4ee5\u4e0a\u7684\u5b8f\u5b9a\u4e49\uff0c\u5c55\u5f00\uff1a struct bin_attribute bin_attr_buffer ( buffer , ( S_IWUSR | S_IRUGO ), buffer_read , buffer_write , 4 * 96 ) { . attr = { . buffer = __stringify ( buffer ), . mode = ( S_IWUSR | S_IRUGO ) }, \\ . read = buffer_read , \\ . write = buffer_write , \\ . size = 4 * 96 , \\ } \u2003\u2003\u5f53\u5e94\u7528\u5c42\u5bf9\u201c/sys/bus/i2c/devices/i2c-2/2-003c/buffer\u201d\u6587\u4ef6\u8fdb\u884cread\u3001write\u7b49\u64cd\u4f5c\u65f6\uff0c\u8fdb\u800c\u4f1a\u8c03\u7528\u5230buffer_read\u3001buffer_write\u51fd\u6570\u3002\u5176\u4e2di2c-2\u662fOLED\u6302\u8f7d\u5230RK3399\u7684i2c2\u603b\u7ebf\u4e0a\uff0c2-003c\u4ee3\u8868i2c2\u603b\u7ebf\uff0c\u4ece\u8bbe\u5907\u5730\u5740\u4e3a0x3c\u3002 ssize_t buffer_read ( struct file * f , struct kobject * k , struct bin_attribute * a , char * buf , loff_t of , size_t len ) //\u6ce8\uff1a\u8be5\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5c06led_buf[4][96]\u62f7\u8d1d\u7ed9buf\uff0c\u5373\u53ea\u9700\u8981\u8bfb\u53d6\u8bbe\u5907\u9a71\u52a8\u4e2d\u7684\u7f13\u5b58\u3002 ssize_t buffer_write ( struct file * f , struct kobject * k , struct bin_attribute * a , char * buf , loff_t of , size_t len ) 5. SSD1316\u7684\u88f8\u673a\u9a71\u52a8\u4ee3\u7801 \u2003\u2003\u7531\u82af\u7247\u624b\u518c\u53ef\u77e5\uff0cSSD1316\u7684\u5382\u5546\u5df2\u63d0\u4f9bOLED\u7684\u521d\u59cb\u5316\u914d\u7f6e\u3001\u5199\u547d\u4ee4\u548c\u5199\u6570\u636e\u6d41\u7a0b\uff0c\u540c\u5b66\u4eec\u9700\u8981\u53c2\u8003\u5382\u5546\u63d0\u4f9b\u7684\u9a71\u52a8\u4ee3\u7801\uff08\u9488\u5bf9\u65e0\u64cd\u4f5c\u7cfb\u7edf\uff09\u6765\u7f16\u5199OLED\u7684Linux I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002 OLED\u521d\u59cb\u5316\uff1a\u5728I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8fprobe\u6267\u884c\u65f6\uff0c\u9700\u8981\u5bf9OLED\u521d\u59cb\u5316\u3002 OLED\u5199\u547d\u4ee4/\u5199\u6570\u636e\uff1a\u8bf7\u53c2\u7167\u4ee5\u4e0b\u4ee3\u7801\u5b9e\u73b0\uff1a // Internal setting\uff08Charge pump\uff09 void sh1316 () { RES = 0 ; delay ( 1000 ); RES = 1 ; delay ( 1000 ); /* \u521d\u59cb\u5316\u914d\u7f6e */ write_i ( 0xAE ); /*display off*/ write_i ( 0x00 ); /*set lower column address*/ write_i ( 0x10 ); /*set higher column address*/ write_i ( 0x40 ); /*set display start line*/ write_i ( 0xb0 ); /*set page address*/ write_i ( 0x81 ); /*contract control*/ write_i ( 0x60 ); /*128*/ write_i ( 0xA1 ); /*set segment remap*/ write_i ( 0xA6 ); /*normal / reverse*/ write_i ( 0xA8 ); /*multiplex ratio*/ write_i ( 0x1F ); /*duty = 1/32*/ write_i ( 0xC0 ); /*Com scan direction*/ write_i ( 0xD3 ); /*set display offset*/ write_i ( 0x00 ); write_i ( 0xD5 ); /*set osc division*/ write_i ( 0x80 ); write_i ( 0xD9 ); /*set pre-charge period*/ write_i ( 0x22 ); write_i ( 0xDA ); /*set COM pins*/ write_i ( 0x12 ); write_i ( 0xdb ); /*set vcomh*/ write_i ( 0x40 ); write_i ( 0x8d ); /*set charge pump enable*/ write_i ( 0x15 ); /* 0X15\uff0c7.5V\uff1b 0X14\uff0c9V */ write_i ( 0xAF ); /*display ON*/ } // \u5199\u65f6\u5e8f void write_w ( unsigned char dat ) { unsigned char m , da ; unsigned char j ; da = dat ; for ( j = 0 ; j < 8 ; j ++ ){ m = da ; SCL = 0 ; m = m & 0x80 ; if ( m == 0x80 ) SDA = 1 ; else SDA = 0 ; da = da << 1 ; SCL = 1 ; } SCL = 0 ; SCL = 1 ; } void write_i ( unsigned char ins ) { // \u8d77\u59cb\u4f4d start (); /* \u5199\u547d\u4ee4 */ write_w ( 0x78 ); write_w ( 0x00 ); write_w ( ins ); // \u505c\u6b62\u4f4d stop (); } void write_d ( unsigned char dat ) { // \u8d77\u59cb\u4f4d start (); /* \u5199\u6570\u636e */ write_w ( 0x78 ); write_w ( 0x40 ); write_w ( dat ); // \u505c\u6b62\u4f4d stop (); } void start () { SCL = 1 ; SDA = 1 ; SDA = 0 ; SCL = 0 ; } void stop () { SCL = 0 ; SDA = 0 ; SDA = 1 ; SCL = 1 ; } void delay ( unsigned int t ) { while ( t > 0 ) t -- ; }","title":"I2C\u534f\u8bae\u53ca\u9a71\u52a8\u6982\u8ff0"},{"location":"lab3/i2c/#i2c","text":"","title":"I2C\u534f\u8bae\u53ca\u9a71\u52a8\u6982\u8ff0"},{"location":"lab3/i2c/#1-i2c","text":"I2C\u603b\u7ebf(Inter-Integrated Circuit Bus) \u6700\u65e9\u662f\u7531Philips\u534a\u5bfc\u4f53\uff08\u73b0\u88abNXP\u6536\u8d2d\uff09\u5f00\u53d1\u7684\u4e00\u79cd\u7b80\u5355\u3001\u53cc\u5411\u4e8c\u7ebf\u5236\u540c\u6b65\u4e32\u884c\u603b\u7ebf\u3002\u5b83\u53ea\u9700\u8981\u4e24\u6839\u7ebf\uff08\u4e32\u884c\u6570\u636e\u7ebfSDA\u548c\u65f6\u949f\u7ebfSCL\uff09\u5373\u53ef\u5728\u8fde\u63a5\u4e8e\u603b\u7ebf\u4e0a\u7684\u5668\u4ef6\u4e4b\u95f4\u4f20\u9001\u4fe1\u606f\u3002 \u2003\u2003\u8981\u60f3\u4e86\u89e3\u8be6\u7ec6I2C\u534f\u8bae\uff0c\u53ef\u4ee5\u53c2\u80032014\u5e74\u7b2c6\u7248\u672c\u7684I2C\u6807\u51c6\u534f\u8bae\uff1a I2C-Bus Standards Specification \u2003\u2003I2C\u662f\u4e32\u884c\u4f20\u8f93\u603b\u7ebf\uff0c\u6309\u7167\u4e0b\u9762\u683c\u5f0f\u8fdb\u884c\u4e00\u4f4d\u4e00\u4f4d\u4f20\u8f93\u3002\u534f\u8bae\u5982\u4e0b\uff1a","title":"1. I2C\u534f\u8bae\u6982\u8ff0"},{"location":"lab3/i2c/#2-rk3399-i2c","text":"RK3399 CPU\u63d0\u4f9b\u4e86\u67099\u7ec4I2C\u603b\u7ebf\u63a5\u53e3\uff1ai2c0 ~ i2c8\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5728\u6bcf\u4e00\u7ec4I2C\u603b\u7ebf\u4e2d\u63a5\u5165\u7684\u4ece\u8bbe\u5907\u5730\u5740\u4e0d\u80fd\u6709\u76f8\u540c\u3002\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0cOLED\u663e\u793a\u5c4f\u548cLed8x8\u70b9\u9635\u90fd\u6302\u5230I2C2\uff08I2C Adaptor 2\uff09\u603b\u7ebf\u63a5\u53e3\u4e0a\u3002 \u2003\u2003I2C\u4ece\u8bbe\u5907\u5730\u5740\uff08slave address\uff09\u75287\u4f4d\u6807\u8bc6\u3002 OLED\u4ece\u8bbe\u5907\u5730\u5740 \u2003\u2003OLED\u82af\u7247\u578b\u53f7\uff1aSSD1316\uff0c\u67e5\u8be5\u82af\u7247\u624b\u518c\u53ef\u4ee5\u77e5\u9053\u5176slave address\uff1a b7 b6 b5 b4 b3 b2 b1 b0 0 1 1 1 1 0 SA0 R/W# \u2003\u2003\u5176\u4e2dSA0\u662f\u7531\u786c\u4ef6\u8bbe\u7f6e\u4e3a0\uff0c\u6700\u4f4e\u4f4db0\u662f\u8bfb\u5199\u6807\u5fd7\u4f4d\uff0c\u56e0\u6b64\uff0cSSD1316\uff08OLED\uff09\u4ece\u8bbe\u5907\u5730\u5740\u662f0x78>>1 = 0x3C\u3002 Led 8x8\u70b9\u9635\u4ece\u8bbe\u5907\u5730\u5740 \u2003\u2003Led 8x8\u70b9\u9635\u82af\u7247\u578b\u53f7\uff1aht16k33\uff0c\u67e5\u8be5\u82af\u7247\u624b\u518c\u53ef\u4ee5\u77e5\u9053\u5176slave address\uff1a b7 b6 b5 b4 b3 b2 b1 b0 1 1 1 0 0 0 0 R/W# \u2003\u2003\u6700\u4f4e\u4f4db0\u662f\u8bfb\u5199\u6807\u5fd7\u4f4d\uff0c\u56e0\u6b64\uff0cht16k33\uff08Led 8x8\uff09\u4ece\u8bbe\u5907\u5730\u5740\u662f0xE0>>1 = 0x70\u3002","title":"2. RK3399 I2C\u63a5\u53e3"},{"location":"lab3/i2c/#3-linuxi2c","text":"","title":"3.  Linux\u7684I2C\u9a71\u52a8\u6846\u67b6\u5206\u6790"},{"location":"lab3/i2c/#31-i2c","text":"Linux\u7684I2C\u4f53\u7cfb\u7ed3\u6784\u5206\u4e3a3\u4e2a\u7ec4\u6210\u90e8\u5206\uff08\u5177\u4f53\u5206\u6790\u53ef\u4ee5\u53c2\u8003\u9648\u6587\u667a\u300a\u5d4c\u5165\u5f0f\u7cfb\u7edf\u539f\u7406\u4e0e\u8bbe\u8ba1\u300b\u3001\u5b8b\u5b9d\u534e\u300aLinux\u8bbe\u5907\u9a71\u52a8\u5f00\u53d1\u8be6\u89e3\u300b\uff09\uff1a I2C\u6838\u5fc3 \uff1adrivers/i2c/i2c-core.c \u2003\u2003I2C\u6838\u5fc3\u63d0\u4f9b\u4e86I2C\u603b\u7ebf\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u7684\u6ce8\u518c\uff0c\u6ce8\u9500\u65b9\u6cd5\uff0cI2C\u901a\u4fe1\u65b9\u6cd5(\u201dalgorithm\u201d)\u4e0a\u5c42\u4ee3\u7801\u5b9e\u73b0\uff0c\u63a2\u6d4b\u8bbe\u5907\uff0c\u68c0\u6d4b\u8bbe\u5907\u5730\u5740\u7684\u4e0a\u5c42\u4ee3\u7801\u5b9e\u73b0\u3002 \u2003\u2003\u4e00\u822c\u6765\u8bf4\uff0cdrivers/i2c/i2c-core.c\u8fd9\u4e2a\u6587\u4ef6\u4e0d\u9700\u8981\u88ab\u5f00\u53d1\u4eba\u5458\u4fee\u6539\uff0c\u4f46\u662f\u7406\u89e3\u5176\u4e2d\u7684\u51fd\u6570\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\u3002 I2C\u603b\u7ebf\u9a71\u52a8 \uff1adrivers/i2c/busses/i2c-rk3x.c \u2003\u2003I2C\u603b\u7ebf\u9a71\u52a8\u662f\u5bf9I2C\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\u9002\u914d\u5668\u7aef\u7684\u5b9e\u73b0\uff0c\u9002\u914d\u5668\u53ef\u7531CPU\u63a7\u5236\uff0c\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u96c6\u6210\u5728CPU\u5185\u90e8\u3002 \u2003\u2003I2C\u603b\u7ebf\u9a71\u52a8\u4e3b\u8981\u5305\u542bI2C\u9002\u914d\u5668\u6570\u636e\u7ed3\u6784i2c_adapter\u3001I2C\u9002\u914d\u5668\u7684Algorithm\u6570\u636e\u7ed3\u6784i2c_algorithm\u548c\u63a7\u5236I2C\u9002\u914d\u5668\u4ea7\u751f\u901a\u4fe1\u4fe1\u53f7\u7684\u51fd\u6570\u3002\u7ecf\u7531I2C\u603b\u7ebf\u9a71\u52a8\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u63a7\u5236I2C\u9002\u914d\u5668\u4ee5\u4e3b\u63a7\u65b9\u5f0f\u4ea7\u751f\u5f00\u59cb\u4f4d\u3001\u505c\u6b62\u4f4d\u3001\u8bfb\u5199\u5468\u671f\uff0c\u4ee5\u53ca\u4ee5\u4ece\u8bbe\u5907\u65b9\u5f0f\u88ab\u8bfb\u5199\u3001\u4ea7\u751fACK\u7b49\u3002 \u2003\u2003CPU\u82af\u7247\u5382\u5546\u4e00\u822c\u90fd\u4f1a\u63d0\u4f9bI2C\u603b\u7ebf\u9a71\u52a8\u4ee3\u7801\uff0c\u653e\u5728drivers/i2c/busses\u76ee\u5f55\u3002\u5982\u679c\u5728\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u6ca1\u6709\u627e\u5230\u76f8\u5173CPU\u7684\u9a71\u52a8\u4ee3\u7801\uff0c\u8fd8\u9700\u8981\u9a71\u52a8\u4eba\u5458\u81ea\u884c\u7f16\u5199\u3002 I2C\u8bbe\u5907\u9a71\u52a8 \uff1a\uff08 \u9700\u8981\u5b9e\u73b0 \uff09 \u2003\u2003I2C\u8bbe\u5907\u9a71\u52a8(\u4e5f\u79f0\u4e3a\u5ba2\u6237\u9a71\u52a8)\u662f\u5bf9I2C\u786c\u4ef6\u4f53\u7cfb\u7ed3\u6784\u4e2d\u8bbe\u5907\u7aef\u7684\u5b9e\u73b0\uff0c\u8bbe\u5907\u4e00\u822c\u6302\u63a5\u5728\u53d7CPU\u63a7\u5236\u7684I2C\u9002\u914d\u5668\u4e0a\uff0c\u901a\u8fc7I2C\u9002\u914d\u5668\u4e0eCPU\u4ea4\u6362\u6570\u636e\u3002 \u2003\u2003I2C\u8bbe\u5907\u9a71\u52a8\u4e3b\u8981\u5305\u542b\u6570\u636e\u7ed3\u6784i2c_driver\u548ci2c_client\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u5177\u4f53\u8bbe\u5907\u5b9e\u73b0\u5176\u4e2d\u7684\u6210\u5458\u51fd\u6570\u3002 (\u56fe\u7247\u6765\u6e90\u4e8e\uff1a https://www.jianshu.com/p/d1f30e4279d5 ) \u4e3a\u4ec0\u4e48\u8981\u5206\u4e3aI2C\u603b\u7ebf\u9a71\u52a8\u7a0b\u5e8f\u4e0eI2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff1f \u4ece\u786c\u4ef6\u5c42\u6b21\u4e0a\u6765\u8bf4\uff0cI2C\u7684\u65f6\u5e8f\u662f\u6c38\u8fdc\u4e0d\u53d8\u7684\uff08\u5982 I2C-Bus Standards Specification \u6807\u51c6\u5df2\u7ecf\u5236\u5b9a\u597d\u4e86\uff09\uff0cI2C\u603b\u7ebf\u9a71\u52a8\u7a0b\u5e8f\u63a7\u5236\u7740I2C\u7684\u65f6\u5e8f\u3002\u800c\u5bf9\u4e8eI2C\u8bbe\u5907\u6765\u8bf4\uff0c\u5176\u8bbe\u5907\u5730\u5740\u3001\u63a7\u5236\u547d\u4ee4\u3001\u6570\u636e\u90fd\u662f\u8981\u6839\u636e\u5177\u4f53\u7684\u8bbe\u5907\u6765\u786e\u5b9a\u7684\u3002\u6bd4\u5982\uff0c\u5b9e\u9a8c\u4e2d\u63d0\u4f9b\u7684OLED\u548cLED 8*8\u70b9\u9635\u7684\u8bbe\u5907\u5730\u5740\u548c\u63a7\u5236\u547d\u4ee4/\u6570\u636e\u662f\u4e0d\u4e00\u6837\u7684\u3002\u5c06\u603b\u7ebf\u9a71\u52a8\u548c\u8bbe\u5907\u9a71\u52a8\u5206\u5f00\uff0c\u603b\u7ebf\u9a71\u52a8\u7528\u4e8e\u51b3\u5b9a\u603b\u7ebf\u548c\u8bbe\u5907\u4e4b\u95f4\u5982\u4f55\u53d1\u6570\u636e\uff0c\u800c\u8bbe\u5907\u9a71\u52a8\u51b3\u5b9a\u603b\u7ebf\u4e0e\u8bbe\u5907\u4e4b\u95f4\u53d1\u4ec0\u4e48\u6570\u636e\u3002\u4e00\u4e2a\u662f\u600e\u4e48\u53d1\u6570\u636e\uff0c\u4e00\u4e2a\u662f\u53d1\u4ec0\u4e48\u6570\u636e\uff0c\u8fd9\u4e5f\u4f53\u73b0\u4e86Linux\u5185\u6838\u6240\u5021\u5bfc\u7684\u673a\u5236\u4e0e\u7b56\u7565\u5206\u79bb\u7684\u7f16\u7a0b\u827a\u672f\u3002 \u901a\u8fc7\u8fd0\u7528\u9762\u5411\u5bf9\u8c61\u7684\u8bbe\u8ba1\u601d\u60f3\uff0cLinux\u5185\u6838\u5c06I2C\u603b\u7ebf\u9002\u914d\u5668\u62bd\u8c61\u51fa\u6765\uff0c\u7528i2c_adapter\u7ed3\u6784\u4f53\u8868\u793a\uff1b\u540c\u65f6\uff0c\u4e5f\u5c06I2C\u8bbe\u5907\u7684\u4fe1\u606f\u62bd\u8c61\u51fa\u6765\uff0c\u7528i2c_board_info\u7ed3\u6784\u4f53\u8868\u793a\u3002\u901a\u8fc7i2c_adapter\u7ed3\u6784\u4f53\u4e0ei2c_board_info\u7ed3\u6784\u4f53\u521b\u5efa\u51fa\u4e00\u4e2ai2c_client\u7684\u7ed3\u6784\u4f53\uff0c\u8fd9\u6837\uff0c\u4e00\u4e2ai2c_client\u5c31\u53ef\u4ee5\u4ee3\u8868\u4e86\u4e00\u4e2a\u62bd\u8c61\u51fa\u6765\u8f6f\u4ef6\u4e0a\u53ef\u4ee5\u64cd\u4f5c\u7684I2C\u8bbe\u5907\u3002","title":"3.1  I2C\u4f53\u7cfb\u7ed3\u6784"},{"location":"lab3/i2c/#32-i2c","text":"struct bus_type i2c_bus_type \uff1aI2C\u603b\u7ebf\u5bf9\u5e94\u7740/sys/bus\u4e0b\u7684\u4e00\u6761\u603b\u7ebf\uff0c\u8fd9\u4e2aI2C\u603b\u7ebf\u7ed3\u6784\u4f53\u7ba1\u7406\u7740I2C\u8bbe\u5907\u4e0eI2C\u603b\u7ebf\u9a71\u52a8\u7684\u5339\u914d\u3001\u5220\u9664\u7b49\u64cd\u4f5c\uff0cI2C\u603b\u7ebf\u4f1a\u8c03\u7528i2c_device_match\u51fd\u6570\u770bI2C\u8bbe\u5907\u548cI2C\u9a71\u52a8\u662f\u5426\u5339\u914d\uff0c\u5982\u679c\u5339\u914d\u5c31\u8c03\u7528i2c_device_probe\u51fd\u6570\uff0c\u8fdb\u800c\u8c03\u7528I2C\u9a71\u52a8\u7684probe\u51fd\u6570\u3002 struct i2c_board_info \uff1a\u63cf\u8ff0\u4e86I2C\u8bbe\u5907\u7684\u786c\u4ef6\u4fe1\u606f struct i2c_adapter \uff1a\u5bf9\u5e94I2C\u603b\u7ebf\u9002\u914d\u5668 struct i2c_client \uff1a\u5bf9\u5e94I2C\u8bbe\u5907 struct i2c_algorithm \uff1a\u5bf9\u5e94\u5982\u4f55\u53d1\u9001I2C\u65f6\u5e8f struct i2c_driver \uff1a\u5bf9\u5e94I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f \u2003\u2003\u5c0f\u7ed3\uff1a i2c_driver\u4e0ei2c_client \u2003\u2003i2c_driver\u5bf9\u5e94\u4e00\u5957\u9a71\u52a8\u65b9\u6cd5\uff0ci2c_client\u5bf9\u5e94\u771f\u5b9e\u7684\u7269\u7406\u8bbe\u5907\uff0c\u6bcf\u4e2aI2C\u8bbe\u5907\u90fd\u9700\u8981\u4e00\u4e2ai2c_client\u6765\u63cf\u8ff0\u3002i2c_driver\u4e0ei2c_client\u7684\u5173\u7cfb\u662f\u4e00\u5bf9\u591a\uff0c\u4e00\u4e2ai2c_driver\u53ef\u4ee5\u652f\u6301\u591a\u4e2a\u540c\u7c7b\u578b\u7684i2c_client\u3002 i2c_adapter\u4e0ei2c_client \u2003\u2003i2c_adapter\u4e0ei2c_client\u7684\u5173\u7cfb\u5982\u4e0a\u8ff0\u6240\u8bf4\uff0c\u7531\u4e8e\u4e00\u4e2a\u9002\u914d\u5668\u53ef\u4ee5\u8fde\u63a5\u591a\u4e2aI2C\u8bbe\u5907\uff0c\u6240\u4ee5\u4e00\u4e2ai2c_adapter\u4e5f\u53ef\u4ee5\u88ab\u591a\u4e2ai2c_client\u4f9d\u9644\u3002","title":"3.2  I2C\u9a71\u52a8\u51e0\u4e2a\u91cd\u8981\u7684\u5bf9\u8c61"},{"location":"lab3/i2c/#4-oled","text":"","title":"4.  OLED\u8bbe\u5907\u4ecb\u7ecd"},{"location":"lab3/i2c/#41-oled","text":"SSD1316\uff08OLED\uff09\u50cf\u7d20\u662f96 * 32\uff1a \u2003\u2003\u67e5SSD1316\u82af\u7247\u624b\u518c\uff0c\u53ef\u4ee5\u77e5\u9053\uff1a There are 3 different memory addressing mode in SSD1316: page addressing mode, horizontal addressing mode and vertical addressing mode. \u2003\u2003\u672c\u5b9e\u9a8c\u9009\u62e9\u7528Page addressing mode\uff0c\u5373\u5206\u62104\u4e2apage\uff0cPAGE0 ~ PAGE3\uff0c\u6bcf\u4e2apage\u67098 Row\u3002 \u2003\u2003\u4e5f\u5c31\u662f\uff0c\u53ef\u4ee5\u7528\u4e8c\u7ef4\u6570\u7ec4led_buf[4][96]\u6765\u5b8c\u6210OLED 96 * 32\u50cf\u7d20\u7684\u5199\u64cd\u4f5c\uff1a for ( int m = 0 ; m < 4 ; m ++ ) { ssd1316_write_command ( 0xb0 + m ); /* Set the page start address of the target display location by command B0h to B3h. */ ssd1316_write_command ( 0x00 ); /* Set the lower start column address of pointer by command 00h */ ssd1316_write_command ( 0x10 ); /* Set the upper start column address of pointer by command 10h */ ssd1316_write_data ( led_buf [ m ]); }","title":"4.1  OLED\u786c\u4ef6\u4ecb\u7ecd"},{"location":"lab3/i2c/#42-oled","text":"Linux\u5185\u6838\u901a\u8fc7i2c-dev.c\u63d0\u4f9b\u4e86\u4e00\u4e2a\u901a\u7528\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff0c\u5176\u4e3b\u8bbe\u5907\u53f7\u90fd\u662f89\uff0c\u6b21\u8bbe\u5907\u53f7\u4e3a0 ~ 255\u3002\u4e0d\u8fc7\uff0c\u5b83\u5b9e\u73b0\u7684\u662fi2c_client\u662f\u865a\u62df\u3001\u4e34\u65f6\u7684\uff0c\u4e3b\u8981\u662f\u4e3a\u4e86\u4fbf\u4e8e\u4ece\u7528\u6237\u7a7a\u95f4\u64cd\u4f5cI2C\u5916\u8bbe\uff0c\u5b9e\u73b0\u4e86\u5b57\u7b26\u8bbe\u5907\u7684\u6587\u4ef6\u64cd\u4f5c\u63a5\u53e3\uff0c\u5bf9\u8bbe\u5907\u7684\u5177\u4f53\u8bbf\u95ee\u662f\u901a\u8fc7I2C\u9002\u914d\u5668\u6765\u5b9e\u73b0\u7684\u3002\u4f46\u662f\uff0c\u8fd9\u6240\u6709\u7684\u64cd\u4f5c\u6570\u636e\u90fd\u662f\u57fa\u4e8e\u5b57\u8282\u6d41\u7684\uff0c\u6ca1\u6709\u660e\u786e\u7684\u683c\u5f0f\u548c\u610f\u4e49\u3002\u5982\u4e0a\u6240\u793a\uff0c\u6302\u8f7d\u5728i2c\u4e0a\u7684OLED\u662f\u6309buffer\u5757\u8bfb\u5199\uff0c\u4e0d\u9002\u5408\u4f7f\u7528\u5b57\u8282\u6d41\u6765\u64cd\u4f5cOLED\u3002\u672c\u6b21\u5b9e\u9a8c\u63a8\u8350\u540c\u5b66\u4eec\u4f7f\u7528Linux\u5185\u6838\u63d0\u4f9b\u7684\u8bbe\u5907\u6a21\u578b\u6765\u8bbf\u95eeOLED\u3002 \u2003\u2003\u8bbe\u5907\u6a21\u578b\u662f\u4e3a\u4e86\u65b9\u4fbf\u7535\u6e90\u7ba1\u7406\u800c\u8bbe\u8ba1\u7684\u4e00\u79cd\u8bbe\u5907\u62d3\u6251\u7ed3\u6784\uff0c\u5176\u5f00\u53d1\u8005\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u5c06\u8bbe\u5907\u7ed3\u6784\u6811\u5bfc\u51fa\u4e3a\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\uff0c\u5373sysfs\u6587\u4ef6\u7cfb\u7edf\u3002sysfs\u662f\u4e00\u4e2a\u57fa\u4e8eRAM\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u5b83\u548cKobject\u4e00\u8d77\uff0c\u53ef\u4ee5\u5c06Kernel\u7684\u6570\u636e\u7ed3\u6784\u5bfc\u51fa\u5230\u7528\u6237\u7a7a\u95f4\uff0c\u4ee5\u6587\u4ef6\u76ee\u5f55\u7ed3\u6784\u7684\u5f62\u5f0f\uff0c\u63d0\u4f9b\u5bf9\u8fd9\u4e9b\u6570\u636e\u7ed3\u6784\uff08\u4ee5\u53ca\u6570\u636e\u7ed3\u6784\u7684\u5c5e\u6027\uff09\u7684\u8bbf\u95ee\u652f\u6301\u3002\u8bf7\u9605\u8bfbDocumentation/filesystems/sysfs.txt \u3001Documentation/kobject.txt\u6587\u6863\u4ee5\u83b7\u5f97\u66f4\u591a\u5173\u4e8esysfs\u548ckobject \u63a5\u53e3\u7684\u4fe1\u606f\u3002 \u2003\u2003\u4e3a\u4e86\u5b9e\u73b0OLED\u6309buffer\u5757\u8bfb\u5199\uff0c\u63a8\u8350\u540c\u5b66\u4eec\u4f7f\u7528BIN_ATTR_RW\u4e8c\u8fdb\u5236\u5c5e\u6027\u6587\u4ef6\u3002 \u2003\u2003BIN_ATTR_RW\u662f\u5728include/linux/sysfs.h\u5934\u6587\u4ef6\u4e2d\u7684\u5b8f\u5b9a\u4e49 #define BIN_ATTR_RW(_name, _size) \\ struct bin_attribute bin_attr_##_name = __BIN_ATTR_RW(_name, _size) \u2003\u2003__BIN_ATTR_RW\u5b8f #define __BIN_ATTR_RW(_name, _size) __BIN_ATTR(_name, \\ (S_IWUSR | S_IRUGO), _name##_read, \\ _name##_write, _size) \u2003\u2003__BIN_ATTR\u5b8f /* macros to create static binary attributes easier */ #define __BIN_ATTR(_name, _mode, _read, _write, _size) { \\ .attr = { .name = __stringify(_name), .mode = _mode },\\ .read = _read, \\ .write = _write, \\ .size = _size, \\ } \u2003\u2003\u628aBIN_ATTR_RW(buffer, 4*96)\u5957\u5165\u4ee5\u4e0a\u7684\u5b8f\u5b9a\u4e49\uff0c\u5c55\u5f00\uff1a struct bin_attribute bin_attr_buffer ( buffer , ( S_IWUSR | S_IRUGO ), buffer_read , buffer_write , 4 * 96 ) { . attr = { . buffer = __stringify ( buffer ), . mode = ( S_IWUSR | S_IRUGO ) }, \\ . read = buffer_read , \\ . write = buffer_write , \\ . size = 4 * 96 , \\ } \u2003\u2003\u5f53\u5e94\u7528\u5c42\u5bf9\u201c/sys/bus/i2c/devices/i2c-2/2-003c/buffer\u201d\u6587\u4ef6\u8fdb\u884cread\u3001write\u7b49\u64cd\u4f5c\u65f6\uff0c\u8fdb\u800c\u4f1a\u8c03\u7528\u5230buffer_read\u3001buffer_write\u51fd\u6570\u3002\u5176\u4e2di2c-2\u662fOLED\u6302\u8f7d\u5230RK3399\u7684i2c2\u603b\u7ebf\u4e0a\uff0c2-003c\u4ee3\u8868i2c2\u603b\u7ebf\uff0c\u4ece\u8bbe\u5907\u5730\u5740\u4e3a0x3c\u3002 ssize_t buffer_read ( struct file * f , struct kobject * k , struct bin_attribute * a , char * buf , loff_t of , size_t len ) //\u6ce8\uff1a\u8be5\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5c06led_buf[4][96]\u62f7\u8d1d\u7ed9buf\uff0c\u5373\u53ea\u9700\u8981\u8bfb\u53d6\u8bbe\u5907\u9a71\u52a8\u4e2d\u7684\u7f13\u5b58\u3002 ssize_t buffer_write ( struct file * f , struct kobject * k , struct bin_attribute * a , char * buf , loff_t of , size_t len )","title":"4.2  OLED\u7684\u8bfb\u5199\u64cd\u4f5c"},{"location":"lab3/i2c/#5-ssd1316","text":"\u7531\u82af\u7247\u624b\u518c\u53ef\u77e5\uff0cSSD1316\u7684\u5382\u5546\u5df2\u63d0\u4f9bOLED\u7684\u521d\u59cb\u5316\u914d\u7f6e\u3001\u5199\u547d\u4ee4\u548c\u5199\u6570\u636e\u6d41\u7a0b\uff0c\u540c\u5b66\u4eec\u9700\u8981\u53c2\u8003\u5382\u5546\u63d0\u4f9b\u7684\u9a71\u52a8\u4ee3\u7801\uff08\u9488\u5bf9\u65e0\u64cd\u4f5c\u7cfb\u7edf\uff09\u6765\u7f16\u5199OLED\u7684Linux I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002 OLED\u521d\u59cb\u5316\uff1a\u5728I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8fprobe\u6267\u884c\u65f6\uff0c\u9700\u8981\u5bf9OLED\u521d\u59cb\u5316\u3002 OLED\u5199\u547d\u4ee4/\u5199\u6570\u636e\uff1a\u8bf7\u53c2\u7167\u4ee5\u4e0b\u4ee3\u7801\u5b9e\u73b0\uff1a // Internal setting\uff08Charge pump\uff09 void sh1316 () { RES = 0 ; delay ( 1000 ); RES = 1 ; delay ( 1000 ); /* \u521d\u59cb\u5316\u914d\u7f6e */ write_i ( 0xAE ); /*display off*/ write_i ( 0x00 ); /*set lower column address*/ write_i ( 0x10 ); /*set higher column address*/ write_i ( 0x40 ); /*set display start line*/ write_i ( 0xb0 ); /*set page address*/ write_i ( 0x81 ); /*contract control*/ write_i ( 0x60 ); /*128*/ write_i ( 0xA1 ); /*set segment remap*/ write_i ( 0xA6 ); /*normal / reverse*/ write_i ( 0xA8 ); /*multiplex ratio*/ write_i ( 0x1F ); /*duty = 1/32*/ write_i ( 0xC0 ); /*Com scan direction*/ write_i ( 0xD3 ); /*set display offset*/ write_i ( 0x00 ); write_i ( 0xD5 ); /*set osc division*/ write_i ( 0x80 ); write_i ( 0xD9 ); /*set pre-charge period*/ write_i ( 0x22 ); write_i ( 0xDA ); /*set COM pins*/ write_i ( 0x12 ); write_i ( 0xdb ); /*set vcomh*/ write_i ( 0x40 ); write_i ( 0x8d ); /*set charge pump enable*/ write_i ( 0x15 ); /* 0X15\uff0c7.5V\uff1b 0X14\uff0c9V */ write_i ( 0xAF ); /*display ON*/ } // \u5199\u65f6\u5e8f void write_w ( unsigned char dat ) { unsigned char m , da ; unsigned char j ; da = dat ; for ( j = 0 ; j < 8 ; j ++ ){ m = da ; SCL = 0 ; m = m & 0x80 ; if ( m == 0x80 ) SDA = 1 ; else SDA = 0 ; da = da << 1 ; SCL = 1 ; } SCL = 0 ; SCL = 1 ; } void write_i ( unsigned char ins ) { // \u8d77\u59cb\u4f4d start (); /* \u5199\u547d\u4ee4 */ write_w ( 0x78 ); write_w ( 0x00 ); write_w ( ins ); // \u505c\u6b62\u4f4d stop (); } void write_d ( unsigned char dat ) { // \u8d77\u59cb\u4f4d start (); /* \u5199\u6570\u636e */ write_w ( 0x78 ); write_w ( 0x40 ); write_w ( dat ); // \u505c\u6b62\u4f4d stop (); } void start () { SCL = 1 ; SDA = 1 ; SDA = 0 ; SCL = 0 ; } void stop () { SCL = 0 ; SDA = 0 ; SDA = 1 ; SCL = 1 ; } void delay ( unsigned int t ) { while ( t > 0 ) t -- ; }","title":"5. SSD1316\u7684\u88f8\u673a\u9a71\u52a8\u4ee3\u7801"},{"location":"lab3/overview/","text":"\u5b9e\u9a8c\u6982\u8ff0 \u5b9e\u9a8c\u76ee\u7684 \u2003\u20031. \u4e86\u89e3I2C\u7684\u901a\u4fe1\u673a\u5236\uff0c\u638c\u63e1I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u7684\u5f00\u53d1 \u2003\u20032. \u8fdb\u4e00\u6b65\u719f\u6089Socket\u7f16\u7a0b \u2003\u20033. \u4e86\u89e3\u4f7f\u7528HiLens\u5728\u7aef\u8bbe\u5907\u8fdb\u884c\u667a\u80fd\u5e94\u7528\u5f00\u53d1\u7684\u57fa\u672c\u6d41\u7a0b \u5b9e\u9a8c\u5185\u5bb9 \u2003\u2003\u5b9e\u9a8c\u5185\u5bb9\u5305\u62ec2\u90e8\u5206\uff1a \u2003\u20031. \u5728Linux\u4e0a\u7f16\u5199OLED\u663e\u793a\u5c4f\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff1a \u2003\u2003\uff081\uff09\u5b9e\u73b0I2C\u8bbe\u5907\u9a71\u52a8\u4e2d\u7684i2c_driver\u63a5\u53e3\uff0c\u5305\u542bdev_init()\u3001dev_exit()\u3001dev_i2c_remove()\u3001 \u2003\u2003dev_i2c_probe()\u3001dev_i2c_register()\u51fd\u6570\u4ee5\u53cai2c_device_id\u8bbe\u5907ID\u8868\uff1b \u2003\u2003\uff082\uff09\u5b9e\u73b0I2C\u8bbe\u5907\u6240\u6302\u63a5\u7684OLED\u8bfb\u5199\u64cd\u4f5c\u3002i2c_driver\u53ea\u662f\u5b9e\u73b0\u8bbe\u5907\u4e0e\u603b\u7ebf\u7684\u6302\u63a5\uff0c\u800c\u6302\u63a5 \u2003\u2003\u5728I2C\u603b\u7ebf\u4e0a\u7684\u8bbe\u5907\u5219\u5343\u5dee\u4e07\u522b\u3002\u672c\u5b9e\u9a8c\u8981\u6c42\u4f7f\u7528Page addressing mode\u6765\u5199OLED\u5c4f\uff0c\u56e0\u6b64 \u2003\u2003\u9700\u8981\u5b9e\u73b0\u57fa\u4e8ebuffer\u5757\u7684OLED\u8bfb/\u5199\u64cd\u4f5c\u51fd\u6570\u3002 \u2003\u20032. \u4f7f\u7528HiLens Studio\u65b0\u5efa\u53e3\u7f69\u8bc6\u522b\u6280\u80fd\uff0c\u5e76\u5f00\u53d1\u5d4c\u5165\u5f0f\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\uff0c\u4f7fGW3399\u80fd\u591f\u901a\u8fc7Socket\u83b7\u53d6HiLens\u8f93\u51fa\u7684\u6570\u636e\uff0c\u5e76\u5c06\u53e3\u7f69\u8bc6\u522b\u7684\u7ed3\u679c\u663e\u793a\u5728ARM\u6269\u5c55\u677f\u76848x8 LED\u70b9\u9635\u548cOLED\u5c4f\u5e55\u4e0a\u3002","title":"\u5b9e\u9a8c\u6982\u8ff0"},{"location":"lab3/overview/#_1","text":"","title":"\u5b9e\u9a8c\u6982\u8ff0"},{"location":"lab3/overview/#_2","text":"1. \u4e86\u89e3I2C\u7684\u901a\u4fe1\u673a\u5236\uff0c\u638c\u63e1I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u7684\u5f00\u53d1 \u2003\u20032. \u8fdb\u4e00\u6b65\u719f\u6089Socket\u7f16\u7a0b \u2003\u20033. \u4e86\u89e3\u4f7f\u7528HiLens\u5728\u7aef\u8bbe\u5907\u8fdb\u884c\u667a\u80fd\u5e94\u7528\u5f00\u53d1\u7684\u57fa\u672c\u6d41\u7a0b","title":"\u5b9e\u9a8c\u76ee\u7684"},{"location":"lab3/overview/#_3","text":"\u5b9e\u9a8c\u5185\u5bb9\u5305\u62ec2\u90e8\u5206\uff1a \u2003\u20031. \u5728Linux\u4e0a\u7f16\u5199OLED\u663e\u793a\u5c4f\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff1a \u2003\u2003\uff081\uff09\u5b9e\u73b0I2C\u8bbe\u5907\u9a71\u52a8\u4e2d\u7684i2c_driver\u63a5\u53e3\uff0c\u5305\u542bdev_init()\u3001dev_exit()\u3001dev_i2c_remove()\u3001 \u2003\u2003dev_i2c_probe()\u3001dev_i2c_register()\u51fd\u6570\u4ee5\u53cai2c_device_id\u8bbe\u5907ID\u8868\uff1b \u2003\u2003\uff082\uff09\u5b9e\u73b0I2C\u8bbe\u5907\u6240\u6302\u63a5\u7684OLED\u8bfb\u5199\u64cd\u4f5c\u3002i2c_driver\u53ea\u662f\u5b9e\u73b0\u8bbe\u5907\u4e0e\u603b\u7ebf\u7684\u6302\u63a5\uff0c\u800c\u6302\u63a5 \u2003\u2003\u5728I2C\u603b\u7ebf\u4e0a\u7684\u8bbe\u5907\u5219\u5343\u5dee\u4e07\u522b\u3002\u672c\u5b9e\u9a8c\u8981\u6c42\u4f7f\u7528Page addressing mode\u6765\u5199OLED\u5c4f\uff0c\u56e0\u6b64 \u2003\u2003\u9700\u8981\u5b9e\u73b0\u57fa\u4e8ebuffer\u5757\u7684OLED\u8bfb/\u5199\u64cd\u4f5c\u51fd\u6570\u3002 \u2003\u20032. \u4f7f\u7528HiLens Studio\u65b0\u5efa\u53e3\u7f69\u8bc6\u522b\u6280\u80fd\uff0c\u5e76\u5f00\u53d1\u5d4c\u5165\u5f0f\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\uff0c\u4f7fGW3399\u80fd\u591f\u901a\u8fc7Socket\u83b7\u53d6HiLens\u8f93\u51fa\u7684\u6570\u636e\uff0c\u5e76\u5c06\u53e3\u7f69\u8bc6\u522b\u7684\u7ed3\u679c\u663e\u793a\u5728ARM\u6269\u5c55\u677f\u76848x8 LED\u70b9\u9635\u548cOLED\u5c4f\u5e55\u4e0a\u3002","title":"\u5b9e\u9a8c\u5185\u5bb9"},{"location":"lab3/step/","text":"\u5b9e\u9a8c\u6b65\u9aa4 1. \u5b8c\u6210OLED\u7684\u9a71\u52a8\u5f00\u53d1 1.1 \u89e3\u538b\u5b9e\u9a8c\u5305 \u2003\u2003\u9996\u5148\u5c06gw3399-driver.tar.gz\u62f7\u8d1d\u5230gw3399-sdk\u6240\u5728\u7684\u76ee\u5f55\u4e0b\uff0c\u4f7f\u7528tar\u547d\u4ee4\u89e3\u538b\u3002 \u2003\u2003\u53ef\u89c1gw3399-driver\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a - gw3399 - driver |- module /* \u9a71\u52a8\u7a0b\u5e8f */ |- ht16k33 /* 8x8LED\u70b9\u9635\u5c4f\u7684\u9a71\u52a8 */ |- ssd1316 /* OLED\u5c4f\u7684\u9a71\u52a8 */ |- app /* \u6d4b\u8bd5\u7a0b\u5e8f */ |- output /* \u5b58\u653e\u8f93\u51fa\u6587\u4ef6 */ 1.2 \u7f16\u5199OLED\u9a71\u52a8\u7a0b\u5e8f \u63d0\u793a \u672c\u5b9e\u9a8c\u63d0\u4f9b\u4e868x8 LED\u70b9\u9635\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff0c\u540c\u5b66\u4eec\u53ef\u4ee5\u53c2\u8003\u8be5\u9a71\u52a8\u7a0b\u5e8f\u6765\u7f16\u5199OLED\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002 \u2003\u2003\u8fdb\u5165ssd1316\u76ee\u5f55\uff0c\u9700\u8981\u7f16\u5199ssd1316.c \u548cMakefile \u4e24\u4e2a\u6587\u4ef6 \u2003\u20031. \u5b9e\u73b0OLED i2c\u8bbe\u5907\u9a71\u52a8\u4e2d\u7684i2c_driver\u63a5\u53e3\uff1adev_init()\u3001dev_exit()\u3001dev_i2c_remove()\u3001 \u2003\u2003dev_i2c_probe()\u3001dev_i2c_register()\uff0c\u4ee5\u53cai2c_device_id\u8bbe\u5907ID\u8868\u3002 \u2003\u20032. \u5b9e\u73b0i2c\u8bbe\u5907\u6240\u6302\u63a5\u7684OLED\u8bfb\u5199\u63a5\u53e3\uff1abuffer_read()\u3001buffer_write() 1.3 \u7f16\u8bd1\u9a71\u52a8\u53ca\u6d4b\u8bd5\u7a0b\u5e8f \u2003\u2003\u8fdb\u5165ht16k33\u76ee\u5f55\uff0c\u901a\u8fc7make\u6307\u4ee4\uff0c\u7f16\u8bd1\u9a71\u52a8\u7a0b\u5e8f\uff0c\u751f\u6210ht16k33.ko\u6587\u4ef6\uff1a $ cd ht16k33/ $ make \u2003\u2003\u5c06\u751f\u6210\u7684.ko\u6587\u4ef6\u590d\u5236\u5230output\u8f93\u51fa\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp ht16k33.ko ../../output/ $ make clean \u2003\u2003\u8fdb\u5165ssd1316\u76ee\u5f55\uff0c\u901a\u8fc7make\u6307\u4ee4\uff0c\u7f16\u8bd1\u9a71\u52a8\u7a0b\u5e8f\uff0c\u751f\u6210ssd1316.ko\u6587\u4ef6\uff1a $ cd ../ssd1316/ $ make \u2003\u2003\u5c06\u751f\u6210\u7684.ko\u6587\u4ef6\u590d\u5236\u5230output\u8f93\u51fa\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp ssd1316.ko ../../output/ $ make clean \u2003\u2003\u8fdb\u5165app\u76ee\u5f55\uff0c\u901a\u8fc7make\u6307\u4ee4\uff0c\u7f16\u8bd1\u9a71\u52a8\u7a0b\u5e8f\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6demo\u548cudpfw\uff1a $ cd ../../app/ $ make \u2003\u2003\u5c06\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u590d\u5236\u5230output\u8f93\u51fa\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp demo ../output/ $ sudo cp udpfw ../output/ $ make clean \u2003\u2003\u6700\u540e\uff0c\u901a\u8fc7tar\u6307\u4ee4\u5c06output\u76ee\u5f55\u4e2d\u7684\u8f93\u51fa\u6587\u4ef6\u6253\u5305\uff0c\u4f7f\u7528MobaXterm tftp\u534f\u8bae\u62f7\u8d1dwindows\u7cfb\u7edf D:/FirmWare\uff0c\u5e76\u6e05\u7a7aoutput\u76ee\u5f55\uff1a $ cd ../output/ $ sudo tar -czvf ../mydriver.tar.gz ./ $ cd ../ $ sudo rm -rf output/* 1.4 \u9a71\u52a8\u6a21\u5757\u7684\u52a0\u8f7d\u4e0e\u6d4b\u8bd5 \u2003\u2003\u5728\u5b9e\u9a8c1\u4e2d\uff0c\u6211\u4eec\u70e7\u5f55\u4e86\u4e00\u4e2a\u4e0d\u5e26\u684c\u9762\u7684Ubuntu\u7cfb\u7edf\u3002\u6b64\u5904\u4e3a\u4e86\u80fd\u65b9\u4fbf\u8c03\u8bd5\uff0c\u540c\u5b66\u4eec\u9700\u8981\u91cd\u65b0\u70e7\u5f55\u4e00\u4e2a\u5e26\u684c\u9762\u7684ubuntu\u7cfb\u7edf\u3002\u5c06\u670d\u52a1\u5668\u4e0a\u7684Ubuntu_Desktop.7z\u4e0b\u8f7d\u5e76\u89e3\u538b\uff0c\u5f97\u5230ubuntu-rootfs-20190609.img\u548c\u76f8\u5e94\u7684parameter.txt\u3002\u5229\u7528\u5b9e\u9a8c1\u79cd\u8bb2\u8ff0\u7684\u70e7\u5f55\u90e8\u5206\u56fa\u4ef6\u7684\u65b9\u6cd5\uff0c\u5c06\u8be5\u6587\u4ef6\u7cfb\u7edf\u70e7\u5f55\u5230GW3399\uff0c\u4ece\u800c\u83b7\u5f97\u5e26\u684c\u9762\u7684Ubuntu\u7cfb\u7edf\u3002\uff08\u6ce8\u610f\uff1a\u6587\u4ef6\u7cfb\u7edf\u6bd4\u8f83\u5927\uff0c\u70e7\u5f55\u65f6\u95f4\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u3002\uff09 \u2003\u2003\u70e7\u5f55\u540e\u5c06\u81ea\u52a8\u91cd\u542f\uff0c\u8fdb\u5165Ubuntu\u7cfb\u7edf\u3002\u8fde\u63a5\u6821\u56edWIFI\uff1aHITSZ\uff0c\u5e76\u5230\u6d4f\u89c8\u5668\u4e2d\u8f93\u516510.248.98.2\u7f51\u5740\uff0c\u8f93\u5165\u81ea\u5df1\u7684\u4e0a\u7f51\u8d26\u53f7\u548c\u5bc6\u7801\u3002 \u6ce8\u610f \u4e3a\u4e86\u589e\u5f3aWIFI\u4fe1\u53f7\uff0c\u9700\u8981\u4e3aGW3399\u63a5\u4e0aWIFI\u5929\u7ebf\u3002 \u2003\u2003\u5c06GW3399\u8fde\u63a5\u5230\u7f51\u7edc\u540e\uff0c\u7528\u56fe\u5f62\u754c\u9762\u6253\u5f00\u7ec8\u7aef\u6a21\u62df\u5668\uff08\u4e5f\u53ef\u901a\u8fc7\u5c4f\u5e55\u952e\u76d8\u70b9\u51fb\u5feb\u6377\u952eCtrl+Alt+T\uff09\uff0c\u5982\u56fe1\u6240\u793a\u3002 \u56fe1 \u6253\u5f00\u7ec8\u7aef \u2003\u2003\u7528ping\u6307\u4ee4\u68c0\u6d4bGW3399\u4e0eWindows\u7cfb\u7edf\u7684\u7f51\u7edc\u662f\u5426\u901a\u7545\u3002 \u2003\u2003\u901a\u8fc7tftp\u670d\u52a1\uff0c\u4eceWindows\u7cfb\u7edfD:/FirmWare\uff0c\u4e0b\u8f7dmydriver.tar.gz \u6ce8\u610f \u8fd9\u4e00\u6b65\u5fc5\u987b\u786e\u4fddGW3399\u4e0eWindows\u4e4b\u95f4\u7f51\u7edc\u901a\u7545\u3002 \u2003\u2003\u89e3\u538bmydriver.tar.gz\u5230~/mydriver\u76ee\u5f55\u4e0b\uff1a $ sudo tar -xvzf mydriver.tar.gz \u2003\u2003\u56e0\u4e3aGW3399\u5e73\u677f\u7528\u6237\u767b\u5f55\u540e\uff0c\u5c31\u628a\u76f8\u5173\u7684\u97f3\u9891\u8bbe\u5907\u7ed9\u5360\u7528\u4e86\uff0c\u6240\u4ee5\u4e3a\u4e86\u6f14\u793a\u97f3\u9891\u6d4b\u8bd5\u6548\u679c\uff0c\u6211\u4eec**\u9700\u8981\u5230GW3399\u7684\u5c4f\u5e55\u4e0a\u505a\u4ee5\u4e0b\u64cd\u4f5c\uff1a** \u2003\u2003\u52a0\u8f7d8x8\u70b9\u9635\u9a71\u52a8\u548cOLED\u5c4f\u9a71\u52a8\uff0c\u7136\u540e\u8fd0\u884c\u6d4b\u8bd5\u7a0b\u5e8f\uff1a \uff08 \u6ce8\u610f\uff1a\u4ee5\u4e0b\u64cd\u4f5c\u9700\u8981\u5728GW3399\u5e73\u677f\u4e0a\u8fdb\u884c \uff09 $ sudo insmod ht16k33.ko # \u52a0\u8f7d8x8\u70b9\u9635\u5c4f\u9a71\u52a8 $ sudo insmod ssd1316.ko # \u52a0\u8f7dOLED\u5c4f\u9a71\u52a8 $ sudo ./demo # \u8fd0\u884c\u6d4b\u8bd5\u7a0b\u5e8f \u2003\u2003\u8fd0\u884c\u6210\u529f\u540e\uff0c4\u4e2aLED\u6765\u56de\u95ea\u70c1\u3001OLED\u5c4f\u4e0a\u6eda\u52a8\u663e\u793a\u5f53\u524dTVOC\u6d4b\u91cf\u503c\uff1a \u56fe1 \u6d4b\u8bd5OLED \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u53ef\u901a\u8fc7\u4e24\u4e2a\u6309\u952e\uff0c\u5207\u6362\u5de5\u4f5c\u72b6\u6001\u3002\u82e5OLED\u53ef\u4ee5\u6b63\u5e38\u663e\u793a\u5b57\u7b26\uff0c\u5219\u9a71\u52a8\u6210\u529f\u3002 2. display\u5e94\u7528\u53ca\u5ba2\u6237\u7aef\u5f00\u53d1 \u2003\u2003\u7f16\u5199mask_detection.py\uff0c\u8be5\u7a0b\u5e8f\u4e3b\u8981\u662fsocket\u5ba2\u6237\u7aef\u3002\u5ba2\u6237\u7aef\u63a5\u6536\u670d\u52a1\u5668\u7684\u53e3\u7f69\u8bc6\u522b\u7ed3\u679c\uff0c\u5e76\u8c03\u7528display\u7a0b\u5e8f\u8fdb\u884c\u663e\u793a\u3002 \u2003\u2003\u8865\u5168\u5b9e\u9a8c\u5305\u4e2d\u7684display.c\u6e90\u7801\u6587\u4ef6\uff0c\u4f7f\u5f97\u5176\u80fd\u591f\u6839\u636e\u5ba2\u6237\u7aef\u7684\u63a5\u6536\u5230\u7684\u6570\u636e\uff0c\u5206\u522b\u57288*8 LED\u70b9\u9635\u548cOLED\u663e\u793a\u5c4f\u4e0a\u663e\u793a\u8bc6\u522b\u7ed3\u679c\u3002 \u2003\u2003\u8981\u6c42\uff1a \u2003\u2003\uff081\uff09\u8bc6\u522b\u5230\u5df2\u4f69\u6234\u53e3\u7f69\u65f6\uff0cOLED\u9700\u663e\u793a\u201chas mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u7b11\u8138\uff1b \u2003\u2003\uff082\uff09\u8bc6\u522b\u5230\u672a\u4f69\u6234\u53e3\u7f69\u65f6\uff0cOLED\u9700\u663e\u793a\u201cno mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u54ed\u8138\uff1b \u2003\u2003\uff083\uff09\u672a\u8bc6\u522b\u5230\u4eba\u8138\u65f6\uff0cOLED\u9700\u663e\u793a\u201cunknown\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u4e2a\u95ee\u53f7\u3002 \u6ce8\u610f \u6b64\u5904\u7684socket\u4ec5\u4f5c\u4e3a\u4e00\u79cd\u53c2\u8003\u65b9\u6848\uff0c\u5373\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\u4e0d\u4f5c\u9650\u5236\uff0c\u540c\u5b66\u4eec\u53ef\u81ea\u884c\u53d1\u6325\u3002 \u6b64\u5916\uff0c\u5ba2\u6237\u7aef\u5e76\u975e\u5fc5\u987b\u8981\u4f7f\u7528Python\u5b9e\u73b0\uff0c\u540c\u5b66\u4eec\u4e5f\u53ef\u81ea\u884c\u53d1\u6325\u3002 3. \u53e3\u7f69\u8bc6\u522b\u6280\u80fd\u5f00\u53d1 3.1 \u767b\u5f55\u534e\u4e3aIAM\u8d26\u6237 \u2003\u2003\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee \u534e\u4e3a\u4e91IAM\u7528\u6237\u7684\u767b\u5f55\u9875\u9762 \u3002\u5728\u767b\u5f55\u6846\u7684\u7b2c\u4e00\u884c\u5904\u8f93\u5165\u201ct2_test1\u201d\uff0c\u5728\u7b2c\u4e8c\u884c\u5904\u8f93\u5165\u201cembsysX\u201d\uff08X = \u7ec4\u53f7 - 1\uff0c\u5373\u5982\u679c\u7ec4\u53f7\u4e3a7\uff0c\u90a3\u4e48X\u4e3a6\uff09\uff0c\u521d\u59cb\u5bc6\u7801\u662f\u201cHITSZ2021\u201d\uff0c\u5982\u56fe3\u6240\u793a\u3002 \u56fe3 \u767b\u5f55IAM\u8d26\u6237 \u2003\u2003\u767b\u5f55\u6210\u529f\u540e\uff0c\u9700\u8bbe\u7f6e\u521d\u59cb\u5bc6\u7801\u3002 \u53cb\u60c5\u63d0\u9192 \u8bf7\u52a1\u5fc5\u8bb0\u4f4f\u6240\u8bbe\u7f6e\u7684\u5bc6\u7801\u3002\u82e5\u5fd8\u8bb0\u5bc6\u7801\uff0c\u53ef\u901a\u8fc7\u767b\u5f55\u9875\u9762\u7684\u201c\u5fd8\u8bb0\u5bc6\u7801\u201d\u627e\u56de\u5bc6\u7801\u3002\u82e5\u627e\u56de\u5931\u8d25\uff0c\u8bf7\u53ca\u65f6\u8054\u7cfb\u8001\u5e08\u91cd\u7f6e\u5bc6\u7801\u3002 \u2003\u2003\u8bbe\u7f6e\u65b0\u5bc6\u7801\u540e\uff0c\u5c06\u670d\u52a1\u5668\u533a\u5207\u6362\u5230\u201c\u534e\u5317-\u5317\u4eac\u56db\u201d\uff0c\u7136\u540e\u540c\u610fHiLens\u76f8\u5173\u7684\u6388\u6743\u3002 \u2003\u2003\u7136\u540e\uff0c\u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u4e2d\u95f4\u7684\u5c0f\u7bad\u5934\uff0c\u5c55\u5f00\u83dc\u5355\uff0c\u5982\u56fe4\u6240\u793a\u3002 \u56fe4 \u5c55\u5f00\u63a7\u5236\u53f0\u83dc\u5355 \u2003\u2003\u63a5\u7740\uff0c\u5728\u63a7\u5236\u53f0\u83dc\u5355\u7684\u9876\u90e8\uff0c\u628a\u5f53\u524d\u7684\u5de5\u4f5c\u7a7a\u95f4\u5207\u6362\u5230workspace_embsysX\uff08X = \u7ec4\u53f7 - 1\uff09\uff0c\u5982\u56fe5\u6240\u793a\u3002 \u56fe5 \u5207\u6362\u5de5\u4f5c\u7a7a\u95f4 3.2 HiLens\u6fc0\u6d3b \u2003\u2003\u5207\u6362\u5de5\u4f5c\u7a7a\u95f4\u540e\uff0c\u6253\u5f00HiLens\u7ba1\u7406\u63a7\u5236\u53f0\u7684\u9875\u9762\uff0c\u70b9\u51fb\u201c\u8bbe\u5907\u7ba1\u7406\u201d->\u201c\u8bbe\u5907\u5217\u8868\u201d\uff0c\u67e5\u770b\u5217\u8868\u4e2d\u7684HiLens\u8bbe\u5907\uff0c\u5982\u56fe6\u6240\u793a\u3002 \u56fe6 \u67e5\u770bHiLens\u8bbe\u5907 \u2003\u2003\u82e5\u201c\u57fa\u7840\u6280\u80fd\u6743\u9650\u201d\u5904\u663e\u793a\u7ea2\u5b57\u201c\u672a\u6fc0\u6d3b\u201d\uff0c\u5219\u9700\u8981\u5148\u6fc0\u6d3b\u8bbe\u5907\u624d\u80fd\u8fdb\u884c\u540e\u7eed\u7684\u5f00\u53d1\uff1b\u82e5\u663e\u793a\u7eff\u5b57\u201c\u5df2\u6fc0\u6d3b\u201d\uff0c\u5219\u53ef\u4ee5\u8df3\u8fc7\u6fc0\u6d3b\u7684\u6b65\u9aa4\uff0c\u76f4\u63a5\u5f00\u59cb\u6280\u80fd\u5f00\u53d1\u3002 \u2003\u2003\u6b32\u6fc0\u6d3bHiLens\uff0c\u53ea\u9700\u70b9\u51fb\u201c\u6743\u9650\u6fc0\u6d3b\u201d->\u201c\u6d4b\u8bd5\u6837\u673a\u6fc0\u6d3b\u201d\uff0c\u7136\u540e\u8f93\u5165HiLens\u80cc\u90e8\u6807\u7b7e\u4e0a\u768420\u4f4dSN\u7f16\u7801\u5373\u53ef\uff0c\u5982\u56fe7\u3001\u56fe8\u6240\u793a\u3002 \u56fe7 \u6fc0\u6d3bHiLens \u56fe8 \u67e5\u770bHiLens\u7684SN\u7f16\u53f7 3.2 HiLens\u6280\u80fd\u5f00\u53d1 \u2003\u2003\u767b\u5f55\u8d26\u53f7\u540e\uff0c\u6253\u5f00HiLens\u7ba1\u7406\u63a7\u5236\u53f0\u7684\u9875\u9762\uff0c\u5c55\u5f00\u83dc\u5355\u680f\u4e0b\u7684\u201c\u6280\u80fd\u5f00\u53d1\u201d\uff0c\u70b9\u51fb\u201cHiLens Studio\u201d\uff0c\u5982\u56fe9\u6240\u793a\u3002 \u56fe9 \u70b9\u51fb\u201c\u6280\u80fd\u5f00\u53d1\u201d\u4e0b\u7684\u201cHiLens Studio\u201d \u2003\u2003\u968f\u540e\u5c06\u5f39\u51fa\u5982\u56fe10\u6240\u793a\u7684HiLens Studio\u6307\u5f15\u7684\u9875\u9762\uff0c\u7b49\u5019\u5176\u81ea\u52a8\u5b8c\u6210\u5373\u53ef\u3002 \u56fe10 \u7b49\u5f85\u9875\u9762 \u2003\u2003\u63a5\u4e0b\u6765\u5c06\u8fdb\u5165HiLens Studio\u9875\u9762\u3002\u6b64\u65f6\uff0c\u70b9\u51fbFile->New Project\uff0c\u6216\u70b9\u51fb\u201cGetting Started\u201d\u9875\u9762\u4e0b\u7684\u201cNew Project\u201d\u4ee5\u65b0\u5efa\u6280\u80fd\uff0c\u5982\u56fe11\u6240\u793a\u3002 \u56fe11 \u65b0\u5efa\u6280\u80fd \u2003\u2003\u968f\u540e\u5c06\u5f39\u51fa\u4e00\u4e2a\u5355\u72ec\u7684\u9875\u9762\uff0c\u9009\u62e9\u53e3\u7f69\u8bc6\u522b\u5373\u53ef\uff0c\u5982\u56fe12\u6240\u793a\u3002 \u56fe12 \u65b0\u5efa\u53e3\u7f69\u8bc6\u522b\u6280\u80fd \u2003\u2003\u6839\u636e\u9700\u8981\u4fee\u6539\u5de6\u4fa7\u7684\u5de5\u7a0b\u57fa\u672c\u4fe1\u606f\uff0c\u786e\u8ba4\u65e0\u8bef\u540e\u70b9\u51fb\u201c\u786e\u5b9a\u201d\u6309\u94ae\uff0c\u5982\u56fe13\u6240\u793a\u3002 \u56fe13 \u67e5\u770b\u548c\u7f16\u8f91\u5de5\u7a0b\u7684\u57fa\u672c\u4fe1\u606f \u2003\u2003\u6253\u5f00src\u6587\u4ef6\u5939\u4e0b\u7684main.py\u548cutils.py\uff0c\u4fee\u6539\u76f8\u5173\u4ee3\u7801\u3002 Tips HiLens Studio\u4f1a\u81ea\u52a8\u4fdd\u5b58\u4fee\u6539\u8fc7\u7684\u6e90\u6587\u4ef6\u3002 \u2003\u2003\u6280\u80fd\u7f16\u5199\u5b8c\u6210\u540e\uff0c\u53ef\u5bf9\u5176\u8fdb\u884c\u8c03\u8bd5\u3002 \u2003\u2003\u8c03\u8bd5\u524d\uff0c\u5148\u4ece\u83dc\u5355\u680f\u9009\u62e9\u8f93\u5165\u7684\u89c6\u9891\u6570\u636e\u6e90\uff0c\u5982\u56fe14\u6240\u793a\u3002 \u56fe14 \u9009\u62e9\u8c03\u8bd5\u7684\u6570\u636e\u6e90 \u2003\u2003\u8c03\u8bd5\u65f6\uff0c\u53ef\u5229\u7528\u83dc\u5355\u680f\u7684Debug\u83dc\u5355\u6216\u83dc\u5355\u680f\u53f3\u4fa7\u7684\u5feb\u6377\u6309\u94ae\uff0c\u5982\u56fe15\u6240\u793a\u3002 \u56fe15 \u8c03\u8bd5\u5165\u53e3 3.3 HiLens\u6280\u80fd\u7ba1\u7406 \u2003\u2003\u6280\u80fd\u5c31\u7eea\u540e\uff0c\u6253\u5f00\u53f3\u4fa7\u7684HiLens Widget\u9875\u9762\uff0c\u5728HiLens\u4e0a\u5b89\u88c5\u6280\u80fd\uff0c\u5982\u56fe16\u6240\u793a\u3002 \u56fe16 \u5b89\u88c5\u6280\u80fd\u5230HiLens \u2003\u2003\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u201cStart\u201d\u542f\u52a8\u6280\u80fd\uff0c\u5982\u56fe17\u6240\u793a\u3002 \u56fe17 \u542f\u52a8\u5b89\u88c5\u597d\u7684\u6280\u80fd \u2003\u2003\u6280\u80fd\u542f\u52a8\u540e\uff0c\u65e2\u53ef\u4ee5\u5728HiLens Studio\u4e2d\u91cd\u542f\u3001\u505c\u6b62\u6280\u80fd\uff0c\u4e5f\u53ef\u4ee5\u5728HiLens\u7ba1\u7406\u63a7\u5236\u53f0\u7684\u201c\u8bbe\u5907\u7ba1\u7406\u201d->\u201c\u8bbe\u5907\u5217\u8868\u201d\u4e2d\u67e5\u770b\u548c\u64cd\u4f5c\u6280\u80fd\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u5982\u56fe18\u6240\u793a\u3002 \u56fe18 \u67e5\u770b\u548c\u7ba1\u7406\u6280\u80fd","title":"\u5b9e\u9a8c\u6b65\u9aa4"},{"location":"lab3/step/#_1","text":"","title":"\u5b9e\u9a8c\u6b65\u9aa4"},{"location":"lab3/step/#1-oled","text":"","title":"1. \u5b8c\u6210OLED\u7684\u9a71\u52a8\u5f00\u53d1"},{"location":"lab3/step/#11","text":"\u9996\u5148\u5c06gw3399-driver.tar.gz\u62f7\u8d1d\u5230gw3399-sdk\u6240\u5728\u7684\u76ee\u5f55\u4e0b\uff0c\u4f7f\u7528tar\u547d\u4ee4\u89e3\u538b\u3002 \u2003\u2003\u53ef\u89c1gw3399-driver\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a - gw3399 - driver |- module /* \u9a71\u52a8\u7a0b\u5e8f */ |- ht16k33 /* 8x8LED\u70b9\u9635\u5c4f\u7684\u9a71\u52a8 */ |- ssd1316 /* OLED\u5c4f\u7684\u9a71\u52a8 */ |- app /* \u6d4b\u8bd5\u7a0b\u5e8f */ |- output /* \u5b58\u653e\u8f93\u51fa\u6587\u4ef6 */","title":"1.1 \u89e3\u538b\u5b9e\u9a8c\u5305"},{"location":"lab3/step/#12-oled","text":"\u63d0\u793a \u672c\u5b9e\u9a8c\u63d0\u4f9b\u4e868x8 LED\u70b9\u9635\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\uff0c\u540c\u5b66\u4eec\u53ef\u4ee5\u53c2\u8003\u8be5\u9a71\u52a8\u7a0b\u5e8f\u6765\u7f16\u5199OLED\u7684I2C\u8bbe\u5907\u9a71\u52a8\u7a0b\u5e8f\u3002 \u2003\u2003\u8fdb\u5165ssd1316\u76ee\u5f55\uff0c\u9700\u8981\u7f16\u5199ssd1316.c \u548cMakefile \u4e24\u4e2a\u6587\u4ef6 \u2003\u20031. \u5b9e\u73b0OLED i2c\u8bbe\u5907\u9a71\u52a8\u4e2d\u7684i2c_driver\u63a5\u53e3\uff1adev_init()\u3001dev_exit()\u3001dev_i2c_remove()\u3001 \u2003\u2003dev_i2c_probe()\u3001dev_i2c_register()\uff0c\u4ee5\u53cai2c_device_id\u8bbe\u5907ID\u8868\u3002 \u2003\u20032. \u5b9e\u73b0i2c\u8bbe\u5907\u6240\u6302\u63a5\u7684OLED\u8bfb\u5199\u63a5\u53e3\uff1abuffer_read()\u3001buffer_write()","title":"1.2 \u7f16\u5199OLED\u9a71\u52a8\u7a0b\u5e8f"},{"location":"lab3/step/#13","text":"\u8fdb\u5165ht16k33\u76ee\u5f55\uff0c\u901a\u8fc7make\u6307\u4ee4\uff0c\u7f16\u8bd1\u9a71\u52a8\u7a0b\u5e8f\uff0c\u751f\u6210ht16k33.ko\u6587\u4ef6\uff1a $ cd ht16k33/ $ make \u2003\u2003\u5c06\u751f\u6210\u7684.ko\u6587\u4ef6\u590d\u5236\u5230output\u8f93\u51fa\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp ht16k33.ko ../../output/ $ make clean \u2003\u2003\u8fdb\u5165ssd1316\u76ee\u5f55\uff0c\u901a\u8fc7make\u6307\u4ee4\uff0c\u7f16\u8bd1\u9a71\u52a8\u7a0b\u5e8f\uff0c\u751f\u6210ssd1316.ko\u6587\u4ef6\uff1a $ cd ../ssd1316/ $ make \u2003\u2003\u5c06\u751f\u6210\u7684.ko\u6587\u4ef6\u590d\u5236\u5230output\u8f93\u51fa\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp ssd1316.ko ../../output/ $ make clean \u2003\u2003\u8fdb\u5165app\u76ee\u5f55\uff0c\u901a\u8fc7make\u6307\u4ee4\uff0c\u7f16\u8bd1\u9a71\u52a8\u7a0b\u5e8f\uff0c\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6demo\u548cudpfw\uff1a $ cd ../../app/ $ make \u2003\u2003\u5c06\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u590d\u5236\u5230output\u8f93\u51fa\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u6e05\u7406\u8fc7\u7a0b\u6587\u4ef6\uff1a $ sudo cp demo ../output/ $ sudo cp udpfw ../output/ $ make clean \u2003\u2003\u6700\u540e\uff0c\u901a\u8fc7tar\u6307\u4ee4\u5c06output\u76ee\u5f55\u4e2d\u7684\u8f93\u51fa\u6587\u4ef6\u6253\u5305\uff0c\u4f7f\u7528MobaXterm tftp\u534f\u8bae\u62f7\u8d1dwindows\u7cfb\u7edf D:/FirmWare\uff0c\u5e76\u6e05\u7a7aoutput\u76ee\u5f55\uff1a $ cd ../output/ $ sudo tar -czvf ../mydriver.tar.gz ./ $ cd ../ $ sudo rm -rf output/*","title":"1.3 \u7f16\u8bd1\u9a71\u52a8\u53ca\u6d4b\u8bd5\u7a0b\u5e8f"},{"location":"lab3/step/#14","text":"\u5728\u5b9e\u9a8c1\u4e2d\uff0c\u6211\u4eec\u70e7\u5f55\u4e86\u4e00\u4e2a\u4e0d\u5e26\u684c\u9762\u7684Ubuntu\u7cfb\u7edf\u3002\u6b64\u5904\u4e3a\u4e86\u80fd\u65b9\u4fbf\u8c03\u8bd5\uff0c\u540c\u5b66\u4eec\u9700\u8981\u91cd\u65b0\u70e7\u5f55\u4e00\u4e2a\u5e26\u684c\u9762\u7684ubuntu\u7cfb\u7edf\u3002\u5c06\u670d\u52a1\u5668\u4e0a\u7684Ubuntu_Desktop.7z\u4e0b\u8f7d\u5e76\u89e3\u538b\uff0c\u5f97\u5230ubuntu-rootfs-20190609.img\u548c\u76f8\u5e94\u7684parameter.txt\u3002\u5229\u7528\u5b9e\u9a8c1\u79cd\u8bb2\u8ff0\u7684\u70e7\u5f55\u90e8\u5206\u56fa\u4ef6\u7684\u65b9\u6cd5\uff0c\u5c06\u8be5\u6587\u4ef6\u7cfb\u7edf\u70e7\u5f55\u5230GW3399\uff0c\u4ece\u800c\u83b7\u5f97\u5e26\u684c\u9762\u7684Ubuntu\u7cfb\u7edf\u3002\uff08\u6ce8\u610f\uff1a\u6587\u4ef6\u7cfb\u7edf\u6bd4\u8f83\u5927\uff0c\u70e7\u5f55\u65f6\u95f4\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u3002\uff09 \u2003\u2003\u70e7\u5f55\u540e\u5c06\u81ea\u52a8\u91cd\u542f\uff0c\u8fdb\u5165Ubuntu\u7cfb\u7edf\u3002\u8fde\u63a5\u6821\u56edWIFI\uff1aHITSZ\uff0c\u5e76\u5230\u6d4f\u89c8\u5668\u4e2d\u8f93\u516510.248.98.2\u7f51\u5740\uff0c\u8f93\u5165\u81ea\u5df1\u7684\u4e0a\u7f51\u8d26\u53f7\u548c\u5bc6\u7801\u3002 \u6ce8\u610f \u4e3a\u4e86\u589e\u5f3aWIFI\u4fe1\u53f7\uff0c\u9700\u8981\u4e3aGW3399\u63a5\u4e0aWIFI\u5929\u7ebf\u3002 \u2003\u2003\u5c06GW3399\u8fde\u63a5\u5230\u7f51\u7edc\u540e\uff0c\u7528\u56fe\u5f62\u754c\u9762\u6253\u5f00\u7ec8\u7aef\u6a21\u62df\u5668\uff08\u4e5f\u53ef\u901a\u8fc7\u5c4f\u5e55\u952e\u76d8\u70b9\u51fb\u5feb\u6377\u952eCtrl+Alt+T\uff09\uff0c\u5982\u56fe1\u6240\u793a\u3002 \u56fe1 \u6253\u5f00\u7ec8\u7aef \u2003\u2003\u7528ping\u6307\u4ee4\u68c0\u6d4bGW3399\u4e0eWindows\u7cfb\u7edf\u7684\u7f51\u7edc\u662f\u5426\u901a\u7545\u3002 \u2003\u2003\u901a\u8fc7tftp\u670d\u52a1\uff0c\u4eceWindows\u7cfb\u7edfD:/FirmWare\uff0c\u4e0b\u8f7dmydriver.tar.gz \u6ce8\u610f \u8fd9\u4e00\u6b65\u5fc5\u987b\u786e\u4fddGW3399\u4e0eWindows\u4e4b\u95f4\u7f51\u7edc\u901a\u7545\u3002 \u2003\u2003\u89e3\u538bmydriver.tar.gz\u5230~/mydriver\u76ee\u5f55\u4e0b\uff1a $ sudo tar -xvzf mydriver.tar.gz \u2003\u2003\u56e0\u4e3aGW3399\u5e73\u677f\u7528\u6237\u767b\u5f55\u540e\uff0c\u5c31\u628a\u76f8\u5173\u7684\u97f3\u9891\u8bbe\u5907\u7ed9\u5360\u7528\u4e86\uff0c\u6240\u4ee5\u4e3a\u4e86\u6f14\u793a\u97f3\u9891\u6d4b\u8bd5\u6548\u679c\uff0c\u6211\u4eec**\u9700\u8981\u5230GW3399\u7684\u5c4f\u5e55\u4e0a\u505a\u4ee5\u4e0b\u64cd\u4f5c\uff1a** \u2003\u2003\u52a0\u8f7d8x8\u70b9\u9635\u9a71\u52a8\u548cOLED\u5c4f\u9a71\u52a8\uff0c\u7136\u540e\u8fd0\u884c\u6d4b\u8bd5\u7a0b\u5e8f\uff1a \uff08 \u6ce8\u610f\uff1a\u4ee5\u4e0b\u64cd\u4f5c\u9700\u8981\u5728GW3399\u5e73\u677f\u4e0a\u8fdb\u884c \uff09 $ sudo insmod ht16k33.ko # \u52a0\u8f7d8x8\u70b9\u9635\u5c4f\u9a71\u52a8 $ sudo insmod ssd1316.ko # \u52a0\u8f7dOLED\u5c4f\u9a71\u52a8 $ sudo ./demo # \u8fd0\u884c\u6d4b\u8bd5\u7a0b\u5e8f \u2003\u2003\u8fd0\u884c\u6210\u529f\u540e\uff0c4\u4e2aLED\u6765\u56de\u95ea\u70c1\u3001OLED\u5c4f\u4e0a\u6eda\u52a8\u663e\u793a\u5f53\u524dTVOC\u6d4b\u91cf\u503c\uff1a \u56fe1 \u6d4b\u8bd5OLED \u2003\u2003\u63a5\u4e0b\u6765\uff0c\u53ef\u901a\u8fc7\u4e24\u4e2a\u6309\u952e\uff0c\u5207\u6362\u5de5\u4f5c\u72b6\u6001\u3002\u82e5OLED\u53ef\u4ee5\u6b63\u5e38\u663e\u793a\u5b57\u7b26\uff0c\u5219\u9a71\u52a8\u6210\u529f\u3002","title":"1.4 \u9a71\u52a8\u6a21\u5757\u7684\u52a0\u8f7d\u4e0e\u6d4b\u8bd5"},{"location":"lab3/step/#2-display","text":"\u7f16\u5199mask_detection.py\uff0c\u8be5\u7a0b\u5e8f\u4e3b\u8981\u662fsocket\u5ba2\u6237\u7aef\u3002\u5ba2\u6237\u7aef\u63a5\u6536\u670d\u52a1\u5668\u7684\u53e3\u7f69\u8bc6\u522b\u7ed3\u679c\uff0c\u5e76\u8c03\u7528display\u7a0b\u5e8f\u8fdb\u884c\u663e\u793a\u3002 \u2003\u2003\u8865\u5168\u5b9e\u9a8c\u5305\u4e2d\u7684display.c\u6e90\u7801\u6587\u4ef6\uff0c\u4f7f\u5f97\u5176\u80fd\u591f\u6839\u636e\u5ba2\u6237\u7aef\u7684\u63a5\u6536\u5230\u7684\u6570\u636e\uff0c\u5206\u522b\u57288*8 LED\u70b9\u9635\u548cOLED\u663e\u793a\u5c4f\u4e0a\u663e\u793a\u8bc6\u522b\u7ed3\u679c\u3002 \u2003\u2003\u8981\u6c42\uff1a \u2003\u2003\uff081\uff09\u8bc6\u522b\u5230\u5df2\u4f69\u6234\u53e3\u7f69\u65f6\uff0cOLED\u9700\u663e\u793a\u201chas mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u7b11\u8138\uff1b \u2003\u2003\uff082\uff09\u8bc6\u522b\u5230\u672a\u4f69\u6234\u53e3\u7f69\u65f6\uff0cOLED\u9700\u663e\u793a\u201cno mask\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u5f20\u54ed\u8138\uff1b \u2003\u2003\uff083\uff09\u672a\u8bc6\u522b\u5230\u4eba\u8138\u65f6\uff0cOLED\u9700\u663e\u793a\u201cunknown\u201d\u5b57\u6837\uff0c\u4e14LED\u70b9\u9635\u9700\u663e\u793a\u4e00\u4e2a\u95ee\u53f7\u3002 \u6ce8\u610f \u6b64\u5904\u7684socket\u4ec5\u4f5c\u4e3a\u4e00\u79cd\u53c2\u8003\u65b9\u6848\uff0c\u5373\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\u4e0d\u4f5c\u9650\u5236\uff0c\u540c\u5b66\u4eec\u53ef\u81ea\u884c\u53d1\u6325\u3002 \u6b64\u5916\uff0c\u5ba2\u6237\u7aef\u5e76\u975e\u5fc5\u987b\u8981\u4f7f\u7528Python\u5b9e\u73b0\uff0c\u540c\u5b66\u4eec\u4e5f\u53ef\u81ea\u884c\u53d1\u6325\u3002","title":"2. display\u5e94\u7528\u53ca\u5ba2\u6237\u7aef\u5f00\u53d1"},{"location":"lab3/step/#3","text":"","title":"3. \u53e3\u7f69\u8bc6\u522b\u6280\u80fd\u5f00\u53d1"},{"location":"lab3/step/#31-iam","text":"\u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8bbf\u95ee \u534e\u4e3a\u4e91IAM\u7528\u6237\u7684\u767b\u5f55\u9875\u9762 \u3002\u5728\u767b\u5f55\u6846\u7684\u7b2c\u4e00\u884c\u5904\u8f93\u5165\u201ct2_test1\u201d\uff0c\u5728\u7b2c\u4e8c\u884c\u5904\u8f93\u5165\u201cembsysX\u201d\uff08X = \u7ec4\u53f7 - 1\uff0c\u5373\u5982\u679c\u7ec4\u53f7\u4e3a7\uff0c\u90a3\u4e48X\u4e3a6\uff09\uff0c\u521d\u59cb\u5bc6\u7801\u662f\u201cHITSZ2021\u201d\uff0c\u5982\u56fe3\u6240\u793a\u3002 \u56fe3 \u767b\u5f55IAM\u8d26\u6237 \u2003\u2003\u767b\u5f55\u6210\u529f\u540e\uff0c\u9700\u8bbe\u7f6e\u521d\u59cb\u5bc6\u7801\u3002 \u53cb\u60c5\u63d0\u9192 \u8bf7\u52a1\u5fc5\u8bb0\u4f4f\u6240\u8bbe\u7f6e\u7684\u5bc6\u7801\u3002\u82e5\u5fd8\u8bb0\u5bc6\u7801\uff0c\u53ef\u901a\u8fc7\u767b\u5f55\u9875\u9762\u7684\u201c\u5fd8\u8bb0\u5bc6\u7801\u201d\u627e\u56de\u5bc6\u7801\u3002\u82e5\u627e\u56de\u5931\u8d25\uff0c\u8bf7\u53ca\u65f6\u8054\u7cfb\u8001\u5e08\u91cd\u7f6e\u5bc6\u7801\u3002 \u2003\u2003\u8bbe\u7f6e\u65b0\u5bc6\u7801\u540e\uff0c\u5c06\u670d\u52a1\u5668\u533a\u5207\u6362\u5230\u201c\u534e\u5317-\u5317\u4eac\u56db\u201d\uff0c\u7136\u540e\u540c\u610fHiLens\u76f8\u5173\u7684\u6388\u6743\u3002 \u2003\u2003\u7136\u540e\uff0c\u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u4e2d\u95f4\u7684\u5c0f\u7bad\u5934\uff0c\u5c55\u5f00\u83dc\u5355\uff0c\u5982\u56fe4\u6240\u793a\u3002 \u56fe4 \u5c55\u5f00\u63a7\u5236\u53f0\u83dc\u5355 \u2003\u2003\u63a5\u7740\uff0c\u5728\u63a7\u5236\u53f0\u83dc\u5355\u7684\u9876\u90e8\uff0c\u628a\u5f53\u524d\u7684\u5de5\u4f5c\u7a7a\u95f4\u5207\u6362\u5230workspace_embsysX\uff08X = \u7ec4\u53f7 - 1\uff09\uff0c\u5982\u56fe5\u6240\u793a\u3002 \u56fe5 \u5207\u6362\u5de5\u4f5c\u7a7a\u95f4","title":"3.1 \u767b\u5f55\u534e\u4e3aIAM\u8d26\u6237"},{"location":"lab3/step/#32-hilens","text":"\u5207\u6362\u5de5\u4f5c\u7a7a\u95f4\u540e\uff0c\u6253\u5f00HiLens\u7ba1\u7406\u63a7\u5236\u53f0\u7684\u9875\u9762\uff0c\u70b9\u51fb\u201c\u8bbe\u5907\u7ba1\u7406\u201d->\u201c\u8bbe\u5907\u5217\u8868\u201d\uff0c\u67e5\u770b\u5217\u8868\u4e2d\u7684HiLens\u8bbe\u5907\uff0c\u5982\u56fe6\u6240\u793a\u3002 \u56fe6 \u67e5\u770bHiLens\u8bbe\u5907 \u2003\u2003\u82e5\u201c\u57fa\u7840\u6280\u80fd\u6743\u9650\u201d\u5904\u663e\u793a\u7ea2\u5b57\u201c\u672a\u6fc0\u6d3b\u201d\uff0c\u5219\u9700\u8981\u5148\u6fc0\u6d3b\u8bbe\u5907\u624d\u80fd\u8fdb\u884c\u540e\u7eed\u7684\u5f00\u53d1\uff1b\u82e5\u663e\u793a\u7eff\u5b57\u201c\u5df2\u6fc0\u6d3b\u201d\uff0c\u5219\u53ef\u4ee5\u8df3\u8fc7\u6fc0\u6d3b\u7684\u6b65\u9aa4\uff0c\u76f4\u63a5\u5f00\u59cb\u6280\u80fd\u5f00\u53d1\u3002 \u2003\u2003\u6b32\u6fc0\u6d3bHiLens\uff0c\u53ea\u9700\u70b9\u51fb\u201c\u6743\u9650\u6fc0\u6d3b\u201d->\u201c\u6d4b\u8bd5\u6837\u673a\u6fc0\u6d3b\u201d\uff0c\u7136\u540e\u8f93\u5165HiLens\u80cc\u90e8\u6807\u7b7e\u4e0a\u768420\u4f4dSN\u7f16\u7801\u5373\u53ef\uff0c\u5982\u56fe7\u3001\u56fe8\u6240\u793a\u3002 \u56fe7 \u6fc0\u6d3bHiLens \u56fe8 \u67e5\u770bHiLens\u7684SN\u7f16\u53f7","title":"3.2 HiLens\u6fc0\u6d3b"},{"location":"lab3/step/#32-hilens_1","text":"\u767b\u5f55\u8d26\u53f7\u540e\uff0c\u6253\u5f00HiLens\u7ba1\u7406\u63a7\u5236\u53f0\u7684\u9875\u9762\uff0c\u5c55\u5f00\u83dc\u5355\u680f\u4e0b\u7684\u201c\u6280\u80fd\u5f00\u53d1\u201d\uff0c\u70b9\u51fb\u201cHiLens Studio\u201d\uff0c\u5982\u56fe9\u6240\u793a\u3002 \u56fe9 \u70b9\u51fb\u201c\u6280\u80fd\u5f00\u53d1\u201d\u4e0b\u7684\u201cHiLens Studio\u201d \u2003\u2003\u968f\u540e\u5c06\u5f39\u51fa\u5982\u56fe10\u6240\u793a\u7684HiLens Studio\u6307\u5f15\u7684\u9875\u9762\uff0c\u7b49\u5019\u5176\u81ea\u52a8\u5b8c\u6210\u5373\u53ef\u3002 \u56fe10 \u7b49\u5f85\u9875\u9762 \u2003\u2003\u63a5\u4e0b\u6765\u5c06\u8fdb\u5165HiLens Studio\u9875\u9762\u3002\u6b64\u65f6\uff0c\u70b9\u51fbFile->New Project\uff0c\u6216\u70b9\u51fb\u201cGetting Started\u201d\u9875\u9762\u4e0b\u7684\u201cNew Project\u201d\u4ee5\u65b0\u5efa\u6280\u80fd\uff0c\u5982\u56fe11\u6240\u793a\u3002 \u56fe11 \u65b0\u5efa\u6280\u80fd \u2003\u2003\u968f\u540e\u5c06\u5f39\u51fa\u4e00\u4e2a\u5355\u72ec\u7684\u9875\u9762\uff0c\u9009\u62e9\u53e3\u7f69\u8bc6\u522b\u5373\u53ef\uff0c\u5982\u56fe12\u6240\u793a\u3002 \u56fe12 \u65b0\u5efa\u53e3\u7f69\u8bc6\u522b\u6280\u80fd \u2003\u2003\u6839\u636e\u9700\u8981\u4fee\u6539\u5de6\u4fa7\u7684\u5de5\u7a0b\u57fa\u672c\u4fe1\u606f\uff0c\u786e\u8ba4\u65e0\u8bef\u540e\u70b9\u51fb\u201c\u786e\u5b9a\u201d\u6309\u94ae\uff0c\u5982\u56fe13\u6240\u793a\u3002 \u56fe13 \u67e5\u770b\u548c\u7f16\u8f91\u5de5\u7a0b\u7684\u57fa\u672c\u4fe1\u606f \u2003\u2003\u6253\u5f00src\u6587\u4ef6\u5939\u4e0b\u7684main.py\u548cutils.py\uff0c\u4fee\u6539\u76f8\u5173\u4ee3\u7801\u3002 Tips HiLens Studio\u4f1a\u81ea\u52a8\u4fdd\u5b58\u4fee\u6539\u8fc7\u7684\u6e90\u6587\u4ef6\u3002 \u2003\u2003\u6280\u80fd\u7f16\u5199\u5b8c\u6210\u540e\uff0c\u53ef\u5bf9\u5176\u8fdb\u884c\u8c03\u8bd5\u3002 \u2003\u2003\u8c03\u8bd5\u524d\uff0c\u5148\u4ece\u83dc\u5355\u680f\u9009\u62e9\u8f93\u5165\u7684\u89c6\u9891\u6570\u636e\u6e90\uff0c\u5982\u56fe14\u6240\u793a\u3002 \u56fe14 \u9009\u62e9\u8c03\u8bd5\u7684\u6570\u636e\u6e90 \u2003\u2003\u8c03\u8bd5\u65f6\uff0c\u53ef\u5229\u7528\u83dc\u5355\u680f\u7684Debug\u83dc\u5355\u6216\u83dc\u5355\u680f\u53f3\u4fa7\u7684\u5feb\u6377\u6309\u94ae\uff0c\u5982\u56fe15\u6240\u793a\u3002 \u56fe15 \u8c03\u8bd5\u5165\u53e3","title":"3.2 HiLens\u6280\u80fd\u5f00\u53d1"},{"location":"lab3/step/#33-hilens","text":"\u6280\u80fd\u5c31\u7eea\u540e\uff0c\u6253\u5f00\u53f3\u4fa7\u7684HiLens Widget\u9875\u9762\uff0c\u5728HiLens\u4e0a\u5b89\u88c5\u6280\u80fd\uff0c\u5982\u56fe16\u6240\u793a\u3002 \u56fe16 \u5b89\u88c5\u6280\u80fd\u5230HiLens \u2003\u2003\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u70b9\u51fb\u201cStart\u201d\u542f\u52a8\u6280\u80fd\uff0c\u5982\u56fe17\u6240\u793a\u3002 \u56fe17 \u542f\u52a8\u5b89\u88c5\u597d\u7684\u6280\u80fd \u2003\u2003\u6280\u80fd\u542f\u52a8\u540e\uff0c\u65e2\u53ef\u4ee5\u5728HiLens Studio\u4e2d\u91cd\u542f\u3001\u505c\u6b62\u6280\u80fd\uff0c\u4e5f\u53ef\u4ee5\u5728HiLens\u7ba1\u7406\u63a7\u5236\u53f0\u7684\u201c\u8bbe\u5907\u7ba1\u7406\u201d->\u201c\u8bbe\u5907\u5217\u8868\u201d\u4e2d\u67e5\u770b\u548c\u64cd\u4f5c\u6280\u80fd\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u5982\u56fe18\u6240\u793a\u3002 \u56fe18 \u67e5\u770b\u548c\u7ba1\u7406\u6280\u80fd","title":"3.3 HiLens\u6280\u80fd\u7ba1\u7406"},{"location":"lab3/submit/","text":"\u9a8c\u6536\u4e0e\u63d0\u4ea4 \u5b9e\u9a8c\u62a5\u544a\u8981\u6c42 \u2003\u2003\u5b9e\u9a8c\u62a5\u544a\u9700\u6309\u7167\u5b9e\u9a8c\u5305\u4e2d\u7684\u62a5\u544a\u6a21\u677f\u8ba4\u771f\u64b0\u5199\u3002 \u9a8c\u6536\u4e0e\u63d0\u4ea4\u8981\u6c42 \u2003\u2003\u9a8c\u6536\u65f6\uff0c\u9700\u5bf9\u7cfb\u7edf\u8fdb\u884c\u73b0\u573a\u6f14\u793a\u3002 \u2003\u2003\u63d0\u4ea4\u65f6\uff0c\u9996\u5148\u65b0\u5efa\" \u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c3 \"\u6587\u4ef6\u5939\uff0c\u5e76\u5728\u5176\u4e2d\u653e\u5165\u4e0b\u5217\u6587\u4ef6/\u6587\u4ef6\u5939\uff1a - \u5b66\u53f7 _\u59d3\u540d_EmbSys\u5b9e\u9a8c3 |- XXX . doc / pdf /* 0. \u5b9e\u9a8c\u62a5\u544a */ |- ssd1316 /* 1. OLED\u8bbe\u5907\u9a71\u52a8 */ | |- ssd1316 . c /* OLED\u9a71\u52a8\u7684\u6e90\u6587\u4ef6 */ | |- Makefile /* \u4fee\u6539\u8fc7\u7684Makefile */ |- mask_app /* 2. \u4fee\u6539\u8fc7or\u81ea\u884c\u7f16\u5199\u7684\u53e3\u7f69\u8bc6\u522b\u5e94\u7528\u76f8\u5173\u7684\u6e90\u6587\u4ef6\u53caELF\u6587\u4ef6 */ | |- display . c /* \u6839\u636e\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5728LED\u70b9\u9635\u548cOLED\u4e0a\u663e\u793a\u8bc6\u522b\u7ed3\u679c */ | |- display /* \u7f16\u8bd1\u540e\u7684display\u7a0b\u5e8f\u7684ELF\u6587\u4ef6 */ | |- Makefile /* \u4fee\u6539\u8fc7\u7684Makefile */ | |- ssd1316 . ko /* OLED\u5c4f\u7684\u663e\u793a\u9a71\u52a8 */ | |- mask_detection . py /* \u5ba2\u6237\u7aef\u6e90\u6587\u4ef6(\u4e0d\u8981\u6c42\u5fc5\u987b\u4f7f\u7528Python\u7f16\u5199) */ |- hilens_skill /* 3. \u4fee\u6539\u8fc7or\u81ea\u884c\u7f16\u5199\u7684\u76f8\u5173\u7684HiLens\u6280\u80fd\u6e90\u6587\u4ef6 */ |- main . py |- utils . py \u2003\u2003\u7136\u540e\uff0c\u5c06\"\u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c3\"\u6587\u4ef6\u5939\u538b\u7f29 \u6253\u5305\u6210.zip \uff0c\u63d0\u4ea4\u5230\u4f5c\u4e1a\u7cfb\u7edf\u3002 Tips \u5b9e\u9a8c\u62a5\u544a\u7684\u64b0\u5199\u53ef\u53c2\u8003\u300a \u65e0\u4eba\u8f66\u5927\u8d5b\u51a0\u519b\u5206\u4eab\uff1a\u534e\u4e3a\u4e91ModelArts\u548cHiLens\u5e73\u53f0\u7684\u8054\u5408\u4f7f\u7528 \u300b \u2003\u2003\u62a5\u544a\u63d0\u4ea4 Deadline \uff1a\u67e5\u770b\u4f5c\u4e1a\u7cfb\u7edf\u3002","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4"},{"location":"lab3/submit/#_1","text":"","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4"},{"location":"lab3/submit/#_2","text":"\u5b9e\u9a8c\u62a5\u544a\u9700\u6309\u7167\u5b9e\u9a8c\u5305\u4e2d\u7684\u62a5\u544a\u6a21\u677f\u8ba4\u771f\u64b0\u5199\u3002","title":"\u5b9e\u9a8c\u62a5\u544a\u8981\u6c42"},{"location":"lab3/submit/#_3","text":"\u9a8c\u6536\u65f6\uff0c\u9700\u5bf9\u7cfb\u7edf\u8fdb\u884c\u73b0\u573a\u6f14\u793a\u3002 \u2003\u2003\u63d0\u4ea4\u65f6\uff0c\u9996\u5148\u65b0\u5efa\" \u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c3 \"\u6587\u4ef6\u5939\uff0c\u5e76\u5728\u5176\u4e2d\u653e\u5165\u4e0b\u5217\u6587\u4ef6/\u6587\u4ef6\u5939\uff1a - \u5b66\u53f7 _\u59d3\u540d_EmbSys\u5b9e\u9a8c3 |- XXX . doc / pdf /* 0. \u5b9e\u9a8c\u62a5\u544a */ |- ssd1316 /* 1. OLED\u8bbe\u5907\u9a71\u52a8 */ | |- ssd1316 . c /* OLED\u9a71\u52a8\u7684\u6e90\u6587\u4ef6 */ | |- Makefile /* \u4fee\u6539\u8fc7\u7684Makefile */ |- mask_app /* 2. \u4fee\u6539\u8fc7or\u81ea\u884c\u7f16\u5199\u7684\u53e3\u7f69\u8bc6\u522b\u5e94\u7528\u76f8\u5173\u7684\u6e90\u6587\u4ef6\u53caELF\u6587\u4ef6 */ | |- display . c /* \u6839\u636e\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5728LED\u70b9\u9635\u548cOLED\u4e0a\u663e\u793a\u8bc6\u522b\u7ed3\u679c */ | |- display /* \u7f16\u8bd1\u540e\u7684display\u7a0b\u5e8f\u7684ELF\u6587\u4ef6 */ | |- Makefile /* \u4fee\u6539\u8fc7\u7684Makefile */ | |- ssd1316 . ko /* OLED\u5c4f\u7684\u663e\u793a\u9a71\u52a8 */ | |- mask_detection . py /* \u5ba2\u6237\u7aef\u6e90\u6587\u4ef6(\u4e0d\u8981\u6c42\u5fc5\u987b\u4f7f\u7528Python\u7f16\u5199) */ |- hilens_skill /* 3. \u4fee\u6539\u8fc7or\u81ea\u884c\u7f16\u5199\u7684\u76f8\u5173\u7684HiLens\u6280\u80fd\u6e90\u6587\u4ef6 */ |- main . py |- utils . py \u2003\u2003\u7136\u540e\uff0c\u5c06\"\u5b66\u53f7_\u59d3\u540d_EmbSys\u5b9e\u9a8c3\"\u6587\u4ef6\u5939\u538b\u7f29 \u6253\u5305\u6210.zip \uff0c\u63d0\u4ea4\u5230\u4f5c\u4e1a\u7cfb\u7edf\u3002 Tips \u5b9e\u9a8c\u62a5\u544a\u7684\u64b0\u5199\u53ef\u53c2\u8003\u300a \u65e0\u4eba\u8f66\u5927\u8d5b\u51a0\u519b\u5206\u4eab\uff1a\u534e\u4e3a\u4e91ModelArts\u548cHiLens\u5e73\u53f0\u7684\u8054\u5408\u4f7f\u7528 \u300b \u2003\u2003\u62a5\u544a\u63d0\u4ea4 Deadline \uff1a\u67e5\u770b\u4f5c\u4e1a\u7cfb\u7edf\u3002","title":"\u9a8c\u6536\u4e0e\u63d0\u4ea4\u8981\u6c42"}]}